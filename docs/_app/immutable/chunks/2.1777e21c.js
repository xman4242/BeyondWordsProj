import{s as Ko,n as zi,f as Mc}from"./scheduler.63274e7e.js";import{S as Jo,i as Qo,g as Pr,h as kr,y as l1,k as yr,a as zn,f as vr,s as Gn,j as Vi,c as qn,x as gr,z as Oc,A as yu,e as L0,m as _u,n as wu,r as Bl,u as jl,v as Gl,d as ql,t as Ul,w as zl}from"./index.d5163801.js";import{_ as c1}from"./preload-helper.a4192956.js";function C0(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function ye(a){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(a)}var _r=Uint8Array,wr=Uint16Array,Es=Uint32Array,Zo=new _r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),th=new _r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u1=new _r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rc=function(a,t){for(var e=new wr(31),r=0;r<31;++r)e[r]=t+=1<<a[r-1];for(var i=new Es(e[30]),r=1;r<30;++r)for(var n=e[r];n<e[r+1];++n)i[n]=n-e[r]<<5|r;return[e,i]},Dc=Rc(Zo,2),Bc=Dc[0],f1=Dc[1];Bc[28]=258,f1[258]=28;var jc=Rc(th,0),Su=jc[0],P0=jc[1],d1=new wr(32768);for(var ke=0;ke<32768;++ke){var dn=(ke&43690)>>>1|(ke&21845)<<1;dn=(dn&52428)>>>2|(dn&13107)<<2,dn=(dn&61680)>>>4|(dn&3855)<<4,d1[ke]=((dn&65280)>>>8|(dn&255)<<8)>>>1}var Ai=function(a,t,e){for(var r=a.length,i=0,n=new wr(t);i<r;++i)++n[a[i]-1];var o=new wr(t);for(i=0;i<t;++i)o[i]=o[i-1]+n[i-1]<<1;var h;if(e){h=new wr(1<<t);var l=15-t;for(i=0;i<r;++i)if(a[i])for(var u=i<<4|a[i],p=t-a[i],v=o[a[i]-1]++<<p,m=v|(1<<p)-1;v<=m;++v)h[d1[v]>>>l]=u}else for(h=new wr(r),i=0;i<r;++i)h[i]=d1[o[a[i]-1]++]>>>15-a[i];return h},bn=new _r(288);for(var ke=0;ke<144;++ke)bn[ke]=8;for(var ke=144;ke<256;++ke)bn[ke]=9;for(var ke=256;ke<280;++ke)bn[ke]=7;for(var ke=280;ke<288;++ke)bn[ke]=8;var Is=new _r(32);for(var ke=0;ke<32;++ke)Is[ke]=5;var xu=Ai(bn,9,0),Au=Ai(bn,9,1),Nu=Ai(Is,5,0),Lu=Ai(Is,5,1),Vl=function(a){for(var t=a[0],e=1;e<a.length;++e)a[e]>t&&(t=a[e]);return t},ai=function(a,t,e){var r=t/8>>0;return(a[r]|a[r+1]<<8)>>>(t&7)&e},Hl=function(a,t){var e=t/8>>0;return(a[e]|a[e+1]<<8|a[e+2]<<16)>>>(t&7)},F1=function(a){return(a/8>>0)+(a&7&&1)},Gc=function(a,t,e){(t==null||t<0)&&(t=0),(e==null||e>a.length)&&(e=a.length);var r=new(a instanceof wr?wr:a instanceof Es?Es:_r)(e-t);return r.set(a.subarray(t,e)),r},Cu=function(a,t,e){var r=a.length,i=!t||e,n=!e||e.i;e||(e={}),t||(t=new _r(r*3));var o=function(rt){var D=t.length;if(rt>D){var Y=new _r(Math.max(D*2,rt));Y.set(t),t=Y}},h=e.f||0,l=e.p||0,u=e.b||0,p=e.l,v=e.d,m=e.m,f=e.n,b=r*8;do{if(!p){e.f=h=ai(a,l,1);var w=ai(a,l+1,3);if(l+=3,w)if(w==1)p=Au,v=Lu,m=9,f=5;else if(w==2){var y=ai(a,l,31)+257,k=ai(a,l+10,15)+4,R=y+ai(a,l+5,31)+1;l+=14;for(var z=new _r(R),W=new _r(19),C=0;C<k;++C)W[u1[C]]=ai(a,l+C*3,7);l+=k*3;var X=Vl(W),q=(1<<X)-1;if(!n&&l+R*(X+7)>b)break;for(var A=Ai(W,X,1),C=0;C<R;){var T=A[ai(a,l,q)];l+=T&15;var x=T>>>4;if(x<16)z[C++]=x;else{var G=0,U=0;for(x==16?(U=3+ai(a,l,3),l+=2,G=z[C-1]):x==17?(U=3+ai(a,l,7),l+=3):x==18&&(U=11+ai(a,l,127),l+=7);U--;)z[C++]=G}}var et=z.subarray(0,y),st=z.subarray(y);m=Vl(et),f=Vl(st),p=Ai(et,m,1),v=Ai(st,f,1)}else throw"invalid block type";else{var x=F1(l)+4,S=a[x-4]|a[x-3]<<8,P=x+S;if(P>r){if(n)throw"unexpected EOF";break}i&&o(u+S),t.set(a.subarray(x,P),u),e.b=u+=S,e.p=l=P*8;continue}if(l>b)throw"unexpected EOF"}i&&o(u+131072);for(var lt=(1<<m)-1,nt=(1<<f)-1,dt=m+f+18;n||l+dt<b;){var G=p[Hl(a,l)&lt],ot=G>>>4;if(l+=G&15,l>b)throw"unexpected EOF";if(!G)throw"invalid length/literal";if(ot<256)t[u++]=ot;else if(ot==256){p=null;break}else{var vt=ot-254;if(ot>264){var C=ot-257,F=Zo[C];vt=ai(a,l,(1<<F)-1)+Bc[C],l+=F}var B=v[Hl(a,l)&nt],V=B>>>4;if(!B)throw"invalid distance";l+=B&15;var st=Su[V];if(V>3){var F=th[V];st+=Hl(a,l)&(1<<F)-1,l+=F}if(l>b)throw"unexpected EOF";i&&o(u+131072);for(var J=u+vt;u<J;u+=4)t[u]=t[u-st],t[u+1]=t[u+1-st],t[u+2]=t[u+2-st],t[u+3]=t[u+3-st];u=J}}e.l=p,e.p=l,e.b=u,p&&(h=1,e.m=m,e.d=v,e.n=f)}while(!h);return u==t.length?t:Gc(t,0,u)},Gi=function(a,t,e){e<<=t&7;var r=t/8>>0;a[r]|=e,a[r+1]|=e>>>8},As=function(a,t,e){e<<=t&7;var r=t/8>>0;a[r]|=e,a[r+1]|=e>>>8,a[r+2]|=e>>>16},Wl=function(a,t){for(var e=[],r=0;r<a.length;++r)a[r]&&e.push({s:r,f:a[r]});var i=e.length,n=e.slice();if(!i)return[new _r(0),0];if(i==1){var o=new _r(e[0].s+1);return o[e[0].s]=1,[o,1]}e.sort(function(R,z){return R.f-z.f}),e.push({s:-1,f:25001});var h=e[0],l=e[1],u=0,p=1,v=2;for(e[0]={s:-1,f:h.f+l.f,l:h,r:l};p!=i-1;)h=e[e[u].f<e[v].f?u++:v++],l=e[u!=p&&e[u].f<e[v].f?u++:v++],e[p++]={s:-1,f:h.f+l.f,l:h,r:l};for(var m=n[0].s,r=1;r<i;++r)n[r].s>m&&(m=n[r].s);var f=new wr(m+1),b=p1(e[p-1],f,0);if(b>t){var r=0,w=0,x=b-t,S=1<<x;for(n.sort(function(z,W){return f[W.s]-f[z.s]||z.f-W.f});r<i;++r){var P=n[r].s;if(f[P]>t)w+=S-(1<<b-f[P]),f[P]=t;else break}for(w>>>=x;w>0;){var y=n[r].s;f[y]<t?w-=1<<t-f[y]++-1:++r}for(;r>=0&&w;--r){var k=n[r].s;f[k]==t&&(--f[k],++w)}b=t}return[new _r(f),b]},p1=function(a,t,e){return a.s==-1?Math.max(p1(a.l,t,e+1),p1(a.r,t,e+1)):t[a.s]=e},k0=function(a){for(var t=a.length;t&&!a[--t];);for(var e=new wr(++t),r=0,i=a[0],n=1,o=function(l){e[r++]=l},h=1;h<=t;++h)if(a[h]==i&&h!=t)++n;else{if(!i&&n>2){for(;n>138;n-=138)o(32754);n>2&&(o(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(o(i),--n;n>6;n-=6)o(8304);n>2&&(o(n-3<<5|8208),n=0)}for(;n--;)o(i);n=1,i=a[h]}return[e.subarray(0,r),t]},Ns=function(a,t){for(var e=0,r=0;r<t.length;++r)e+=a[r]*t[r];return e},Do=function(a,t,e){var r=e.length,i=F1(t+2);a[i]=r&255,a[i+1]=r>>>8,a[i+2]=a[i]^255,a[i+3]=a[i+1]^255;for(var n=0;n<r;++n)a[i+n+4]=e[n];return(i+4+r)*8},F0=function(a,t,e,r,i,n,o,h,l,u,p){Gi(t,p++,e),++i[256];for(var v=Wl(i,15),m=v[0],f=v[1],b=Wl(n,15),w=b[0],x=b[1],S=k0(m),P=S[0],y=S[1],k=k0(w),R=k[0],z=k[1],W=new wr(19),C=0;C<P.length;++C)W[P[C]&31]++;for(var C=0;C<R.length;++C)W[R[C]&31]++;for(var X=Wl(W,7),q=X[0],A=X[1],T=19;T>4&&!q[u1[T-1]];--T);var G=u+5<<3,U=Ns(i,bn)+Ns(n,Is)+o,et=Ns(i,m)+Ns(n,w)+o+14+3*T+Ns(W,q)+(2*W[16]+3*W[17]+7*W[18]);if(G<=U&&G<=et)return Do(t,p,a.subarray(l,l+u));var st,lt,nt,dt;if(Gi(t,p,1+(et<U)),p+=2,et<U){st=Ai(m,f,0),lt=m,nt=Ai(w,x,0),dt=w;var ot=Ai(q,A,0);Gi(t,p,y-257),Gi(t,p+5,z-1),Gi(t,p+10,T-4),p+=14;for(var C=0;C<T;++C)Gi(t,p+3*C,q[u1[C]]);p+=3*T;for(var vt=[P,R],F=0;F<2;++F)for(var B=vt[F],C=0;C<B.length;++C){var V=B[C]&31;Gi(t,p,ot[V]),p+=q[V],V>15&&(Gi(t,p,B[C]>>>5&127),p+=B[C]>>>12)}}else st=xu,lt=bn,nt=Nu,dt=Is;for(var C=0;C<h;++C)if(r[C]>255){var V=r[C]>>>18&31;As(t,p,st[V+257]),p+=lt[V+257],V>7&&(Gi(t,p,r[C]>>>23&31),p+=Zo[V]);var J=r[C]&31;As(t,p,nt[J]),p+=dt[J],J>3&&(As(t,p,r[C]>>>5&8191),p+=th[J])}else As(t,p,st[r[C]]),p+=lt[r[C]];return As(t,p,st[256]),p+lt[256]},Pu=new Es([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ku=new _r(0),Fu=function(a,t,e,r,i,n){var o=a.length,h=new _r(r+o+5*(1+Math.floor(o/7e3))+i),l=h.subarray(r,h.length-i),u=0;if(!t||o<8)for(var p=0;p<=o;p+=65535){var v=p+65535;v<o?u=Do(l,u,a.subarray(p,v)):(l[p]=n,u=Do(l,u,a.subarray(p,o)))}else{for(var m=Pu[t-1],f=m>>>13,b=m&8191,w=(1<<e)-1,x=new wr(32768),S=new wr(w+1),P=Math.ceil(e/3),y=2*P,k=function(Bt){return(a[Bt]^a[Bt+1]<<P^a[Bt+2]<<y)&w},R=new Es(25e3),z=new wr(288),W=new wr(32),C=0,X=0,p=0,q=0,A=0,T=0;p<o;++p){var G=k(p),U=p&32767,et=S[G];if(x[U]=et,S[G]=U,A<=p){var st=o-p;if((C>7e3||q>24576)&&st>423){u=F0(a,l,0,R,z,W,X,q,T,p-T,u),q=C=X=0,T=p;for(var lt=0;lt<286;++lt)z[lt]=0;for(var lt=0;lt<30;++lt)W[lt]=0}var nt=2,dt=0,ot=b,vt=U-et&32767;if(st>2&&G==k(p-vt))for(var F=Math.min(f,st)-1,B=Math.min(32767,p),V=Math.min(258,st);vt<=B&&--ot&&U!=et;){if(a[p+nt]==a[p+nt-vt]){for(var J=0;J<V&&a[p+J]==a[p+J-vt];++J);if(J>nt){if(nt=J,dt=vt,J>F)break;for(var rt=Math.min(vt,J-2),D=0,lt=0;lt<rt;++lt){var Y=p-vt+lt+32768&32767,tt=x[Y],wt=Y-tt+32768&32767;wt>D&&(D=wt,et=Y)}}}U=et,et=x[U],vt+=U-et+32768&32767}if(dt){R[q++]=268435456|f1[nt]<<18|P0[dt];var mt=f1[nt]&31,At=P0[dt]&31;X+=Zo[mt]+th[At],++z[257+mt],++W[At],A=p+nt,++C}else R[q++]=a[p],++z[a[p]]}}u=F0(a,l,n,R,z,W,X,q,T,p-T,u),n||(u=Do(l,u,ku))}return Gc(h,0,r+F1(u)+i)},Eu=function(){var a=1,t=0;return{p:function(e){for(var r=a,i=t,n=e.length,o=0;o!=n;){for(var h=Math.min(o+5552,n);o<h;++o)r+=e[o],i+=r;r%=65521,i%=65521}a=r,t=i},d:function(){return(a>>>8<<16|(t&255)<<8|t>>>8)+((a&255)<<23)*2}}},Iu=function(a,t,e,r,i){return Fu(a,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):12+t.mem,e,r,!i)},Tu=function(a,t,e){for(;e;++t)a[t]=e,e>>>=8},Mu=function(a,t){var e=t.level,r=e==0?0:e<6?1:e==9?3:2;a[0]=120,a[1]=r<<6|(r?32-2*r:1)},Ou=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function g1(a,t){t===void 0&&(t={});var e=Eu();e.p(a);var r=Iu(a,t,2,4);return Mu(r,t),Tu(r,r.length-4,e.d()),r}function Ru(a,t){return Cu((Ou(a),a.subarray(2,-4)),t)}var Ht=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $l(){Ht.console&&typeof Ht.console.log=="function"&&Ht.console.log.apply(Ht.console,arguments)}var Ne={log:$l,warn:function(a){Ht.console&&(typeof Ht.console.warn=="function"?Ht.console.warn.apply(Ht.console,arguments):$l.call(null,arguments))},error:function(a){Ht.console&&(typeof Ht.console.error=="function"?Ht.console.error.apply(Ht.console,arguments):$l(a))}};function Yl(a,t,e){var r=new XMLHttpRequest;r.open("GET",a),r.responseType="blob",r.onload=function(){Bn(r.response,t,e)},r.onerror=function(){Ne.error("could not download file")},r.send()}function E0(a){var t=new XMLHttpRequest;t.open("HEAD",a,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Po(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(t)}}var Fs,v1,Bn=Ht.saveAs||((typeof window>"u"?"undefined":ye(window))!=="object"||window!==Ht?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(a,t,e){var r=Ht.URL||Ht.webkitURL,i=document.createElement("a");t=t||a.name||"download",i.download=t,i.rel="noopener",typeof a=="string"?(i.href=a,i.origin!==location.origin?E0(i.href)?Yl(a,t,e):Po(i,i.target="_blank"):Po(i)):(i.href=r.createObjectURL(a),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Po(i)},0))}:"msSaveOrOpenBlob"in navigator?function(a,t,e){if(t=t||a.name||"download",typeof a=="string")if(E0(a))Yl(a,t,e);else{var r=document.createElement("a");r.href=a,r.target="_blank",setTimeout(function(){Po(r)})}else navigator.msSaveOrOpenBlob(function(i,n){return n===void 0?n={autoBom:!1}:ye(n)!=="object"&&(Ne.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(a,e),t)}:function(a,t,e,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof a=="string")return Yl(a,t,e);var i=a.type==="application/octet-stream",n=/constructor/i.test(Ht.HTMLElement)||Ht.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&n)&&(typeof FileReader>"u"?"undefined":ye(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var p=h.result;p=o?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},h.readAsDataURL(a)}else{var l=Ht.URL||Ht.webkitURL,u=l.createObjectURL(a);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qc(a){var t;a=a||"",this.ok=!1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[a=(a=a.replace(/ /g,"")).toLowerCase()]||a;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],r=0;r<e.length;r++){var i=e[r].re,n=e[r].process,o=i.exec(a);o&&(t=n(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return h.length==1&&(h="0"+h),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+h+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Xl(a,t){var e=a[0],r=a[1],i=a[2],n=a[3];e=ur(e,r,i,n,t[0],7,-680876936),n=ur(n,e,r,i,t[1],12,-389564586),i=ur(i,n,e,r,t[2],17,606105819),r=ur(r,i,n,e,t[3],22,-1044525330),e=ur(e,r,i,n,t[4],7,-176418897),n=ur(n,e,r,i,t[5],12,1200080426),i=ur(i,n,e,r,t[6],17,-1473231341),r=ur(r,i,n,e,t[7],22,-45705983),e=ur(e,r,i,n,t[8],7,1770035416),n=ur(n,e,r,i,t[9],12,-1958414417),i=ur(i,n,e,r,t[10],17,-42063),r=ur(r,i,n,e,t[11],22,-1990404162),e=ur(e,r,i,n,t[12],7,1804603682),n=ur(n,e,r,i,t[13],12,-40341101),i=ur(i,n,e,r,t[14],17,-1502002290),e=fr(e,r=ur(r,i,n,e,t[15],22,1236535329),i,n,t[1],5,-165796510),n=fr(n,e,r,i,t[6],9,-1069501632),i=fr(i,n,e,r,t[11],14,643717713),r=fr(r,i,n,e,t[0],20,-373897302),e=fr(e,r,i,n,t[5],5,-701558691),n=fr(n,e,r,i,t[10],9,38016083),i=fr(i,n,e,r,t[15],14,-660478335),r=fr(r,i,n,e,t[4],20,-405537848),e=fr(e,r,i,n,t[9],5,568446438),n=fr(n,e,r,i,t[14],9,-1019803690),i=fr(i,n,e,r,t[3],14,-187363961),r=fr(r,i,n,e,t[8],20,1163531501),e=fr(e,r,i,n,t[13],5,-1444681467),n=fr(n,e,r,i,t[2],9,-51403784),i=fr(i,n,e,r,t[7],14,1735328473),e=dr(e,r=fr(r,i,n,e,t[12],20,-1926607734),i,n,t[5],4,-378558),n=dr(n,e,r,i,t[8],11,-2022574463),i=dr(i,n,e,r,t[11],16,1839030562),r=dr(r,i,n,e,t[14],23,-35309556),e=dr(e,r,i,n,t[1],4,-1530992060),n=dr(n,e,r,i,t[4],11,1272893353),i=dr(i,n,e,r,t[7],16,-155497632),r=dr(r,i,n,e,t[10],23,-1094730640),e=dr(e,r,i,n,t[13],4,681279174),n=dr(n,e,r,i,t[0],11,-358537222),i=dr(i,n,e,r,t[3],16,-722521979),r=dr(r,i,n,e,t[6],23,76029189),e=dr(e,r,i,n,t[9],4,-640364487),n=dr(n,e,r,i,t[12],11,-421815835),i=dr(i,n,e,r,t[15],16,530742520),e=pr(e,r=dr(r,i,n,e,t[2],23,-995338651),i,n,t[0],6,-198630844),n=pr(n,e,r,i,t[7],10,1126891415),i=pr(i,n,e,r,t[14],15,-1416354905),r=pr(r,i,n,e,t[5],21,-57434055),e=pr(e,r,i,n,t[12],6,1700485571),n=pr(n,e,r,i,t[3],10,-1894986606),i=pr(i,n,e,r,t[10],15,-1051523),r=pr(r,i,n,e,t[1],21,-2054922799),e=pr(e,r,i,n,t[8],6,1873313359),n=pr(n,e,r,i,t[15],10,-30611744),i=pr(i,n,e,r,t[6],15,-1560198380),r=pr(r,i,n,e,t[13],21,1309151649),e=pr(e,r,i,n,t[4],6,-145523070),n=pr(n,e,r,i,t[11],10,-1120210379),i=pr(i,n,e,r,t[2],15,718787259),r=pr(r,i,n,e,t[9],21,-343485551),a[0]=vn(e,a[0]),a[1]=vn(r,a[1]),a[2]=vn(i,a[2]),a[3]=vn(n,a[3])}function eh(a,t,e,r,i,n){return t=vn(vn(t,a),vn(r,n)),vn(t<<i|t>>>32-i,e)}function ur(a,t,e,r,i,n,o){return eh(t&e|~t&r,a,t,i,n,o)}function fr(a,t,e,r,i,n,o){return eh(t&r|e&~r,a,t,i,n,o)}function dr(a,t,e,r,i,n,o){return eh(t^e^r,a,t,i,n,o)}function pr(a,t,e,r,i,n,o){return eh(e^(t|~r),a,t,i,n,o)}function Uc(a){var t,e=a.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a.length;t+=64)Xl(r,Du(a.substring(t-64,t)));a=a.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a.length;t++)i[t>>2]|=a.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Xl(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Xl(r,i),r}function Du(a){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=a.charCodeAt(t)+(a.charCodeAt(t+1)<<8)+(a.charCodeAt(t+2)<<16)+(a.charCodeAt(t+3)<<24);return e}Fs=Ht.atob.bind(Ht),v1=Ht.btoa.bind(Ht);var I0="0123456789abcdef".split("");function Bu(a){for(var t="",e=0;e<4;e++)t+=I0[a>>8*e+4&15]+I0[a>>8*e&15];return t}function ju(a){return String.fromCharCode((255&a)>>0,(65280&a)>>8,(16711680&a)>>16,(4278190080&a)>>24)}function m1(a){return Uc(a).map(ju).join("")}var Gu=function(a){for(var t=0;t<a.length;t++)a[t]=Bu(a[t]);return a.join("")}(Uc("hello"))!="5d41402abc4b2a76b9719d911017c592";function vn(a,t){if(Gu){var e=(65535&a)+(65535&t);return(a>>16)+(t>>16)+(e>>16)<<16|65535&e}return a+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b1(a,t){var e,r,i,n;if(a!==e){for(var o=(i=a,n=1+(256/a.length>>0),new Array(n+1).join(i)),h=[],l=0;l<256;l++)h[l]=l;var u=0;for(l=0;l<256;l++){var p=h[l];u=(u+p+o.charCodeAt(l))%256,h[l]=h[u],h[u]=p}e=a,r=h}else h=r;var v=t.length,m=0,f=0,b="";for(l=0;l<v;l++)f=(f+(p=h[m=(m+1)%256]))%256,h[m]=h[f],h[f]=p,o=h[(h[m]+h[f])%256],b+=String.fromCharCode(t.charCodeAt(l)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var T0={print:4,modify:8,copy:16,"annot-forms":32};function Ta(a,t,e,r){this.v=1,this.r=2;var i=192;a.forEach(function(h){if(T0.perm!==void 0)throw new Error("Invalid permission: "+h);i+=T0[h]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var n=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(n,o),this.P=-(1+(255^i)),this.encryptionKey=m1(n+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=b1(this.encryptionKey,this.padding)}function Ma(a){if(/[^\u0000-\u00ff]/.test(a))throw new Error("Invalid PDF Name Object: "+a+", Only accept ASCII characters.");for(var t="",e=a.length,r=0;r<e;r++){var i=a.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=a[r]}return t}function M0(a){if(ye(a)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,i){if(i=i||!1,typeof e!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var n=Math.random().toString(35);return t[e][n]=[r,!!i],n},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var n in t[e]){var o=t[e][n];try{o[0].apply(a,r)}catch(h){Ht.console&&Ne.error("jsPDF PubSub Error",h.message,h)}o[1]&&i.push(n)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Vo(a){if(!(this instanceof Vo))return new Vo(a);var t="opacity,stroke-opacity".split(",");for(var e in a)a.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=a[e]);this.id="",this.objectNumber=-1}function zc(a,t){this.gState=a,this.matrix=t,this.id="",this.objectNumber=-1}function jn(a,t,e,r,i){if(!(this instanceof jn))return new jn(a,t,e,r,i);this.type=a==="axial"?2:3,this.coords=t,this.colors=e,zc.call(this,r,i)}function Oa(a,t,e,r,i){if(!(this instanceof Oa))return new Oa(a,t,e,r,i);this.boundingBox=a,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,zc.call(this,r,i)}function Vt(a){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],n=arguments[3],o=[],h=1,l=16,u="S",p=null;ye(a=a||{})==="object"&&(e=a.orientation,r=a.unit||r,i=a.format||i,n=a.compress||a.compressPdf||n,(p=a.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),h=typeof a.userUnit=="number"?Math.abs(a.userUnit):1,a.precision!==void 0&&(t=a.precision),a.floatPrecision!==void 0&&(l=a.floatPrecision),u=a.defaultPathOperation||"S"),o=a.filters||(n===!0?["FlateEncode"]:o),r=r||"mm",e=(""+(e||"P")).toLowerCase();var v=a.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=M0;var b="1.3",w=f.__private__.getPdfVersion=function(){return b};f.__private__.setPdfVersion=function(d){b=d};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return x};var S=f.__private__.getPageFormat=function(d){return x[d]};i=i||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},y=P.COMPAT;function k(){this.saveGraphicsState(),$(new zt(It,0,0,-It,0,Zi()*It).toString()+" cm"),this.setFontSize(this.getFontSize()/It),u="n",y=P.ADVANCED}function R(){this.restoreGraphicsState(),u="S",y=P.COMPAT}var z=f.__private__.combineFontStyleAndFontWeight=function(d,L){if(d=="bold"&&L=="normal"||d=="bold"&&L==400||d=="normal"&&L=="italic"||d=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(d=L==400||L==="normal"?d==="italic"?"italic":"normal":L!=700&&L!=="bold"||d!=="normal"?(L==700?"bold":L)+""+d:"bold"),d};f.advancedAPI=function(d){var L=y===P.COMPAT;return L&&k.call(this),typeof d!="function"||(d(this),L&&R.call(this)),this},f.compatAPI=function(d){var L=y===P.ADVANCED;return L&&R.call(this),typeof d!="function"||(d(this),L&&k.call(this)),this},f.isAdvancedAPI=function(){return y===P.ADVANCED};var W,C=function(d){if(y!==P.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},X=f.roundToPrecision=f.__private__.roundToPrecision=function(d,L){var H=t||L;if(isNaN(d)||isNaN(H))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed(H).replace(/0+$/,"")};W=f.hpf=f.__private__.hpf=typeof l=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return X(d,l)}:l==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return X(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return X(d,16)};var q=f.f2=f.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return X(d,2)},A=f.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return X(d,3)},T=f.scale=f.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return y===P.COMPAT?d*It:y===P.ADVANCED?d:void 0},G=function(d){return y===P.COMPAT?Zi()-d:y===P.ADVANCED?d:void 0},U=function(d){return T(G(d))};f.__private__.setPrecision=f.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(t=parseInt(d,10))};var et,st="00000000000000000000000000000000",lt=f.__private__.getFileId=function(){return st},nt=f.__private__.setFileId=function(d){return st=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():st.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(lr=new Ta(p.userPermissions,p.userPassword,p.ownerPassword,st)),st};f.setFileId=function(d){return nt(d),this},f.getFileId=function(){return lt()};var dt=f.__private__.convertDateToPDFDate=function(d){var L=d.getTimezoneOffset(),H=L<0?"+":"-",K=Math.floor(Math.abs(L/60)),ht=Math.abs(L%60),gt=[H,V(K),"'",V(ht),"'"].join("");return["D:",d.getFullYear(),V(d.getMonth()+1),V(d.getDate()),V(d.getHours()),V(d.getMinutes()),V(d.getSeconds()),gt].join("")},ot=f.__private__.convertPDFDateToDate=function(d){var L=parseInt(d.substr(2,4),10),H=parseInt(d.substr(6,2),10)-1,K=parseInt(d.substr(8,2),10),ht=parseInt(d.substr(10,2),10),gt=parseInt(d.substr(12,2),10),xt=parseInt(d.substr(14,2),10);return new Date(L,H,K,ht,gt,xt,0)},vt=f.__private__.setCreationDate=function(d){var L;if(d===void 0&&(d=new Date),d instanceof Date)L=dt(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=d}return et=L},F=f.__private__.getCreationDate=function(d){var L=et;return d==="jsDate"&&(L=ot(et)),L};f.setCreationDate=function(d){return vt(d),this},f.getCreationDate=function(d){return F(d)};var B,V=f.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},J=f.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},rt=0,D=[],Y=[],tt=0,wt=[],mt=[],At=!1,Lt=Y,Bt=function(){rt=0,tt=0,Y=[],D=[],wt=[],ki=$e(),$r=$e()};f.__private__.setCustomOutputDestination=function(d){At=!0,Lt=d};var ft=function(d){At||(Lt=d)};f.__private__.resetCustomOutputDestination=function(){At=!1,Lt=Y};var $=f.__private__.out=function(d){return d=d.toString(),tt+=d.length+1,Lt.push(d),Lt},qt=f.__private__.write=function(d){return $(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},Ot=f.__private__.getArrayBuffer=function(d){for(var L=d.length,H=new ArrayBuffer(L),K=new Uint8Array(H);L--;)K[L]=d.charCodeAt(L);return H},Nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Nt};var Ct=a.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(d){return Ct=y===P.ADVANCED?d/It:d,this};var Et,Ft=f.__private__.getFontSize=f.getFontSize=function(){return y===P.COMPAT?Ct:Ct*It},jt=a.R2L||!1;f.__private__.setR2L=f.setR2L=function(d){return jt=d,this},f.__private__.getR2L=f.getR2L=function(){return jt};var Xt,te=f.__private__.setZoomMode=function(d){var L=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))Et=d;else if(isNaN(d)){if(L.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');Et=d}else Et=parseInt(d,10)};f.__private__.getZoomMode=function(){return Et};var ie,ce=f.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');Xt=d};f.__private__.getPageMode=function(){return Xt};var _e=f.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');ie=d};f.__private__.getLayoutMode=function(){return ie},f.__private__.setDisplayMode=f.setDisplayMode=function(d,L,H){return te(d),_e(L),ce(H),this};var Wt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(d){if(Object.keys(Wt).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Wt[d]},f.__private__.getDocumentProperties=function(){return Wt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(d){for(var L in Wt)Wt.hasOwnProperty(L)&&d[L]&&(Wt[L]=d[L]);return this},f.__private__.setDocumentProperty=function(d,L){if(Object.keys(Wt).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Wt[d]=L};var ae,It,hr,fe,Vr,xe={},Fe={},fi=[],ge={},Ln={},Me={},Hr={},Pi=null,Oe=0,Kt=[],ve=new M0(f),Cn=a.hotfixes||[],sr={},di={},pi=[],zt=function d(L,H,K,ht,gt,xt){if(!(this instanceof d))return new d(L,H,K,ht,gt,xt);isNaN(L)&&(L=1),isNaN(H)&&(H=0),isNaN(K)&&(K=0),isNaN(ht)&&(ht=1),isNaN(gt)&&(gt=0),isNaN(xt)&&(xt=0),this._matrix=[L,H,K,ht,gt,xt]};Object.defineProperty(zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),zt.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(d)},zt.prototype.multiply=function(d){var L=d.sx*this.sx+d.shy*this.shx,H=d.sx*this.shy+d.shy*this.sy,K=d.shx*this.sx+d.sy*this.shx,ht=d.shx*this.shy+d.sy*this.sy,gt=d.tx*this.sx+d.ty*this.shx+this.tx,xt=d.tx*this.shy+d.ty*this.sy+this.ty;return new zt(L,H,K,ht,gt,xt)},zt.prototype.decompose=function(){var d=this.sx,L=this.shy,H=this.shx,K=this.sy,ht=this.tx,gt=this.ty,xt=Math.sqrt(d*d+L*L),Tt=(d/=xt)*H+(L/=xt)*K;H-=d*Tt,K-=L*Tt;var Gt=Math.sqrt(H*H+K*K);return Tt/=Gt,d*(K/=Gt)<L*(H/=Gt)&&(d=-d,L=-L,Tt=-Tt,xt=-xt),{scale:new zt(xt,0,0,Gt,0,0),translate:new zt(1,0,0,1,ht,gt),rotate:new zt(d,L,-L,d,0,0),skew:new zt(1,0,Tt,1,0,0)}},zt.prototype.toString=function(d){return this.join(" ")},zt.prototype.inversed=function(){var d=this.sx,L=this.shy,H=this.shx,K=this.sy,ht=this.tx,gt=this.ty,xt=1/(d*K-L*H),Tt=K*xt,Gt=-L*xt,Qt=-H*xt,ee=d*xt;return new zt(Tt,Gt,Qt,ee,-Tt*ht-Qt*gt,-Gt*ht-ee*gt)},zt.prototype.applyToPoint=function(d){var L=d.x*this.sx+d.y*this.shx+this.tx,H=d.x*this.shy+d.y*this.sy+this.ty;return new da(L,H)},zt.prototype.applyToRectangle=function(d){var L=this.applyToPoint(d),H=this.applyToPoint(new da(d.x+d.w,d.y+d.h));return new as(L.x,L.y,H.x-L.x,H.y-L.y)},zt.prototype.clone=function(){var d=this.sx,L=this.shy,H=this.shx,K=this.sy,ht=this.tx,gt=this.ty;return new zt(d,L,H,K,ht,gt)},f.Matrix=zt;var Wr=f.matrixMult=function(d,L){return L.multiply(d)},gi=new zt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=gi;var Sr=function(d,L){if(!Ln[d]){var H=(L instanceof jn?"Sh":"P")+(Object.keys(ge).length+1).toString(10);L.id=H,Ln[d]=H,ge[H]=L,ve.publish("addPattern",L)}};f.ShadingPattern=jn,f.TilingPattern=Oa,f.addShadingPattern=function(d,L){return C("addShadingPattern()"),Sr(d,L),this},f.beginTilingPattern=function(d){C("beginTilingPattern()"),no(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},f.endTilingPattern=function(d,L){C("endTilingPattern()"),L.stream=mt[B].join(`
`),Sr(d,L),ve.publish("endTilingPattern",L),pi.pop().restore()};var Je=f.__private__.newObject=function(){var d=$e();return Er(d,!0),d},$e=f.__private__.newObjectDeferred=function(){return rt++,D[rt]=function(){return tt},rt},Er=function(d,L){return L=typeof L=="boolean"&&L,D[d]=tt,L&&$(d+" 0 obj"),d},ta=f.__private__.newAdditionalObject=function(){var d={objId:$e(),content:""};return wt.push(d),d},ki=$e(),$r=$e(),Yr=f.__private__.decodeColorString=function(d){var L=d.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length===5&&(L[4]==="k"||L[4]==="K")&&(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var H=parseFloat(L[0]);L=[H,H,H,"r"]}for(var K="#",ht=0;ht<3;ht++)K+=("0"+Math.floor(255*parseFloat(L[ht])).toString(16)).slice(-2);return K},Xr=f.__private__.encodeColorString=function(d){var L;typeof d=="string"&&(d={ch1:d});var H=d.ch1,K=d.ch2,ht=d.ch3,gt=d.ch4,xt=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof H=="string"&&H.charAt(0)!=="#"){var Tt=new qc(H);if(Tt.ok)H=Tt.toHex();else if(!/^\d*\.?\d*$/.test(H))throw new Error('Invalid color "'+H+'" passed to jsPDF.encodeColorString.')}if(typeof H=="string"&&/^#[0-9A-Fa-f]{3}$/.test(H)&&(H="#"+H[1]+H[1]+H[2]+H[2]+H[3]+H[3]),typeof H=="string"&&/^#[0-9A-Fa-f]{6}$/.test(H)){var Gt=parseInt(H.substr(1),16);H=Gt>>16&255,K=Gt>>8&255,ht=255&Gt}if(K===void 0||gt===void 0&&H===K&&K===ht)if(typeof H=="string")L=H+" "+xt[0];else switch(d.precision){case 2:L=q(H/255)+" "+xt[0];break;case 3:default:L=A(H/255)+" "+xt[0]}else if(gt===void 0||ye(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return L=["1.","1.","1.",xt[1]].join(" ");if(typeof H=="string")L=[H,K,ht,xt[1]].join(" ");else switch(d.precision){case 2:L=[q(H/255),q(K/255),q(ht/255),xt[1]].join(" ");break;default:case 3:L=[A(H/255),A(K/255),A(ht/255),xt[1]].join(" ")}}else if(typeof H=="string")L=[H,K,ht,gt,xt[2]].join(" ");else switch(d.precision){case 2:L=[q(H),q(K),q(ht),q(gt),xt[2]].join(" ");break;case 3:default:L=[A(H),A(K),A(ht),A(gt),xt[2]].join(" ")}return L},vi=f.__private__.getFilters=function(){return o},Dr=f.__private__.putStream=function(d){var L=(d=d||{}).data||"",H=d.filters||vi(),K=d.alreadyAppliedFilters||[],ht=d.addLength1||!1,gt=L.length,xt=d.objectId,Tt=function(cr){return cr};if(p!==null&&xt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Tt=lr.encryptor(xt,0));var Gt={};H===!0&&(H=["FlateEncode"]);var Qt=d.additionalKeyValues||[],ee=(Gt=Vt.API.processDataByFilters!==void 0?Vt.API.processDataByFilters(L,H):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(K)?K.join(" "):K.toString());if(Gt.data.length!==0&&(Qt.push({key:"Length",value:Gt.data.length}),ht===!0&&Qt.push({key:"Length1",value:gt})),ee.length!=0)if(ee.split("/").length-1==1)Qt.push({key:"Filter",value:ee});else{Qt.push({key:"Filter",value:"["+ee+"]"});for(var he=0;he<Qt.length;he+=1)if(Qt[he].key==="DecodeParms"){for(var Ie=[],Re=0;Re<Gt.reverseChain.split("/").length-1;Re+=1)Ie.push("null");Ie.push(Qt[he].value),Qt[he].value="["+Ie.join(" ")+"]"}}$("<<");for(var Ye=0;Ye<Qt.length;Ye++)$("/"+Qt[Ye].key+" "+Qt[Ye].value);$(">>"),Gt.data.length!==0&&($("stream"),$(Tt(Gt.data)),$("endstream"))},mi=f.__private__.putPage=function(d){var L=d.number,H=d.data,K=d.objId,ht=d.contentsObjId;Er(K,!0),$("<</Type /Page"),$("/Parent "+d.rootDictionaryObjId+" 0 R"),$("/Resources "+d.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(W(d.mediaBox.bottomLeftX))+" "+parseFloat(W(d.mediaBox.bottomLeftY))+" "+W(d.mediaBox.topRightX)+" "+W(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&$("/CropBox ["+W(d.cropBox.bottomLeftX)+" "+W(d.cropBox.bottomLeftY)+" "+W(d.cropBox.topRightX)+" "+W(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&$("/BleedBox ["+W(d.bleedBox.bottomLeftX)+" "+W(d.bleedBox.bottomLeftY)+" "+W(d.bleedBox.topRightX)+" "+W(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&$("/TrimBox ["+W(d.trimBox.bottomLeftX)+" "+W(d.trimBox.bottomLeftY)+" "+W(d.trimBox.topRightX)+" "+W(d.trimBox.topRightY)+"]"),d.artBox!==null&&$("/ArtBox ["+W(d.artBox.bottomLeftX)+" "+W(d.artBox.bottomLeftY)+" "+W(d.artBox.topRightX)+" "+W(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&$("/UserUnit "+d.userUnit),ve.publish("putPage",{objId:K,pageContext:Kt[L],pageNumber:L,page:H}),$("/Contents "+ht+" 0 R"),$(">>"),$("endobj");var gt=H.join(`
`);return y===P.ADVANCED&&(gt+=`
Q`),Er(ht,!0),Dr({data:gt,filters:vi(),objectId:ht}),$("endobj"),K},Pn=f.__private__.putPages=function(){var d,L,H=[];for(d=1;d<=Oe;d++)Kt[d].objId=$e(),Kt[d].contentsObjId=$e();for(d=1;d<=Oe;d++)H.push(mi({number:d,data:mt[d],objId:Kt[d].objId,contentsObjId:Kt[d].contentsObjId,mediaBox:Kt[d].mediaBox,cropBox:Kt[d].cropBox,bleedBox:Kt[d].bleedBox,trimBox:Kt[d].trimBox,artBox:Kt[d].artBox,userUnit:Kt[d].userUnit,rootDictionaryObjId:ki,resourceDictionaryObjId:$r}));Er(ki,!0),$("<</Type /Pages");var K="/Kids [";for(L=0;L<Oe;L++)K+=H[L]+" 0 R ";$(K+"]"),$("/Count "+Oe),$(">>"),$("endobj"),ve.publish("postPutPages")},ea=function(d){ve.publish("putFont",{font:d,out:$,newObject:Je,putStream:Dr}),d.isAlreadyPutted!==!0&&(d.objectNumber=Je(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Ma(d.postScriptName)),$("/Subtype /Type1"),typeof d.encoding=="string"&&$("/Encoding /"+d.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},ra=function(){for(var d in xe)xe.hasOwnProperty(d)&&(v===!1||v===!0&&m.hasOwnProperty(d))&&ea(xe[d])},ia=function(d){d.objectNumber=Je();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[W(d.x),W(d.y),W(d.x+d.width),W(d.y+d.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var H=d.pages[1].join(`
`);Dr({data:H,additionalKeyValues:L,objectId:d.objectNumber}),$("endobj")},na=function(){for(var d in sr)sr.hasOwnProperty(d)&&ia(sr[d])},Gs=function(d,L){var H,K=[],ht=1/(L-1);for(H=0;H<1;H+=ht)K.push(H);if(K.push(1),d[0].offset!=0){var gt={offset:0,color:d[0].color};d.unshift(gt)}if(d[d.length-1].offset!=1){var xt={offset:1,color:d[d.length-1].color};d.push(xt)}for(var Tt="",Gt=0,Qt=0;Qt<K.length;Qt++){for(H=K[Qt];H>d[Gt+1].offset;)Gt++;var ee=d[Gt].offset,he=(H-ee)/(d[Gt+1].offset-ee),Ie=d[Gt].color,Re=d[Gt+1].color;Tt+=J(Math.round((1-he)*Ie[0]+he*Re[0]).toString(16))+J(Math.round((1-he)*Ie[1]+he*Re[1]).toString(16))+J(Math.round((1-he)*Ie[2]+he*Re[2]).toString(16))}return Tt.trim()},Yh=function(d,L){L||(L=21);var H=Je(),K=Gs(d.colors,L),ht=[];ht.push({key:"FunctionType",value:"0"}),ht.push({key:"Domain",value:"[0.0 1.0]"}),ht.push({key:"Size",value:"["+L+"]"}),ht.push({key:"BitsPerSample",value:"8"}),ht.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ht.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Dr({data:K,additionalKeyValues:ht,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:H}),$("endobj"),d.objectNumber=Je(),$("<< /ShadingType "+d.type),$("/ColorSpace /DeviceRGB");var gt="/Coords ["+W(parseFloat(d.coords[0]))+" "+W(parseFloat(d.coords[1]))+" ";d.type===2?gt+=W(parseFloat(d.coords[2]))+" "+W(parseFloat(d.coords[3])):gt+=W(parseFloat(d.coords[2]))+" "+W(parseFloat(d.coords[3]))+" "+W(parseFloat(d.coords[4]))+" "+W(parseFloat(d.coords[5])),$(gt+="]"),d.matrix&&$("/Matrix ["+d.matrix.toString()+"]"),$("/Function "+H+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Xh=function(d,L){var H=$e(),K=Je();L.push({resourcesOid:H,objectOid:K}),d.objectNumber=K;var ht=[];ht.push({key:"Type",value:"/Pattern"}),ht.push({key:"PatternType",value:"1"}),ht.push({key:"PaintType",value:"1"}),ht.push({key:"TilingType",value:"1"}),ht.push({key:"BBox",value:"["+d.boundingBox.map(W).join(" ")+"]"}),ht.push({key:"XStep",value:W(d.xStep)}),ht.push({key:"YStep",value:W(d.yStep)}),ht.push({key:"Resources",value:H+" 0 R"}),d.matrix&&ht.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),Dr({data:d.stream,additionalKeyValues:ht,objectId:d.objectNumber}),$("endobj")},aa=function(d){var L;for(L in ge)ge.hasOwnProperty(L)&&(ge[L]instanceof jn?Yh(ge[L]):ge[L]instanceof Oa&&Xh(ge[L],d))},qs=function(d){for(var L in d.objectNumber=Je(),$("<<"),d)switch(L){case"opacity":$("/ca "+q(d[L]));break;case"stroke-opacity":$("/CA "+q(d[L]))}$(">>"),$("endobj")},Kh=function(){var d;for(d in Me)Me.hasOwnProperty(d)&&qs(Me[d])},Xa=function(){for(var d in $("/XObject <<"),sr)sr.hasOwnProperty(d)&&sr[d].objectNumber>=0&&$("/"+d+" "+sr[d].objectNumber+" 0 R");ve.publish("putXobjectDict"),$(">>")},Jh=function(){lr.oid=Je(),$("<<"),$("/Filter /Standard"),$("/V "+lr.v),$("/R "+lr.r),$("/U <"+lr.toHexString(lr.U)+">"),$("/O <"+lr.toHexString(lr.O)+">"),$("/P "+lr.P),$(">>"),$("endobj")},Us=function(){for(var d in $("/Font <<"),xe)xe.hasOwnProperty(d)&&(v===!1||v===!0&&m.hasOwnProperty(d))&&$("/"+d+" "+xe[d].objectNumber+" 0 R");$(">>")},Qh=function(){if(Object.keys(ge).length>0){for(var d in $("/Shading <<"),ge)ge.hasOwnProperty(d)&&ge[d]instanceof jn&&ge[d].objectNumber>=0&&$("/"+d+" "+ge[d].objectNumber+" 0 R");ve.publish("putShadingPatternDict"),$(">>")}},sa=function(d){if(Object.keys(ge).length>0){for(var L in $("/Pattern <<"),ge)ge.hasOwnProperty(L)&&ge[L]instanceof f.TilingPattern&&ge[L].objectNumber>=0&&ge[L].objectNumber<d&&$("/"+L+" "+ge[L].objectNumber+" 0 R");ve.publish("putTilingPatternDict"),$(">>")}},Zh=function(){if(Object.keys(Me).length>0){var d;for(d in $("/ExtGState <<"),Me)Me.hasOwnProperty(d)&&Me[d].objectNumber>=0&&$("/"+d+" "+Me[d].objectNumber+" 0 R");ve.publish("putGStateDict"),$(">>")}},qe=function(d){Er(d.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Us(),Qh(),sa(d.objectOid),Zh(),Xa(),$(">>"),$("endobj")},zs=function(){var d=[];ra(),Kh(),na(),aa(d),ve.publish("putResources"),d.forEach(qe),qe({resourcesOid:$r,objectOid:Number.MAX_SAFE_INTEGER}),ve.publish("postPutResources")},Vs=function(){ve.publish("putAdditionalObjects");for(var d=0;d<wt.length;d++){var L=wt[d];Er(L.objId,!0),$(L.content),$("endobj")}ve.publish("postPutAdditionalObjects")},Hs=function(d){Fe[d.fontName]=Fe[d.fontName]||{},Fe[d.fontName][d.fontStyle]=d.id},Ka=function(d,L,H,K,ht){var gt={id:"F"+(Object.keys(xe).length+1).toString(10),postScriptName:d,fontName:L,fontStyle:H,encoding:K,isStandardFont:ht||!1,metadata:{}};return ve.publish("addFont",{font:gt,instance:this}),xe[gt.id]=gt,Hs(gt),gt.id},tl=function(d){for(var L=0,H=Nt.length;L<H;L++){var K=Ka.call(this,d[L][0],d[L][1],d[L][2],Nt[L][3],!0);v===!1&&(m[K]=!0);var ht=d[L][0].split("-");Hs({id:K,fontName:ht[0],fontStyle:ht[1]||""})}ve.publish("addFonts",{fonts:xe,dictionary:Fe})},Kr=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(K){var L=K.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var H="Error in function "+L.split(`
`)[0].split("<")[0]+": "+K.message;if(!Ht.console)throw new Error(H);Ht.console.error(H,K),Ht.alert&&alert(H)}},d.foo.bar=d,d.foo},oa=function(d,L){var H,K,ht,gt,xt,Tt,Gt,Qt,ee;if(ht=(L=L||{}).sourceEncoding||"Unicode",xt=L.outputEncoding,(L.autoencode||xt)&&xe[ae].metadata&&xe[ae].metadata[ht]&&xe[ae].metadata[ht].encoding&&(gt=xe[ae].metadata[ht].encoding,!xt&&xe[ae].encoding&&(xt=xe[ae].encoding),!xt&&gt.codePages&&(xt=gt.codePages[0]),typeof xt=="string"&&(xt=gt[xt]),xt)){for(Gt=!1,Tt=[],H=0,K=d.length;H<K;H++)(Qt=xt[d.charCodeAt(H)])?Tt.push(String.fromCharCode(Qt)):Tt.push(d[H]),Tt[H].charCodeAt(0)>>8&&(Gt=!0);d=Tt.join("")}for(H=d.length;Gt===void 0&&H!==0;)d.charCodeAt(H-1)>>8&&(Gt=!0),H--;if(!Gt)return d;for(Tt=L.noBOM?[]:[254,255],H=0,K=d.length;H<K;H++){if((ee=(Qt=d.charCodeAt(H))>>8)>>8)throw new Error("Character at position "+H+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tt.push(ee),Tt.push(Qt-(ee<<8))}return String.fromCharCode.apply(void 0,Tt)},xr=f.__private__.pdfEscape=f.pdfEscape=function(d,L){return oa(d,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ja=f.__private__.beginPage=function(d){mt[++Oe]=[],Kt[Oe]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},$s(Oe),ft(mt[B])},Ws=function(d,L){var H,K,ht;switch(e=L||e,typeof d=="string"&&(H=S(d.toLowerCase()),Array.isArray(H)&&(K=H[0],ht=H[1])),Array.isArray(d)&&(K=d[0]*It,ht=d[1]*It),isNaN(K)&&(K=i[0],ht=i[1]),(K>14400||ht>14400)&&(Ne.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),K=Math.min(14400,K),ht=Math.min(14400,ht)),i=[K,ht],e.substr(0,1)){case"l":ht>K&&(i=[ht,K]);break;case"p":K>ht&&(i=[ht,K])}Ja(i),Zs(es),$(Jr),is!==0&&$(is+" J"),ns!==0&&$(ns+" j"),ve.publish("addPage",{pageNumber:Oe})},el=function(d){d>0&&d<=Oe&&(mt.splice(d,1),Kt.splice(d,1),Oe--,B>Oe&&(B=Oe),this.setPage(B))},$s=function(d){d>0&&d<=Oe&&(B=d)},rl=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return mt.length-1},Ys=function(d,L,H){var K,ht=void 0;return H=H||{},d=d!==void 0?d:xe[ae].fontName,L=L!==void 0?L:xe[ae].fontStyle,K=d.toLowerCase(),Fe[K]!==void 0&&Fe[K][L]!==void 0?ht=Fe[K][L]:Fe[d]!==void 0&&Fe[d][L]!==void 0?ht=Fe[d][L]:H.disableWarning===!1&&Ne.warn("Unable to look up font label for font '"+d+"', '"+L+"'. Refer to getFontList() for available fonts."),ht||H.noFallback||(ht=Fe.times[L])==null&&(ht=Fe.times.normal),ht},il=f.__private__.putInfo=function(){var d=Je(),L=function(K){return K};for(var H in p!==null&&(L=lr.encryptor(d,0)),$("<<"),$("/Producer ("+xr(L("jsPDF "+Vt.version))+")"),Wt)Wt.hasOwnProperty(H)&&Wt[H]&&$("/"+H.substr(0,1).toUpperCase()+H.substr(1)+" ("+xr(L(Wt[H]))+")");$("/CreationDate ("+xr(L(et))+")"),$(">>"),$("endobj")},Qa=f.__private__.putCatalog=function(d){var L=(d=d||{}).rootDictionaryObjId||ki;switch(Je(),$("<<"),$("/Type /Catalog"),$("/Pages "+L+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var H=""+Et;H.substr(H.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&$("/OpenAction [3 0 R /XYZ null null "+q(Et)+"]")}switch(ie||(ie="continuous"),ie){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Xt&&$("/PageMode /"+Xt),ve.publish("putCatalog"),$(">>"),$("endobj")},nl=f.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(rt+1)),$("/Root "+rt+" 0 R"),$("/Info "+(rt-1)+" 0 R"),p!==null&&$("/Encrypt "+lr.oid+" 0 R"),$("/ID [ <"+st+"> <"+st+"> ]"),$(">>")},al=f.__private__.putHeader=function(){$("%PDF-"+b),$("%ºß¬à")},sl=f.__private__.putXRef=function(){var d="0000000000";$("xref"),$("0 "+(rt+1)),$("0000000000 65535 f ");for(var L=1;L<=rt;L++)typeof D[L]=="function"?$((d+D[L]()).slice(-10)+" 00000 n "):D[L]!==void 0?$((d+D[L]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},Fi=f.__private__.buildDocument=function(){Bt(),ft(Y),ve.publish("buildDocument"),al(),Pn(),Vs(),zs(),p!==null&&Jh(),il(),Qa();var d=tt;return sl(),nl(),$("startxref"),$(""+d),$("%%EOF"),ft(mt[B]),Y.join(`
`)},ha=f.__private__.getBlob=function(d){return new Blob([Ot(d)],{type:"application/pdf"})},la=f.output=f.__private__.output=Kr(function(d,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",d){case void 0:return Fi();case"save":f.save(L.filename);break;case"arraybuffer":return Ot(Fi());case"blob":return ha(Fi());case"bloburi":case"bloburl":if(Ht.URL!==void 0&&typeof Ht.URL.createObjectURL=="function")return Ht.URL&&Ht.URL.createObjectURL(ha(Fi()))||void 0;Ne.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var H="",K=Fi();try{H=v1(K)}catch{H=v1(unescape(encodeURIComponent(K)))}return"data:application/pdf;filename="+L.filename+";base64,"+H;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ht)==="[object Window]"){var ht="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(ht=L.pdfObjectUrl,gt="");var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ht+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",Tt=Ht.open();return Tt!==null&&Tt.document.write(xt),Tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ht)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',Qt=Ht.open();if(Qt!==null){Qt.document.write(Gt);var ee=this;Qt.document.documentElement.querySelector("#pdfViewer").onload=function(){Qt.document.title=L.filename,Qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ee.output("bloburl"))}}return Qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ht)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var he='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',Ie=Ht.open();if(Ie!==null&&(Ie.document.write(he),Ie.document.title=L.filename),Ie||typeof safari>"u")return Ie;break;case"datauri":case"dataurl":return Ht.document.location.href=this.output("datauristring",L);default:return null}}),Xs=function(d){return Array.isArray(Cn)===!0&&Cn.indexOf(d)>-1};switch(r){case"pt":It=1;break;case"mm":It=72/25.4;break;case"cm":It=72/2.54;break;case"in":It=72;break;case"px":It=Xs("px_scaling")==1?.75:96/72;break;case"pc":case"em":It=12;break;case"ex":It=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);It=r}var lr=null;vt(),nt();var ol=function(d){return p!==null?lr.encryptor(d,0):function(L){return L}},Ks=f.__private__.getPageInfo=f.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Kt[d].objId,pageNumber:d,pageContext:Kt[d]}},Yt=f.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in Kt)if(Kt[L].objId===d)break;return Ks(L)},hl=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Kt[B].objId,pageNumber:B,pageContext:Kt[B]}};f.addPage=function(){return Ws.apply(this,arguments),this},f.setPage=function(){return $s.apply(this,arguments),ft.call(this,mt[B]),this},f.insertPage=function(d){return this.addPage(),this.movePage(B,d),this},f.movePage=function(d,L){var H,K;if(d>L){H=mt[d],K=Kt[d];for(var ht=d;ht>L;ht--)mt[ht]=mt[ht-1],Kt[ht]=Kt[ht-1];mt[L]=H,Kt[L]=K,this.setPage(L)}else if(d<L){H=mt[d],K=Kt[d];for(var gt=d;gt<L;gt++)mt[gt]=mt[gt+1],Kt[gt]=Kt[gt+1];mt[L]=H,Kt[L]=K,this.setPage(L)}return this},f.deletePage=function(){return el.apply(this,arguments),this},f.__private__.text=f.text=function(d,L,H,K,ht){var gt,xt,Tt,Gt,Qt,ee,he,Ie,Re,Ye=(K=K||{}).scope||this;if(typeof d=="number"&&typeof L=="number"&&(typeof H=="string"||Array.isArray(H))){var cr=H;H=L,L=d,d=cr}if(arguments[3]instanceof zt?(C("The transform parameter of text() with a Matrix value"),Re=ht):(Tt=arguments[4],Gt=arguments[5],ye(he=arguments[3])==="object"&&he!==null||(typeof Tt=="string"&&(Gt=Tt,Tt=null),typeof he=="string"&&(Gt=he,he=null),typeof he=="number"&&(Tt=he,he=null),K={flags:he,angle:Tt,align:Gt})),isNaN(L)||isNaN(H)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return Ye;var rr="",Qr=!1,Ir=typeof K.lineHeightFactor=="number"?K.lineHeightFactor:Fn,Ii=Ye.internal.scaleFactor;function ao(Ce){return Ce=Ce.split("	").join(Array(K.TabLen||9).join(" ")),xr(Ce,he)}function ls(Ce){for(var Pe,Ue=Ce.concat(),Qe=[],Ri=Ue.length;Ri--;)typeof(Pe=Ue.shift())=="string"?Qe.push(Pe):Array.isArray(Ce)&&(Pe.length===1||Pe[1]===void 0&&Pe[2]===void 0)?Qe.push(Pe[0]):Qe.push([Pe[0],Pe[1],Pe[2]]);return Qe}function cs(Ce,Pe){var Ue;if(typeof Ce=="string")Ue=Pe(Ce)[0];else if(Array.isArray(Ce)){for(var Qe,Ri,an=Ce.concat(),xa=[],oo=an.length;oo--;)typeof(Qe=an.shift())=="string"?xa.push(Pe(Qe)[0]):Array.isArray(Qe)&&typeof Qe[0]=="string"&&(Ri=Pe(Qe[0],Qe[1],Qe[2]),xa.push([Ri[0],Ri[1],Ri[2]]));Ue=xa}return Ue}var ga=!1,us=!0;if(typeof d=="string")ga=!0;else if(Array.isArray(d)){var fs=d.concat();xt=[];for(var va,Ar=fs.length;Ar--;)(typeof(va=fs.shift())!="string"||Array.isArray(va)&&typeof va[0]!="string")&&(us=!1);ga=us}if(ga===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var ma=Ct/Ye.internal.scaleFactor,ba=ma*(Ir-1);switch(K.baseline){case"bottom":H-=ba;break;case"top":H+=ma-ba;break;case"hanging":H+=ma-2*ba;break;case"middle":H+=ma/2-ba}if((ee=K.maxWidth||0)>0&&(typeof d=="string"?d=Ye.splitTextToSize(d,ee):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Ce,Pe){return Ce.concat(Ye.splitTextToSize(Pe,ee))},[]))),gt={text:d,x:L,y:H,options:K,mutex:{pdfEscape:xr,activeFontKey:ae,fonts:xe,activeFontSize:Ct}},ve.publish("preProcessText",gt),d=gt.text,Tt=(K=gt.options).angle,!(Re instanceof zt)&&Tt&&typeof Tt=="number"){Tt*=Math.PI/180,K.rotationDirection===0&&(Tt=-Tt),y===P.ADVANCED&&(Tt=-Tt);var ya=Math.cos(Tt),ds=Math.sin(Tt);Re=new zt(ya,ds,-ds,ya,0,0)}else Tt&&Tt instanceof zt&&(Re=Tt);y!==P.ADVANCED||Re||(Re=gi),(Qt=K.charSpace||fa)!==void 0&&(rr+=W(T(Qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ie=K.horizontalScale)!==void 0&&(rr+=W(100*Ie)+` Tz
`),K.lang;var Nr=-1,bl=K.renderingMode!==void 0?K.renderingMode:K.stroke,ps=Ye.internal.getCurrentPageInfo().pageContext;switch(bl){case 0:case!1:case"fill":Nr=0;break;case 1:case!0:case"stroke":Nr=1;break;case 2:case"fillThenStroke":Nr=2;break;case 3:case"invisible":Nr=3;break;case 4:case"fillAndAddForClipping":Nr=4;break;case 5:case"strokeAndAddPathForClipping":Nr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Nr=6;break;case 7:case"addToPathForClipping":Nr=7}var so=ps.usedRenderingMode!==void 0?ps.usedRenderingMode:-1;Nr!==-1?rr+=Nr+` Tr
`:so!==-1&&(rr+=`0 Tr
`),Nr!==-1&&(ps.usedRenderingMode=Nr),Gt=K.align||"left";var Zr,gs=Ct*Ir,yl=Ye.internal.pageSize.getWidth(),_l=xe[ae];Qt=K.charSpace||fa,ee=K.maxWidth||0,he=Object.assign({autoencode:!0,noBOM:!0},K.flags);var tn=[];if(Object.prototype.toString.call(d)==="[object Array]"){var Br;xt=ls(d),Gt!=="left"&&(Zr=xt.map(function(Ce){return Ye.getStringUnitWidth(Ce,{font:_l,charSpace:Qt,fontSize:Ct,doKerning:!1})*Ct/Ii}));var ti,en=0;if(Gt==="right"){L-=Zr[0],d=[],Ar=xt.length;for(var yi=0;yi<Ar;yi++)yi===0?(ti=Ei(L),Br=Ji(H)):(ti=T(en-Zr[yi]),Br=-gs),d.push([xt[yi],ti,Br]),en=Zr[yi]}else if(Gt==="center"){L-=Zr[0]/2,d=[],Ar=xt.length;for(var Ti=0;Ti<Ar;Ti++)Ti===0?(ti=Ei(L),Br=Ji(H)):(ti=T((en-Zr[Ti])/2),Br=-gs),d.push([xt[Ti],ti,Br]),en=Zr[Ti]}else if(Gt==="left"){d=[],Ar=xt.length;for(var _a=0;_a<Ar;_a++)d.push(xt[_a])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');d=[],Ar=xt.length,ee=ee!==0?ee:yl;for(var ei=0;ei<Ar;ei++)Br=ei===0?Ji(H):-gs,ti=ei===0?Ei(L):0,ei<Ar-1?tn.push(W(T((ee-Zr[ei])/(xt[ei].split(" ").length-1)))):tn.push(0),d.push([xt[ei],ti,Br])}}var wa=typeof K.R2L=="boolean"?K.R2L:jt;wa===!0&&(d=cs(d,function(Ce,Pe,Ue){return[Ce.split("").reverse().join(""),Pe,Ue]})),gt={text:d,x:L,y:H,options:K,mutex:{pdfEscape:xr,activeFontKey:ae,fonts:xe,activeFontSize:Ct}},ve.publish("postProcessText",gt),d=gt.text,Qr=gt.mutex.isHex||!1;var vs=xe[ae].encoding;vs!=="WinAnsiEncoding"&&vs!=="StandardEncoding"||(d=cs(d,function(Ce,Pe,Ue){return[ao(Ce),Pe,Ue]})),xt=ls(d),d=[];for(var rn,ri,Mi,Tn=0,Sa=1,Mn=Array.isArray(xt[0])?Sa:Tn,nn="",ms=function(Ce,Pe,Ue){var Qe="";return Ue instanceof zt?(Ue=typeof K.angle=="number"?Wr(Ue,new zt(1,0,0,1,Ce,Pe)):Wr(new zt(1,0,0,1,Ce,Pe),Ue),y===P.ADVANCED&&(Ue=Wr(new zt(1,0,0,-1,0,0),Ue)),Qe=Ue.join(" ")+` Tm
`):Qe=W(Ce)+" "+W(Pe)+` Td
`,Qe},jr=0;jr<xt.length;jr++){switch(nn="",Mn){case Sa:Mi=(Qr?"<":"(")+xt[jr][0]+(Qr?">":")"),rn=parseFloat(xt[jr][1]),ri=parseFloat(xt[jr][2]);break;case Tn:Mi=(Qr?"<":"(")+xt[jr]+(Qr?">":")"),rn=Ei(L),ri=Ji(H)}tn!==void 0&&tn[jr]!==void 0&&(nn=tn[jr]+` Tw
`),jr===0?d.push(nn+ms(rn,ri,Re)+Mi):Mn===Tn?d.push(nn+Mi):Mn===Sa&&d.push(nn+ms(rn,ri,Re)+Mi)}d=Mn===Tn?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var Oi=`BT
/`;return Oi+=ae+" "+Ct+` Tf
`,Oi+=W(Ct*Ir)+` TL
`,Oi+=En+`
`,Oi+=rr,Oi+=d,$(Oi+="ET"),m[ae]=!0,Ye};var ll=f.__private__.clip=f.clip=function(d){return $(d==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return ll("evenodd")},f.__private__.discardPath=f.discardPath=function(){return $("n"),this};var bi=f.__private__.isValidStyle=function(d){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(L=!0),L};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(d){return bi(d)&&(u=d),this};var Js=f.__private__.getStyle=f.getStyle=function(d){var L=u;switch(d){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=d}return L},Qs=f.close=function(){return $("h"),this};f.stroke=function(){return $("S"),this},f.fill=function(d){return ca("f",d),this},f.fillEvenOdd=function(d){return ca("f*",d),this},f.fillStroke=function(d){return ca("B",d),this},f.fillStrokeEvenOdd=function(d){return ca("B*",d),this};var ca=function(d,L){ye(L)==="object"?ul(L,d):$(d)},Za=function(d){d===null||y===P.ADVANCED&&d===void 0||(d=Js(d),$(d))};function cl(d,L,H,K,ht){var gt=new Oa(L||this.boundingBox,H||this.xStep,K||this.yStep,this.gState,ht||this.matrix);gt.stream=this.stream;var xt=d+"$$"+this.cloneIndex+++"$$";return Sr(xt,gt),gt}var ul=function(d,L){var H=Ln[d.key],K=ge[H];if(K instanceof jn)$("q"),$(fl(L)),K.gState&&f.setGState(K.gState),$(d.matrix.toString()+" cm"),$("/"+H+" sh"),$("Q");else if(K instanceof Oa){var ht=new zt(1,0,0,-1,0,Zi());d.matrix&&(ht=ht.multiply(d.matrix||gi),H=cl.call(K,d.key,d.boundingBox,d.xStep,d.yStep,ht).id),$("q"),$("/Pattern cs"),$("/"+H+" scn"),K.gState&&f.setGState(K.gState),$(L),$("Q")}},fl=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ts=f.moveTo=function(d,L){return $(W(T(d))+" "+W(U(L))+" m"),this},kn=f.lineTo=function(d,L){return $(W(T(d))+" "+W(U(L))+" l"),this},Ki=f.curveTo=function(d,L,H,K,ht,gt){return $([W(T(d)),W(U(L)),W(T(H)),W(U(K)),W(T(ht)),W(U(gt)),"c"].join(" ")),this};f.__private__.line=f.line=function(d,L,H,K,ht){if(isNaN(d)||isNaN(L)||isNaN(H)||isNaN(K)||!bi(ht))throw new Error("Invalid arguments passed to jsPDF.line");return y===P.COMPAT?this.lines([[H-d,K-L]],d,L,[1,1],ht||"S"):this.lines([[H-d,K-L]],d,L,[1,1]).stroke()},f.__private__.lines=f.lines=function(d,L,H,K,ht,gt){var xt,Tt,Gt,Qt,ee,he,Ie,Re,Ye,cr,rr,Qr;if(typeof d=="number"&&(Qr=H,H=L,L=d,d=Qr),K=K||[1,1],gt=gt||!1,isNaN(L)||isNaN(H)||!Array.isArray(d)||!Array.isArray(K)||!bi(ht)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ts(L,H),xt=K[0],Tt=K[1],Qt=d.length,cr=L,rr=H,Gt=0;Gt<Qt;Gt++)(ee=d[Gt]).length===2?(cr=ee[0]*xt+cr,rr=ee[1]*Tt+rr,kn(cr,rr)):(he=ee[0]*xt+cr,Ie=ee[1]*Tt+rr,Re=ee[2]*xt+cr,Ye=ee[3]*Tt+rr,cr=ee[4]*xt+cr,rr=ee[5]*Tt+rr,Ki(he,Ie,Re,Ye,cr,rr));return gt&&Qs(),Za(ht),this},f.path=function(d){for(var L=0;L<d.length;L++){var H=d[L],K=H.c;switch(H.op){case"m":ts(K[0],K[1]);break;case"l":kn(K[0],K[1]);break;case"c":Ki.apply(this,K);break;case"h":Qs()}}return this},f.__private__.rect=f.rect=function(d,L,H,K,ht){if(isNaN(d)||isNaN(L)||isNaN(H)||isNaN(K)||!bi(ht))throw new Error("Invalid arguments passed to jsPDF.rect");return y===P.COMPAT&&(K=-K),$([W(T(d)),W(U(L)),W(T(H)),W(T(K)),"re"].join(" ")),Za(ht),this},f.__private__.triangle=f.triangle=function(d,L,H,K,ht,gt,xt){if(isNaN(d)||isNaN(L)||isNaN(H)||isNaN(K)||isNaN(ht)||isNaN(gt)||!bi(xt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[H-d,K-L],[ht-H,gt-K],[d-ht,L-gt]],d,L,[1,1],xt,!0),this},f.__private__.roundedRect=f.roundedRect=function(d,L,H,K,ht,gt,xt){if(isNaN(d)||isNaN(L)||isNaN(H)||isNaN(K)||isNaN(ht)||isNaN(gt)||!bi(xt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Tt=4/3*(Math.SQRT2-1);return ht=Math.min(ht,.5*H),gt=Math.min(gt,.5*K),this.lines([[H-2*ht,0],[ht*Tt,0,ht,gt-gt*Tt,ht,gt],[0,K-2*gt],[0,gt*Tt,-ht*Tt,gt,-ht,gt],[2*ht-H,0],[-ht*Tt,0,-ht,-gt*Tt,-ht,-gt],[0,2*gt-K],[0,-gt*Tt,ht*Tt,-gt,ht,-gt]],d+ht,L,[1,1],xt,!0),this},f.__private__.ellipse=f.ellipse=function(d,L,H,K,ht){if(isNaN(d)||isNaN(L)||isNaN(H)||isNaN(K)||!bi(ht))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*H,xt=4/3*(Math.SQRT2-1)*K;return ts(d+H,L),Ki(d+H,L-xt,d+gt,L-K,d,L-K),Ki(d-gt,L-K,d-H,L-xt,d-H,L),Ki(d-H,L+xt,d-gt,L+K,d,L+K),Ki(d+gt,L+K,d+H,L+xt,d+H,L),Za(ht),this},f.__private__.circle=f.circle=function(d,L,H,K){if(isNaN(d)||isNaN(L)||isNaN(H)||!bi(K))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,L,H,H,K)},f.setFont=function(d,L,H){return H&&(L=z(L,H)),ae=Ys(d,L,{disableWarning:!1}),this};var dl=f.__private__.getFont=f.getFont=function(){return xe[Ys.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var d,L,H={};for(d in Fe)if(Fe.hasOwnProperty(d))for(L in H[d]=[],Fe[d])Fe[d].hasOwnProperty(L)&&H[d].push(L);return H},f.addFont=function(d,L,H,K,ht){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?ht=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(H=z(H,K)),ht=ht||"Identity-H",Ka.call(this,d,L,H,ht)};var Fn,es=a.lineWidth||.200025,ua=f.__private__.getLineWidth=f.getLineWidth=function(){return es},Zs=f.__private__.setLineWidth=f.setLineWidth=function(d){return es=d,$(W(T(d))+" w"),this};f.__private__.setLineDash=Vt.API.setLineDash=Vt.API.setLineDashPattern=function(d,L){if(d=d||[],L=L||0,isNaN(L)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function(H){return W(T(H))}).join(" "),L=W(T(L)),$("["+d+"] "+L+" d"),this};var to=f.__private__.getLineHeight=f.getLineHeight=function(){return Ct*Fn};f.__private__.getLineHeight=f.getLineHeight=function(){return Ct*Fn};var eo=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(Fn=d),this},ro=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Fn};eo(a.lineHeight);var Ei=f.__private__.getHorizontalCoordinate=function(d){return T(d)},Ji=f.__private__.getVerticalCoordinate=function(d){return y===P.ADVANCED?d:Kt[B].mediaBox.topRightY-Kt[B].mediaBox.bottomLeftY-T(d)},pl=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(d){return W(Ei(d))},Qi=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(d){return W(Ji(d))},Jr=a.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Yr(Jr)},f.__private__.setStrokeColor=f.setDrawColor=function(d,L,H,K){return Jr=Xr({ch1:d,ch2:L,ch3:H,ch4:K,pdfColorType:"draw",precision:2}),$(Jr),this};var rs=a.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Yr(rs)},f.__private__.setFillColor=f.setFillColor=function(d,L,H,K){return rs=Xr({ch1:d,ch2:L,ch3:H,ch4:K,pdfColorType:"fill",precision:2}),$(rs),this};var En=a.textColor||"0 g",gl=f.__private__.getTextColor=f.getTextColor=function(){return Yr(En)};f.__private__.setTextColor=f.setTextColor=function(d,L,H,K){return En=Xr({ch1:d,ch2:L,ch3:H,ch4:K,pdfColorType:"text",precision:3}),this};var fa=a.charSpace,vl=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(fa||0)};f.__private__.setCharSpace=f.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fa=d,this};var is=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(d){var L=f.CapJoinStyles[d];if(L===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return is=L,$(L+" J"),this};var ns=0;f.__private__.setLineJoin=f.setLineJoin=function(d){var L=f.CapJoinStyles[d];if(L===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ns=L,$(L+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(W(T(d))+" M"),this},f.GState=Vo,f.setGState=function(d){(d=typeof d=="string"?Me[Hr[d]]:io(null,d)).equals(Pi)||($("/"+d.id+" gs"),Pi=d)};var io=function(d,L){if(!d||!Hr[d]){var H=!1;for(var K in Me)if(Me.hasOwnProperty(K)&&Me[K].equals(L)){H=!0;break}if(H)L=Me[K];else{var ht="GS"+(Object.keys(Me).length+1).toString(10);Me[ht]=L,L.id=ht}return d&&(Hr[d]=L.id),ve.publish("addGState",L),L}};f.addGState=function(d,L){return io(d,L),this},f.saveGraphicsState=function(){return $("q"),fi.push({key:ae,size:Ct,color:En}),this},f.restoreGraphicsState=function(){$("Q");var d=fi.pop();return ae=d.key,Ct=d.size,En=d.color,Pi=null,this},f.setCurrentTransformationMatrix=function(d){return $(d.toString()+" cm"),this},f.comment=function(d){return $("#"+d),this};var da=function(d,L){var H=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return H},set:function(gt){isNaN(gt)||(H=parseFloat(gt))}});var K=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return K},set:function(gt){isNaN(gt)||(K=parseFloat(gt))}});var ht="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ht},set:function(gt){ht=gt.toString()}}),this},as=function(d,L,H,K){da.call(this,d,L),this.type="rect";var ht=H||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ht},set:function(xt){isNaN(xt)||(ht=parseFloat(xt))}});var gt=K||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(xt){isNaN(xt)||(gt=parseFloat(xt))}}),this},ss=function(){this.page=Oe,this.currentPage=B,this.pages=mt.slice(0),this.pagesContext=Kt.slice(0),this.x=hr,this.y=fe,this.matrix=Vr,this.width=In(B),this.height=Zi(B),this.outputDestination=Lt,this.id="",this.objectNumber=-1};ss.prototype.restore=function(){Oe=this.page,B=this.currentPage,Kt=this.pagesContext,mt=this.pages,hr=this.x,fe=this.y,Vr=this.matrix,os(B,this.width),hs(B,this.height),Lt=this.outputDestination};var no=function(d,L,H,K,ht){pi.push(new ss),Oe=B=0,mt=[],hr=d,fe=L,Vr=ht,Ja([H,K])},ml=function(d){if(di[d])pi.pop().restore();else{var L=new ss,H="Xo"+(Object.keys(sr).length+1).toString(10);L.id=H,di[d]=H,sr[H]=L,ve.publish("addFormObject",L),pi.pop().restore()}};for(var pa in f.beginFormObject=function(d,L,H,K,ht){return no(d,L,H,K,ht),this},f.endFormObject=function(d){return ml(d),this},f.doFormObject=function(d,L){var H=sr[di[d]];return $("q"),$(L.toString()+" cm"),$("/"+H.id+" Do"),$("Q"),this},f.getFormObject=function(d){var L=sr[di[d]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},f.save=function(d,L){return d=d||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(Bn(ha(Fi()),d),typeof Bn.unload=="function"&&Ht.setTimeout&&setTimeout(Bn.unload,911),this):new Promise(function(H,K){try{var ht=Bn(ha(Fi()),d);typeof Bn.unload=="function"&&Ht.setTimeout&&setTimeout(Bn.unload,911),H(ht)}catch(gt){K(gt.message)}})},Vt.API)Vt.API.hasOwnProperty(pa)&&(pa==="events"&&Vt.API.events.length?function(d,L){var H,K,ht;for(ht=L.length-1;ht!==-1;ht--)H=L[ht][0],K=L[ht][1],d.subscribe.apply(d,[H].concat(typeof K=="function"?[K]:K))}(ve,Vt.API.events):f[pa]=Vt.API[pa]);var In=f.getPageWidth=function(d){return(Kt[d=d||B].mediaBox.topRightX-Kt[d].mediaBox.bottomLeftX)/It},os=f.setPageWidth=function(d,L){Kt[d].mediaBox.topRightX=L*It+Kt[d].mediaBox.bottomLeftX},Zi=f.getPageHeight=function(d){return(Kt[d=d||B].mediaBox.topRightY-Kt[d].mediaBox.bottomLeftY)/It},hs=f.setPageHeight=function(d,L){Kt[d].mediaBox.topRightY=L*It+Kt[d].mediaBox.bottomLeftY};return f.internal={pdfEscape:xr,getStyle:Js,getFont:dl,getFontSize:Ft,getCharSpace:vl,getTextColor:gl,getLineHeight:to,getLineHeightFactor:ro,getLineWidth:ua,write:qt,getHorizontalCoordinate:Ei,getVerticalCoordinate:Ji,getCoordinateString:pl,getVerticalCoordinateString:Qi,collections:{},newObject:Je,newAdditionalObject:ta,newObjectDeferred:$e,newObjectDeferredBegin:Er,getFilters:vi,putStream:Dr,events:ve,scaleFactor:It,pageSize:{getWidth:function(){return In(B)},setWidth:function(d){os(B,d)},getHeight:function(){return Zi(B)},setHeight:function(d){hs(B,d)}},encryptionOptions:p,encryption:lr,getEncryptor:ol,output:la,getNumberOfPages:rl,pages:mt,out:$,f2:q,f3:A,getPageInfo:Ks,getPageInfoByObjId:Yt,getCurrentPageInfo:hl,getPDFVersion:w,Point:da,Rectangle:as,Matrix:zt,hasHotfix:Xs},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return In(B)},set:function(d){os(B,d)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Zi(B)},set:function(d){hs(B,d)},enumerable:!0,configurable:!0}),tl.call(f,Nt),ae="F1",Ws(i,e),ve.publish("initialized"),f}Ta.prototype.lsbFirstWord=function(a){return String.fromCharCode(a>>0&255,a>>8&255,a>>16&255,a>>24&255)},Ta.prototype.toHexString=function(a){return a.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ta.prototype.hexToBytes=function(a){for(var t=[],e=0;e<a.length;e+=2)t.push(String.fromCharCode(parseInt(a.substr(e,2),16)));return t.join("")},Ta.prototype.processOwnerPassword=function(a,t){return b1(m1(t).substr(0,5),a)},Ta.prototype.encryptor=function(a,t){var e=m1(this.encryptionKey+String.fromCharCode(255&a,a>>8&255,a>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return b1(e,r)}},Vo.prototype.equals=function(a){var t,e="id,objectNumber,equals";if(!a||ye(a)!==ye(this))return!1;var r=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!a.hasOwnProperty(t)||this[t]!==a[t])return!1;r++}for(t in a)a.hasOwnProperty(t)&&e.indexOf(t)<0&&r--;return r===0},Vt.API={events:[]},Vt.version="2.5.1";var Be=Vt.API,E1=1,Hn=function(a){return a.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pa=function(a){return a.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(a){return a.toFixed(2)},pn=function(a){return a.toFixed(5)};Be.__acroform__={};var Fr=function(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a},O0=function(a){return a*E1},wi=function(a){var t=new Hc,e=Rt.internal.getHeight(a)||0,r=Rt.internal.getWidth(a)||0;return t.BBox=[0,0,Number(Jt(r)),Number(Jt(e))],t},qu=Be.__acroform__.setBit=function(a,t){if(a=a||0,t=t||0,isNaN(a)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return a|=1<<t},Uu=Be.__acroform__.clearBit=function(a,t){if(a=a||0,t=t||0,isNaN(a)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return a&=~(1<<t)},zu=Be.__acroform__.getBit=function(a,t){if(isNaN(a)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return a&1<<t?1:0},ze=Be.__acroform__.getBitForPdf=function(a,t){if(isNaN(a)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zu(a,t-1)},Ve=Be.__acroform__.setBitForPdf=function(a,t){if(isNaN(a)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qu(a,t-1)},He=Be.__acroform__.clearBitForPdf=function(a,t){if(isNaN(a)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uu(a,t-1)},Vu=Be.__acroform__.calculateCoordinates=function(a,t){var e=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=a[0],n=a[1],o=a[2],h=a[3],l={};return l.lowerLeft_X=e(i)||0,l.lowerLeft_Y=r(n+h)||0,l.upperRight_X=e(i+o)||0,l.upperRight_Y=r(n)||0,[Number(Jt(l.lowerLeft_X)),Number(Jt(l.lowerLeft_Y)),Number(Jt(l.upperRight_X)),Number(Jt(l.upperRight_Y))]},Hu=function(a){if(a.appearanceStreamContent)return a.appearanceStreamContent;if(a.V||a.DV){var t=[],e=a._V||a.DV,r=y1(a,e),i=a.scope.internal.getFont(a.fontName,a.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(a.scope.__private__.encodeColorString(a.color)),t.push("/"+i+" "+Jt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var n=wi(a);return n.scope=a.scope,n.stream=t.join(`
`),n}},y1=function(a,t){var e=a.fontSize===0?a.maxFontSize:a.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=a.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var n=e,o=Rt.internal.getHeight(a)||0;o=o<0?-o:o;var h=Rt.internal.getWidth(a)||0;h=h<0?-h:h;var l=function(A,T,G){if(A+1<i.length){var U=T+" "+i[A+1][0];return ko(U,a,G).width<=h-4}return!1};n++;t:for(;n>0;){t="",n--;var u,p,v=ko("3",a,n).height,m=a.multiline?o-n:(o-v)/2,f=m+=2,b=0,w=0,x=0;if(n<=0){t=`(...) Tj
`,t+="% Width of Text: "+ko(t,a,n=12).width+", FieldWidth:"+h+`
`;break}for(var S="",P=0,y=0;y<i.length;y++)if(i.hasOwnProperty(y)){var k=!1;if(i[y].length!==1&&x!==i[y].length-1){if((v+2)*(P+2)+2>o)continue t;S+=i[y][x],k=!0,w=y,y--}else{S=(S+=i[y][x]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var R=parseInt(y),z=l(R,S,n),W=y>=i.length-1;if(z&&!W){S+=" ",x=0;continue}if(z||W){if(W)w=R;else if(a.multiline&&(v+2)*(P+2)+2>o)continue t}else{if(!a.multiline||(v+2)*(P+2)+2>o)continue t;w=R}}for(var C="",X=b;X<=w;X++){var q=i[X];if(a.multiline){if(X===w){C+=q[x]+" ",x=(x+1)%q.length;continue}if(X===b){C+=q[q.length-1]+" ";continue}}C+=q[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,p=ko(C,a,n).width,a.textAlign){case"right":u=h-p-2;break;case"center":u=(h-p)/2;break;case"left":default:u=2}t+=Jt(u)+" "+Jt(f)+` Td
`,t+="("+Hn(C)+`) Tj
`,t+=-Jt(u)+` 0 Td
`,f=-(n+2),p=0,b=k?w:w+1,P++,S=""}break}return r.text=t,r.fontSize=n,r},ko=function(a,t,e){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(a,{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},Wu={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$u=function(a,t){var e={type:"reference",object:a};t.internal.getPageInfo(a.page).pageContext.annotations.find(function(r){return r.type===e.type&&r.object===e.object})===void 0&&t.internal.getPageInfo(a.page).pageContext.annotations.push(e)},Yu=function(a,t){for(var e in a)if(a.hasOwnProperty(e)){var r=e,i=a[e];t.internal.newObjectDeferredBegin(i.objId,!0),ye(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete a[r]}},Xu=function(a,t){if(t.scope=a,a.internal!==void 0&&(a.internal.acroformPlugin===void 0||a.internal.acroformPlugin.isInitialized===!1)){if(li.FieldNum=0,a.internal.acroformPlugin=JSON.parse(JSON.stringify(Wu)),a.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");E1=a.internal.scaleFactor,a.internal.acroformPlugin.acroFormDictionaryRoot=new Wc,a.internal.acroformPlugin.acroFormDictionaryRoot.scope=a,a.internal.acroformPlugin.acroFormDictionaryRoot._eventID=a.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(a)}),a.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var n=r[i];n.objId=void 0,n.hasAnnotation&&$u(n,e)}})(a)}),a.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(a)}),a.internal.events.subscribe("postPutPages",function(e){(function(r,i){var n=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var h=r[o],l=[],u=h.Rect;if(h.Rect&&(h.Rect=Vu(h.Rect,i)),i.internal.newObjectDeferredBegin(h.objId,!0),h.DA=Rt.createDefaultAppearanceStream(h),ye(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(l=h.getKeyValueListForStream()),h.Rect=u,h.hasAppearanceStream&&!h.appearanceStreamContent){var p=Hu(h);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(h.appearanceStreamContent){var v="";for(var m in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(m)){var f=h.appearanceStreamContent[m];if(v+="/"+m+" ",v+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var b=f[o];typeof b=="function"&&(b=b.call(i,h)),v+="/"+o+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=f)=="function"&&(b=b.call(i,h)),v+="/"+o+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);v+=">>"}l.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:h.objId}),i.internal.out("endobj")}n&&Yu(i.internal.acroformPlugin.xForms,i)})(e,a)}),a.internal.acroformPlugin.isInitialized=!0}},Vc=Be.__acroform__.arrayToPdfArray=function(a,t,e){var r=function(o){return o};if(Array.isArray(a)){for(var i="[",n=0;n<a.length;n++)switch(n!==0&&(i+=" "),ye(a[n])){case"boolean":case"number":case"object":i+=a[n].toString();break;case"string":a[n].substr(0,1)!=="/"?(t!==void 0&&e&&(r=e.internal.getEncryptor(t)),i+="("+Hn(r(a[n].toString()))+")"):i+=a[n].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Kl=function(a,t,e){var r=function(i){return i};return t!==void 0&&e&&(r=e.internal.getEncryptor(t)),(a=a||"").toString(),a="("+Hn(r(a))+")"},xi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(a){this._objId=a}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xi.prototype.toString=function(){return this.objId+" 0 R"},xi.prototype.putStream=function(){var a=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:a,objectId:this.objId}),this.scope.internal.out("endobj")},xi.prototype.getKeyValueListForStream=function(){var a=[],t=Object.getOwnPropertyNames(this).filter(function(n){return n!="content"&&n!="appearanceStreamContent"&&n!="scope"&&n!="objId"&&n.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var r=t[e],i=this[r];i&&(Array.isArray(i)?a.push({key:r,value:Vc(i,this.objId,this.scope)}):i instanceof xi?(i.scope=this.scope,a.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&a.push({key:r,value:i}))}return a};var Hc=function(){xi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var a,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){a=e.trim()},get:function(){return a||null}})};Fr(Hc,xi);var Wc=function(){xi.call(this);var a,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(a){var e=function(r){return r};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Hn(e(a))+")"}},set:function(e){a=e}})};Fr(Wc,xi);var li=function a(){xi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ze(t,3)},set:function(S){S?this.F=Ve(t,3):this.F=He(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');e=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var n=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!n||n.length<1){if(this instanceof Ho)return;n="FieldObject"+a.FieldNum++}var S=function(P){return P};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Hn(S(n))+")"},set:function(S){n=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return n},set:function(S){n=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/E1:u},set:function(S){u=S}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(S){p=S}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Ho||this instanceof Un))return Kl(v,this.objId,this.scope)},set:function(S){S=S.toString(),v=S}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ar?m:Kl(m,this.objId,this.scope)},set:function(S){S=S.toString(),m=this instanceof ar?S:S.substr(0,1)==="("?Pa(S.substr(1,S.length-2)):Pa(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ar?Pa(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof ar?"/"+S:S}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ar?f:Kl(f,this.objId,this.scope)},set:function(S){S=S.toString(),f=this instanceof ar?S:S.substr(0,1)==="("?Pa(S.substr(1,S.length-2)):Pa(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ar?Pa(f.substr(1,f.length-1)):f},set:function(S){S=S.toString(),f=this instanceof ar?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(S){b=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,1)},set:function(S){S?this.Ff=Ve(this.Ff,1):this.Ff=He(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,2)},set:function(S){S?this.Ff=Ve(this.Ff,2):this.Ff=He(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,3)},set:function(S){S?this.Ff=Ve(this.Ff,3):this.Ff=He(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');x=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(x){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};Fr(li,xi);var Ra=function(){li.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var a=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vc(t,this.objId,this.scope)},set:function(e){var r,i;i=[],typeof(r=e)=="string"&&(i=function(n,o,h){h||(h=1);for(var l,u=[];l=o.exec(n);)u.push(l[h]);return u}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,18)},set:function(e){e?this.Ff=Ve(this.Ff,18):this.Ff=He(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Ve(this.Ff,19):this.Ff=He(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,20)},set:function(e){e?(this.Ff=Ve(this.Ff,20),t.sort()):this.Ff=He(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,22)},set:function(e){e?this.Ff=Ve(this.Ff,22):this.Ff=He(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,23)},set:function(e){e?this.Ff=Ve(this.Ff,23):this.Ff=He(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,27)},set:function(e){e?this.Ff=Ve(this.Ff,27):this.Ff=He(this.Ff,27)}}),this.hasAppearanceStream=!1};Fr(Ra,li);var Da=function(){Ra.call(this),this.fontName="helvetica",this.combo=!1};Fr(Da,Ra);var Ba=function(){Da.call(this),this.combo=!0};Fr(Ba,Da);var Bo=function(){Ba.call(this),this.edit=!0};Fr(Bo,Ba);var ar=function(){li.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,15)},set:function(e){e?this.Ff=Ve(this.Ff,15):this.Ff=He(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,16)},set:function(e){e?this.Ff=Ve(this.Ff,16):this.Ff=He(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,17)},set:function(e){e?this.Ff=Ve(this.Ff,17):this.Ff=He(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,26)},set:function(e){e?this.Ff=Ve(this.Ff,26):this.Ff=He(this.Ff,26)}});var a,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(n){return n};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Hn(e(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){ye(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(e){a="/"+e}})};Fr(ar,li);var jo=function(){ar.call(this),this.pushButton=!0};Fr(jo,ar);var ja=function(){ar.call(this),this.radio=!0,this.pushButton=!1;var a=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return a},set:function(t){a=t!==void 0?t:[]}})};Fr(ja,ar);var Ho=function(){var a,t;li.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return a},set:function(i){a=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(h){return h};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var n,o=[];for(n in o.push("<<"),r)o.push("/"+n+" ("+Hn(i(r[n]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ye(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fr(Ho,li),ja.prototype.setAppearance=function(a){if(!("createAppearanceStream"in a)||!("getCA"in a))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=a.createAppearanceStream(e.optionName),e.caption=a.getCA()}},ja.prototype.createOption=function(a){var t=new Ho;return t.Parent=this,t.optionName=a,this.Kids.push(t),Ku.call(this.scope,t),t};var Go=function(){ar.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};Fr(Go,ar);var Un=function(){li.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,13)},set:function(t){t?this.Ff=Ve(this.Ff,13):this.Ff=He(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,21)},set:function(t){t?this.Ff=Ve(this.Ff,21):this.Ff=He(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,23)},set:function(t){t?this.Ff=Ve(this.Ff,23):this.Ff=He(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,24)},set:function(t){t?this.Ff=Ve(this.Ff,24):this.Ff=He(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,25)},set:function(t){t?this.Ff=Ve(this.Ff,25):this.Ff=He(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,26)},set:function(t){t?this.Ff=Ve(this.Ff,26):this.Ff=He(this.Ff,26)}});var a=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return a},set:function(t){a=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){Number.isInteger(t)&&(a=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fr(Un,li);var qo=function(){Un.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ze(this.Ff,14)},set:function(a){a?this.Ff=Ve(this.Ff,14):this.Ff=He(this.Ff,14)}}),this.password=!0};Fr(qo,Un);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(a){var t=wi(a);t.scope=a.scope;var e=[],r=a.scope.internal.getFont(a.fontName,a.fontStyle).id,i=a.scope.__private__.encodeColorString(a.color),n=y1(a,a.caption);return e.push("0.749023 g"),e.push("0 0 "+Jt(Rt.internal.getWidth(a))+" "+Jt(Rt.internal.getHeight(a))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+r+" "+Jt(n.fontSize)+" Tf "+i),e.push("BT"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(a){var t=wi(a);t.scope=a.scope;var e=a.scope.internal.getFont(a.fontName,a.fontStyle).id,r=a.scope.__private__.encodeColorString(a.color),i=[],n=Rt.internal.getHeight(a),o=Rt.internal.getWidth(a),h=y1(a,a.caption);return i.push("1 g"),i.push("0 0 "+Jt(o)+" "+Jt(n)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Jt(o-1)+" "+Jt(n-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+Jt(h.fontSize)+" Tf "+r),i.push(h.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(a){var t=wi(a);t.scope=a.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Jt(Rt.internal.getWidth(a))+" "+Jt(Rt.internal.getHeight(a))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(a){var t={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return t.N[a]=Rt.RadioButton.Circle.YesNormal,t.D[a]=Rt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(a){var t=wi(a);t.scope=a.scope;var e=[],r=Rt.internal.getWidth(a)<=Rt.internal.getHeight(a)?Rt.internal.getWidth(a)/4:Rt.internal.getHeight(a)/4;r=Number((.9*r).toFixed(5));var i=Rt.internal.Bezier_C,n=Number((r*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+pn(Rt.internal.getWidth(a)/2)+" "+pn(Rt.internal.getHeight(a)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+n+" "+n+" "+r+" 0 "+r+" c"),e.push("-"+n+" "+r+" -"+r+" "+n+" -"+r+" 0 c"),e.push("-"+r+" -"+n+" -"+n+" -"+r+" 0 -"+r+" c"),e.push(n+" -"+r+" "+r+" -"+n+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(a){var t=wi(a);t.scope=a.scope;var e=[],r=Rt.internal.getWidth(a)<=Rt.internal.getHeight(a)?Rt.internal.getWidth(a)/4:Rt.internal.getHeight(a)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),n=Number((i*Rt.internal.Bezier_C).toFixed(5)),o=Number((r*Rt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+pn(Rt.internal.getWidth(a)/2)+" "+pn(Rt.internal.getHeight(a)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+n+" "+n+" "+i+" 0 "+i+" c"),e.push("-"+n+" "+i+" -"+i+" "+n+" -"+i+" 0 c"),e.push("-"+i+" -"+n+" -"+n+" -"+i+" 0 -"+i+" c"),e.push(n+" -"+i+" "+i+" -"+n+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+pn(Rt.internal.getWidth(a)/2)+" "+pn(Rt.internal.getHeight(a)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),e.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),e.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),e.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(a){var t=wi(a);t.scope=a.scope;var e=[],r=Rt.internal.getWidth(a)<=Rt.internal.getHeight(a)?Rt.internal.getWidth(a)/4:Rt.internal.getHeight(a)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),n=Number((i*Rt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+pn(Rt.internal.getWidth(a)/2)+" "+pn(Rt.internal.getHeight(a)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+n+" "+n+" "+i+" 0 "+i+" c"),e.push("-"+n+" "+i+" -"+i+" "+n+" -"+i+" 0 c"),e.push("-"+i+" -"+n+" -"+n+" -"+i+" 0 -"+i+" c"),e.push(n+" -"+i+" "+i+" -"+n+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(a){var t={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return t.N[a]=Rt.RadioButton.Cross.YesNormal,t.D[a]=Rt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(a){var t=wi(a);t.scope=a.scope;var e=[],r=Rt.internal.calculateCross(a);return e.push("q"),e.push("1 1 "+Jt(Rt.internal.getWidth(a)-2)+" "+Jt(Rt.internal.getHeight(a)-2)+" re"),e.push("W"),e.push("n"),e.push(Jt(r.x1.x)+" "+Jt(r.x1.y)+" m"),e.push(Jt(r.x2.x)+" "+Jt(r.x2.y)+" l"),e.push(Jt(r.x4.x)+" "+Jt(r.x4.y)+" m"),e.push(Jt(r.x3.x)+" "+Jt(r.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(a){var t=wi(a);t.scope=a.scope;var e=Rt.internal.calculateCross(a),r=[];return r.push("0.749023 g"),r.push("0 0 "+Jt(Rt.internal.getWidth(a))+" "+Jt(Rt.internal.getHeight(a))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Jt(Rt.internal.getWidth(a)-2)+" "+Jt(Rt.internal.getHeight(a)-2)+" re"),r.push("W"),r.push("n"),r.push(Jt(e.x1.x)+" "+Jt(e.x1.y)+" m"),r.push(Jt(e.x2.x)+" "+Jt(e.x2.y)+" l"),r.push(Jt(e.x4.x)+" "+Jt(e.x4.y)+" m"),r.push(Jt(e.x3.x)+" "+Jt(e.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(a){var t=wi(a);t.scope=a.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Jt(Rt.internal.getWidth(a))+" "+Jt(Rt.internal.getHeight(a))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(a){var t=a.scope.internal.getFont(a.fontName,a.fontStyle).id,e=a.scope.__private__.encodeColorString(a.color);return"/"+t+" "+a.fontSize+" Tf "+e}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(a){var t=Rt.internal.getWidth(a),e=Rt.internal.getHeight(a),r=Math.min(t,e);return{x1:{x:(t-r)/2,y:(e-r)/2+r},x2:{x:(t-r)/2+r,y:(e-r)/2},x3:{x:(t-r)/2,y:(e-r)/2},x4:{x:(t-r)/2+r,y:(e-r)/2+r}}}},Rt.internal.getWidth=function(a){var t=0;return ye(a)==="object"&&(t=O0(a.Rect[2])),t},Rt.internal.getHeight=function(a){var t=0;return ye(a)==="object"&&(t=O0(a.Rect[3])),t};var Ku=Be.addField=function(a){if(Xu(this,a),!(a instanceof li))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=a).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),a.page=a.scope.internal.getCurrentPageInfo().pageNumber,this};Be.AcroFormChoiceField=Ra,Be.AcroFormListBox=Da,Be.AcroFormComboBox=Ba,Be.AcroFormEditBox=Bo,Be.AcroFormButton=ar,Be.AcroFormPushButton=jo,Be.AcroFormRadioButton=ja,Be.AcroFormCheckBox=Go,Be.AcroFormTextField=Un,Be.AcroFormPasswordField=qo,Be.AcroFormAppearance=Rt,Be.AcroForm={ChoiceField:Ra,ListBox:Da,ComboBox:Ba,EditBox:Bo,Button:ar,PushButton:jo,RadioButton:ja,CheckBox:Go,TextField:Un,PasswordField:qo,Appearance:Rt},Vt.AcroForm={ChoiceField:Ra,ListBox:Da,ComboBox:Ba,EditBox:Bo,Button:ar,PushButton:jo,RadioButton:ja,CheckBox:Go,TextField:Un,PasswordField:qo,Appearance:Rt};function $c(a){return a.reduce(function(t,e,r){return t[e]=r,t},{})}(function(a){a.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=a.__addimage__.getImageFileTypeByImageData=function(A,T){var G,U,et,st,lt,nt=t;if((T=T||t)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(z(A))for(lt in e)for(et=e[lt],G=0;G<et.length;G+=1){for(st=!0,U=0;U<et[G].length;U+=1)if(et[G][U]!==void 0&&et[G][U]!==A[U]){st=!1;break}if(st===!0){nt=lt;break}}else for(lt in e)for(et=e[lt],G=0;G<et.length;G+=1){for(st=!0,U=0;U<et[G].length;U+=1)if(et[G][U]!==void 0&&et[G][U]!==A.charCodeAt(U)){st=!1;break}if(st===!0){nt=lt;break}}return nt===t&&T!==t&&(nt=T),nt},i=function A(T){for(var G=this.internal.write,U=this.internal.putStream,et=(0,this.internal.getFilters)();et.indexOf("FlateEncode")!==-1;)et.splice(et.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var st=[];if(st.push({key:"Type",value:"/XObject"}),st.push({key:"Subtype",value:"/Image"}),st.push({key:"Width",value:T.width}),st.push({key:"Height",value:T.height}),T.colorSpace===x.INDEXED?st.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(st.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===x.DEVICE_CMYK&&st.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),st.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&st.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var lt="",nt=0,dt=T.transparency.length;nt<dt;nt++)lt+=T.transparency[nt]+" "+T.transparency[nt]+" ";st.push({key:"Mask",value:"["+lt+"]"})}T.sMask!==void 0&&st.push({key:"SMask",value:T.objectId+1+" 0 R"});var ot=T.filter!==void 0?["/"+T.filter]:void 0;if(U({data:T.data,additionalKeyValues:st,alreadyAppliedFilters:ot,objectId:T.objectId}),G("endobj"),"sMask"in T&&T.sMask!==void 0){var vt="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,F={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:vt,data:T.sMask};"filter"in T&&(F.filter=T.filter),A.call(this,F)}if(T.colorSpace===x.INDEXED){var B=this.internal.newObject();U({data:C(new Uint8Array(T.palette)),objectId:B}),G("endobj")}},n=function(){var A=this.internal.collections.addImage_images;for(var T in A)i.call(this,A[T])},o=function(){var A,T=this.internal.collections.addImage_images,G=this.internal.write;for(var U in T)G("/I"+(A=T[U]).index,A.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",n),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var A=this.internal.collections.addImage_images;return h.call(this),A},u=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(A){return typeof a["process"+A.toUpperCase()]=="function"},v=function(A){return ye(A)==="object"&&A.nodeType===1},m=function(A,T){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var G=""+A.getAttribute("src");if(G.indexOf("data:image/")===0)return Fs(unescape(G).split("base64,").pop());var U=a.loadFile(G,!0);if(U!==void 0)return U}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var et;switch(T){case"PNG":et="image/png";break;case"WEBP":et="image/webp";break;case"JPEG":case"JPG":default:et="image/jpeg"}return Fs(A.toDataURL(et,1).split("base64,").pop())}},f=function(A){var T=this.internal.collections.addImage_images;if(T){for(var G in T)if(A===T[G].alias)return T[G]}},b=function(A,T,G){return A||T||(A=-96,T=-96),A<0&&(A=-1*G.width*72/A/this.internal.scaleFactor),T<0&&(T=-1*G.height*72/T/this.internal.scaleFactor),A===0&&(A=T*G.width/G.height),T===0&&(T=A*G.height/G.width),[A,T]},w=function(A,T,G,U,et,st){var lt=b.call(this,G,U,et),nt=this.internal.getCoordinateString,dt=this.internal.getVerticalCoordinateString,ot=l.call(this);if(G=lt[0],U=lt[1],ot[et.index]=et,st){st*=Math.PI/180;var vt=Math.cos(st),F=Math.sin(st),B=function(J){return J.toFixed(4)},V=[B(vt),B(F),B(-1*F),B(vt),0,0,"cm"]}this.internal.write("q"),st?(this.internal.write([1,"0","0",1,nt(A),dt(T+U),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([nt(G),"0","0",nt(U),"0","0","cm"].join(" "))):this.internal.write([nt(G),"0","0",nt(U),nt(A),dt(T+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+et.index+" Do"),this.internal.write("Q")},x=a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=a.__addimage__.sHashCode=function(A){var T,G,U=0;if(typeof A=="string")for(G=A.length,T=0;T<G;T++)U=(U<<5)-U+A.charCodeAt(T),U|=0;else if(z(A))for(G=A.byteLength/2,T=0;T<G;T++)U=(U<<5)-U+A[T],U|=0;return U},y=a.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var T=!0;return A.length===0&&(T=!1),A.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(T=!1),T},k=a.__addimage__.extractImageFromDataUrl=function(A){var T=(A=A||"").split("base64,"),G=null;if(T.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(U)&&(G={mimeType:U[1],charset:U[2],data:T[1]})}return G},R=a.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};a.__addimage__.isArrayBuffer=function(A){return R()&&A instanceof ArrayBuffer};var z=a.__addimage__.isArrayBufferView=function(A){return R()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},W=a.__addimage__.binaryStringToUint8Array=function(A){for(var T=A.length,G=new Uint8Array(T),U=0;U<T;U++)G[U]=A.charCodeAt(U);return G},C=a.__addimage__.arrayBufferToBinaryString=function(A){for(var T="",G=z(A)?A:new Uint8Array(A),U=0;U<G.length;U+=8192)T+=String.fromCharCode.apply(null,G.subarray(U,U+8192));return T};a.addImage=function(){var A,T,G,U,et,st,lt,nt,dt;if(typeof arguments[1]=="number"?(T=t,G=arguments[1],U=arguments[2],et=arguments[3],st=arguments[4],lt=arguments[5],nt=arguments[6],dt=arguments[7]):(T=arguments[1],G=arguments[2],U=arguments[3],et=arguments[4],st=arguments[5],lt=arguments[6],nt=arguments[7],dt=arguments[8]),ye(A=arguments[0])==="object"&&!v(A)&&"imageData"in A){var ot=A;A=ot.imageData,T=ot.format||T||t,G=ot.x||G||0,U=ot.y||U||0,et=ot.w||ot.width||et,st=ot.h||ot.height||st,lt=ot.alias||lt,nt=ot.compression||nt,dt=ot.rotation||ot.angle||dt}var vt=this.internal.getFilters();if(nt===void 0&&vt.indexOf("FlateEncode")!==-1&&(nt="SLOW"),isNaN(G)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var F=X.call(this,A,T,lt,nt);return w.call(this,G,U,et,st,F,dt),this};var X=function(A,T,G,U){var et,st,lt;if(typeof A=="string"&&r(A)===t){A=unescape(A);var nt=q(A,!1);(nt!==""||(nt=a.loadFile(A,!0))!==void 0)&&(A=nt)}if(v(A)&&(A=m(A,T)),T=r(A,T),!p(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((lt=G)==null||lt.length===0)&&(G=function(dt){return typeof dt=="string"||z(dt)?P(dt):z(dt.data)?P(dt.data):null}(A)),(et=f.call(this,G))||(R()&&(A instanceof Uint8Array||T==="RGBA"||(st=A,A=W(A))),et=this["process"+T.toUpperCase()](A,u.call(this),G,function(dt){return dt&&typeof dt=="string"&&(dt=dt.toUpperCase()),dt in a.image_compression?dt:S.NONE}(U),st)),!et)throw new Error("An unknown error occurred whilst processing the image.");return et},q=a.__addimage__.convertBase64ToBinaryString=function(A,T){var G;T=typeof T!="boolean"||T;var U,et="";if(typeof A=="string"){U=(G=k(A))!==null?G.data:A;try{et=Fs(U)}catch(st){if(T)throw y(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+st.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};a.getImageProperties=function(A){var T,G,U="";if(v(A)&&(A=m(A)),typeof A=="string"&&r(A)===t&&((U=q(A,!1))===""&&(U=a.loadFile(A)||""),A=U),G=r(A),!p(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!R()||A instanceof Uint8Array||(A=W(A)),!(T=this["process"+G.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=G,T}})(Vt.API),function(a){var t=function(e){if(e!==void 0&&e!="")return!0};Vt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),a.events.push(["putPage",function(e){for(var r,i,n,o=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),u=e.pageContext.annotations,p=!1,v=0;v<u.length&&!p;v++)switch((r=u[v]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var f=this.internal.pdfEscape,b=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),P=r.title||"Note";n="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+h(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+h(r.bounds.y)+"] ")+"/Contents ("+f(S(r.contents))+")",n+=" /Popup "+x.objId+" 0 R",n+=" /P "+l.objId+" 0 R",n+=" /T ("+f(S(P))+") >>",w.content=n;var y=w.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+h(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+h(r.bounds.y)+"] ")+" /Parent "+y,r.open&&(n+=" /Open true"),n+=" >>",x.content=n,this.internal.write(w.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+h(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+h(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(b(r.contents))+")",n+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",n+=" /Border [0 0 0]",n+=" >>",this.internal.write(n);break;case"link":if(r.options.name){var R=this.annotations._nameMap[r.options.name];r.options.pageNumber=R.page,r.options.top=R.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",n="",r.options.url)n="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,n+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var z=h(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),n+=" /XYZ "+r.options.left+" "+z+" "+r.options.zoom+"]"}n!=""&&(n+=" >>",this.internal.write(n))}}this.internal.write("]")}}]),a.createAnnotation=function(e){var r=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":r.pageContext.annotations.push(e)}},a.link=function(e,r,i,n,o){var h=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:l(e),y:u(r),w:l(e+i),h:u(r+n)},options:o,type:"link"})},a.textWithLink=function(e,r,i,n){var o,h,l=this.getTextWidth(e),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(n.maxWidth!==void 0){h=n.maxWidth;var p=this.splitTextToSize(e,h).length;o=Math.ceil(u*p)}else h=l,o=u;return this.text(e,r,i,n),i+=.2*u,n.align==="center"&&(r-=l/2),n.align==="right"&&(r-=l),this.link(r,i-u,h,o,n),l},a.getTextWidth=function(e){var r=this.internal.getFontSize();return this.getStringUnitWidth(e)*r/this.internal.scaleFactor}}(Vt.API),function(a){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];a.__arabicParser__={};var n=a.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},o=a.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},h=a.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&n(w)&&t[w.charCodeAt(0)].length<=2},l=a.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};a.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&n(w)&&t[w.charCodeAt(0)].length>=1};var u=a.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&n(w)&&t[w.charCodeAt(0)].length>=2};a.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&n(w)&&t[w.charCodeAt(0)].length>=3};var p=a.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&n(w)&&t[w.charCodeAt(0)].length==4},v=a.__arabicParser__.resolveLigatures=function(w){var x=0,S=e,P="",y=0;for(x=0;x<w.length;x+=1)S[w.charCodeAt(x)]!==void 0?(y++,typeof(S=S[w.charCodeAt(x)])=="number"&&(P+=String.fromCharCode(S),S=e,y=0),x===w.length-1&&(S=e,P+=w.charAt(x-(y-1)),x-=y-1,y=0)):(S=e,P+=w.charAt(x-y),x-=y,y=0);return P};a.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var m=a.__arabicParser__.getCorrectForm=function(w,x,S){return o(w)?n(w)===!1?-1:!u(w)||!o(x)&&!o(S)||!o(S)&&h(x)||h(w)&&!o(x)||h(w)&&l(x)||h(w)&&h(x)?0:p(w)&&o(x)&&!h(x)&&o(S)&&u(S)?3:h(w)||!o(S)?1:2:-1},f=function(w){var x=0,S=0,P=0,y="",k="",R="",z=(w=w||"").split("\\s+"),W=[];for(x=0;x<z.length;x+=1){for(W.push(""),S=0;S<z[x].length;S+=1)y=z[x][S],k=z[x][S-1],R=z[x][S+1],o(y)?(P=m(y,k,R),W[x]+=P!==-1?String.fromCharCode(t[y.charCodeAt(0)][P]):y):W[x]+=y;W[x]=v(W[x])}return W.join(" ")},b=a.__arabicParser__.processArabic=a.processArabic=function(){var w,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(x)){var P=0;for(S=[],P=0;P<x.length;P+=1)Array.isArray(x[P])?S.push([f(x[P][0]),x[P][1],x[P][2]]):S.push([f(x[P])]);w=S}else w=f(x);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};a.events.push(["preProcessText",b])}(Vt.API),Vt.API.autoPrint=function(a){var t;switch((a=a||{}).variant=a.variant||"non-conform",a.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(a){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(h){e=h}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(h){r=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(h){i=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(h){n=h}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(h){o=h}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,r){var i;if((e=e||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},a.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Vt.API),function(a){var t={left:0,top:0,bottom:0,right:0},e=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new n,this.internal.__cell__.pages=1},n=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},n.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},a.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},a.getTextDimensions=function(l,u){r.call(this);var p=(u=u||{}).fontSize||this.getFontSize(),v=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,f=0,b=0,w=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=u.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(y,k){return y.concat(x.splitTextToSize(k,S))},[])):l=Array.isArray(l)?l:[l];for(var P=0;P<l.length;P++)f<(w=this.getStringUnitWidth(l[P],{font:v})*p)&&(f=w);return f!==0&&(b=l.length),{w:f/=m,h:Math.max((b*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/m,0)}},a.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new n(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=a.cell=function(){var l;l=arguments[0]instanceof n?arguments[0]:new n(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=v.top,f&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};a.table=function(l,u,p,v,m){if(r.call(this),!p)throw new Error("No data for PDF table.");var f,b,w,x,S=[],P=[],y=[],k={},R={},z=[],W=[],C=(m=m||{}).autoSize||!1,X=m.printHeaders!==!1,q=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,A=m.margins||Object.assign({width:this.getPageWidth()},t),T=typeof m.padding=="number"?m.padding:3,G=m.headerBackgroundColor||"#c8c8c8",U=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=U,this.setFontSize(q),v==null)P=S=Object.keys(p[0]),y=S.map(function(){return"left"});else if(Array.isArray(v)&&ye(v[0])==="object")for(S=v.map(function(ot){return ot.name}),P=v.map(function(ot){return ot.prompt||ot.name||""}),y=v.map(function(ot){return ot.align||"left"}),f=0;f<v.length;f+=1)R[v[f].name]=v[f].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(P=S=v,y=S.map(function(){return"left"}));if(C||Array.isArray(v)&&typeof v[0]=="string")for(f=0;f<S.length;f+=1){for(k[x=S[f]]=p.map(function(ot){return ot[x]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(P[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=k[x],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)z.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[x]=Math.max.apply(null,z)+T+T,z=[]}if(X){var et={};for(f=0;f<S.length;f+=1)et[S[f]]={},et[S[f]].text=P[f],et[S[f]].align=y[f];var st=h.call(this,et,R);W=S.map(function(ot){return new n(l,u,R[ot],st,et[ot].text,void 0,et[ot].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var lt=v.reduce(function(ot,vt){return ot[vt.name]=vt.align,ot},{});for(f=0;f<p.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:p[f]},this);var nt=h.call(this,p[f],R);for(w=0;w<S.length;w+=1){var dt=p[f][S[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:w,data:dt},this),o.call(this,new n(l,u,R[S[w]],nt,dt,f+2,lt[S[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var h=function(l,u){var p=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(f){var b=l[f];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[f]-p-p)},this).map(function(f){return this.getLineHeightFactor()*f.length*v/m+p+p},this).reduce(function(f,b){return Math.max(f,b)},0)};a.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},a.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new n(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){p=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(p.y=this.internal.__cell__.margins.top||0,m.push(p)),p.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,p),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),e=!1}}(Vt.API);var Yc={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Xc=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_1=$c(Xc),Kc=[100,200,300,400,500,600,700,800,900],Ju=$c(Kc);function w1(a){var t=a.family.replace(/"|'/g,"").toLowerCase(),e=function(n){return Yc[n=n||"normal"]?n:"normal"}(a.style),r=function(n){if(!n)return 400;if(typeof n=="number")return n>=100&&n<=900&&n%100==0?n:400;if(/^\d00$/.test(n))return parseInt(n);switch(n){case"bold":return 700;case"normal":default:return 400}}(a.weight),i=function(n){return typeof _1[n=n||"normal"]=="number"?n:"normal"}(a.stretch);return{family:t,style:e,weight:r,stretch:i,src:a.src||[],ref:a.ref||{name:t,style:[i,e,r].join(" ")}}}function R0(a,t,e,r){var i;for(i=e;i>=0&&i<t.length;i+=r)if(a[t[i]])return a[t[i]];for(i=e;i>=0&&i<t.length;i-=r)if(a[t[i]])return a[t[i]]}var Qu={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},D0={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B0(a){return[a.stretch,a.style,a.weight,a.family].join(" ")}function Zu(a,t,e){for(var r=(e=e||{}).defaultFontFamily||"times",i=Object.assign({},Qu,e.genericFontFamilies||{}),n=null,o=null,h=0;h<t.length;++h)if(i[(n=w1(t[h])).family]&&(n.family=i[n.family]),a.hasOwnProperty(n.family)){o=a[n.family];break}if(!(o=o||a[r]))throw new Error("Could not find a font-family for the rule '"+B0(n)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var p=_1[l],v=p<=_1.normal?-1:1,m=R0(u,Xc,p,v);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(n.stretch,o),o=function(l,u){if(u[l])return u[l];for(var p=Yc[l],v=0;v<p.length;++v)if(u[p[v]])return u[p[v]];throw new Error("Could not find a matching font-style for "+l)}(n.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var p=Ju[l],v=R0(u,Kc,p,l<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+l);return v}(n.weight,o)))throw new Error("Failed to resolve a font for the rule '"+B0(n)+"'.");return o}function j0(a){return a.trimLeft()}function t5(a,t){for(var e=0;e<a.length;){if(a.charAt(e)===t)return[a.substring(0,e),a.substring(e+1)];e+=1}return null}function e5(a){var t=a.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],a.substring(t[0].length)]}var Fo,G0,q0,Jl=["times"];(function(a){var t,e,r,i,n,o,h,l,u,p=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};a.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,e=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,o=this.internal.Point,h=this.internal.Rectangle,l=this.internal.Matrix,u=new p}]);var v=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=F;Object.defineProperty(this,"pdf",{get:function(){return B}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(ft){V=!!ft}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(ft){J=!!ft}});var rt=0;Object.defineProperty(this,"posX",{get:function(){return rt},set:function(ft){isNaN(ft)||(rt=ft)}});var D=0;Object.defineProperty(this,"posY",{get:function(){return D},set:function(ft){isNaN(ft)||(D=ft)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ft){var $;typeof ft=="number"?$=[ft,ft,ft,ft]:(($=new Array(4))[0]=ft[0],$[1]=ft.length>=2?ft[1]:$[0],$[2]=ft.length>=3?ft[2]:$[0],$[3]=ft.length>=4?ft[3]:$[1]),u.margin=$}});var Y=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Y},set:function(ft){Y=ft}});var tt=0;Object.defineProperty(this,"lastBreak",{get:function(){return tt},set:function(ft){tt=ft}});var wt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return wt},set:function(ft){wt=ft}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ft){ft instanceof p&&(u=ft)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ft){u.path=ft}});var mt=[];Object.defineProperty(this,"ctxStack",{get:function(){return mt},set:function(ft){mt=ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ft){var $;$=m(ft),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ft){var $=m(ft);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ft){["butt","round","square"].indexOf(ft)!==-1&&(this.ctx.lineCap=ft,this.pdf.setLineCap(ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ft){isNaN(ft)||(this.ctx.lineWidth=ft,this.pdf.setLineWidth(ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ft){["bevel","round","miter"].indexOf(ft)!==-1&&(this.ctx.lineJoin=ft,this.pdf.setLineJoin(ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ft){isNaN(ft)||(this.ctx.miterLimit=ft,this.pdf.setMiterLimit(ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ft){this.ctx.textBaseline=ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ft){["right","end","center","left","start"].indexOf(ft)!==-1&&(this.ctx.textAlign=ft)}});var At=null;function Lt(ft,$){if(At===null){var qt=function(Ot){var Nt=[];return Object.keys(Ot).forEach(function(Ct){Ot[Ct].forEach(function(Et){var Ft=null;switch(Et){case"bold":Ft={family:Ct,weight:"bold"};break;case"italic":Ft={family:Ct,style:"italic"};break;case"bolditalic":Ft={family:Ct,weight:"bold",style:"italic"};break;case"":case"normal":Ft={family:Ct}}Ft!==null&&(Ft.ref={name:Ct,style:Et},Nt.push(Ft))})}),Nt}(ft.getFontList());At=function(Ot){for(var Nt={},Ct=0;Ct<Ot.length;++Ct){var Et=w1(Ot[Ct]),Ft=Et.family,jt=Et.stretch,Xt=Et.style,te=Et.weight;Nt[Ft]=Nt[Ft]||{},Nt[Ft][jt]=Nt[Ft][jt]||{},Nt[Ft][jt][Xt]=Nt[Ft][jt][Xt]||{},Nt[Ft][jt][Xt][te]=Et}return Nt}(qt.concat($))}return At}var Bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Bt},set:function(ft){At=null,Bt=ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ft){var $;if(this.ctx.font=ft,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ft))!==null){var qt=$[1],Ot=($[2],$[3]),Nt=$[4],Ct=($[5],$[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Nt)[2];Nt=Math.floor(Et==="px"?parseFloat(Nt)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(Nt)*this.pdf.getFontSize():parseFloat(Nt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Nt);var Ft=function(Wt){var ae,It,hr=[],fe=Wt.trim();if(fe==="")return Jl;if(fe in D0)return[D0[fe]];for(;fe!=="";){switch(It=null,ae=(fe=j0(fe)).charAt(0)){case'"':case"'":It=t5(fe.substring(1),ae);break;default:It=e5(fe)}if(It===null||(hr.push(It[0]),(fe=j0(It[1]))!==""&&fe.charAt(0)!==","))return Jl;fe=fe.replace(/^,/,"")}return hr}(Ct);if(this.fontFaces){var jt=Zu(Lt(this.pdf,this.fontFaces),Ft.map(function(Wt){return{family:Wt,stretch:"normal",weight:Ot,style:qt}}));this.pdf.setFont(jt.ref.name,jt.ref.style)}else{var Xt="";(Ot==="bold"||parseInt(Ot,10)>=700||qt==="bold")&&(Xt="bold"),qt==="italic"&&(Xt+="italic"),Xt.length===0&&(Xt="normal");for(var te="",ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ce=0;ce<Ft.length;ce++){if(this.pdf.internal.getFont(Ft[ce],Xt,{noFallback:!0,disableWarning:!0})!==void 0){te=Ft[ce];break}if(Xt==="bolditalic"&&this.pdf.internal.getFont(Ft[ce],"bold",{noFallback:!0,disableWarning:!0})!==void 0)te=Ft[ce],Xt="bold";else if(this.pdf.internal.getFont(Ft[ce],"normal",{noFallback:!0,disableWarning:!0})!==void 0){te=Ft[ce],Xt="normal";break}}if(te===""){for(var _e=0;_e<Ft.length;_e++)if(ie[Ft[_e]]){te=ie[Ft[_e]];break}}te=te===""?"Times":te,this.pdf.setFont(te,Xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ft){this.ctx.globalCompositeOperation=ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ft){this.ctx.globalAlpha=ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ft){this.ctx.lineDashOffset=ft,vt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ft){this.ctx.lineDash=ft,vt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ft){this.ctx.ignoreClearRect=!!ft}})};v.prototype.setLineDash=function(F){this.lineDash=F},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){k.call(this,"fill",!1)},v.prototype.stroke=function(){k.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(F,B){if(isNaN(F)||isNaN(B))throw Ne.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(F,B));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(F,B)},v.prototype.closePath=function(){var F=new o(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&ye(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){F=new o(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},v.prototype.lineTo=function(F,B){if(isNaN(F)||isNaN(B))throw Ne.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(F,B));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},v.prototype.quadraticCurveTo=function(F,B,V,J){if(isNaN(V)||isNaN(J)||isNaN(F)||isNaN(B))throw Ne.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var rt=this.ctx.transform.applyToPoint(new o(V,J)),D=this.ctx.transform.applyToPoint(new o(F,B));this.path.push({type:"qct",x1:D.x,y1:D.y,x:rt.x,y:rt.y}),this.ctx.lastPoint=new o(rt.x,rt.y)},v.prototype.bezierCurveTo=function(F,B,V,J,rt,D){if(isNaN(rt)||isNaN(D)||isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J))throw Ne.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Y=this.ctx.transform.applyToPoint(new o(rt,D)),tt=this.ctx.transform.applyToPoint(new o(F,B)),wt=this.ctx.transform.applyToPoint(new o(V,J));this.path.push({type:"bct",x1:tt.x,y1:tt.y,x2:wt.x,y2:wt.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},v.prototype.arc=function(F,B,V,J,rt,D){if(isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J)||isNaN(rt))throw Ne.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(D=!!D,!this.ctx.transform.isIdentity){var Y=this.ctx.transform.applyToPoint(new o(F,B));F=Y.x,B=Y.y;var tt=this.ctx.transform.applyToPoint(new o(0,V)),wt=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(tt.x-wt.x,2)+Math.pow(tt.y-wt.y,2))}Math.abs(rt-J)>=2*Math.PI&&(J=0,rt=2*Math.PI),this.path.push({type:"arc",x:F,y:B,radius:V,startAngle:J,endAngle:rt,counterclockwise:D})},v.prototype.arcTo=function(F,B,V,J,rt){throw new Error("arcTo not implemented.")},v.prototype.rect=function(F,B,V,J){if(isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J))throw Ne.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,B),this.lineTo(F+V,B),this.lineTo(F+V,B+J),this.lineTo(F,B+J),this.lineTo(F,B),this.lineTo(F+V,B),this.lineTo(F,B)},v.prototype.fillRect=function(F,B,V,J){if(isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J))throw Ne.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var rt={};this.lineCap!=="butt"&&(rt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(rt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,B,V,J),this.fill(),rt.hasOwnProperty("lineCap")&&(this.lineCap=rt.lineCap),rt.hasOwnProperty("lineJoin")&&(this.lineJoin=rt.lineJoin)}},v.prototype.strokeRect=function(F,B,V,J){if(isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J))throw Ne.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(F,B,V,J),this.stroke())},v.prototype.clearRect=function(F,B,V,J){if(isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J))throw Ne.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,B,V,J))},v.prototype.save=function(F){F=typeof F!="boolean"||F;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},v.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(B),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(F){var B,V,J,rt;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))B=0,V=0,J=0,rt=0;else{var D=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(D!==null)B=parseInt(D[1]),V=parseInt(D[2]),J=parseInt(D[3]),rt=1;else if((D=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)B=parseInt(D[1]),V=parseInt(D[2]),J=parseInt(D[3]),rt=parseFloat(D[4]);else{if(rt=1,typeof F=="string"&&F.charAt(0)!=="#"){var Y=new qc(F);F=Y.ok?Y.toHex():"#000000"}F.length===4?(B=F.substring(1,2),B+=B,V=F.substring(2,3),V+=V,J=F.substring(3,4),J+=J):(B=F.substring(1,3),V=F.substring(3,5),J=F.substring(5,7)),B=parseInt(B,16),V=parseInt(V,16),J=parseInt(J,16)}}return{r:B,g:V,b:J,a:rt,style:F}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(F,B,V,J){if(isNaN(B)||isNaN(V)||typeof F!="string")throw Ne.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!f.call(this)){var rt=nt(this.ctx.transform.rotation),D=this.ctx.transform.scaleX;T.call(this,{text:F,x:B,y:V,scale:D,angle:rt,align:this.textAlign,maxWidth:J})}},v.prototype.strokeText=function(F,B,V,J){if(isNaN(B)||isNaN(V)||typeof F!="string")throw Ne.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){J=isNaN(J)?void 0:J;var rt=nt(this.ctx.transform.rotation),D=this.ctx.transform.scaleX;T.call(this,{text:F,x:B,y:V,scale:D,renderingMode:"stroke",angle:rt,align:this.textAlign,maxWidth:J})}},v.prototype.measureText=function(F){if(typeof F!="string")throw Ne.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,V=this.pdf.internal.scaleFactor,J=B.internal.getFontSize(),rt=B.getStringUnitWidth(F)*J/B.internal.scaleFactor,D=function(Y){var tt=(Y=Y||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return tt}}),this};return new D({width:rt*=Math.round(96*V/72*1e4)/1e4})},v.prototype.scale=function(F,B){if(isNaN(F)||isNaN(B))throw Ne.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new l(F,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},v.prototype.rotate=function(F){if(isNaN(F))throw Ne.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},v.prototype.translate=function(F,B){if(isNaN(F)||isNaN(B))throw Ne.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new l(1,0,0,1,F,B);this.ctx.transform=this.ctx.transform.multiply(V)},v.prototype.transform=function(F,B,V,J,rt,D){if(isNaN(F)||isNaN(B)||isNaN(V)||isNaN(J)||isNaN(rt)||isNaN(D))throw Ne.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Y=new l(F,B,V,J,rt,D);this.ctx.transform=this.ctx.transform.multiply(Y)},v.prototype.setTransform=function(F,B,V,J,rt,D){F=isNaN(F)?1:F,B=isNaN(B)?0:B,V=isNaN(V)?0:V,J=isNaN(J)?1:J,rt=isNaN(rt)?0:rt,D=isNaN(D)?0:D,this.ctx.transform=new l(F,B,V,J,rt,D)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(F,B,V,J,rt,D,Y,tt,wt){var mt=this.pdf.getImageProperties(F),At=1,Lt=1,Bt=1,ft=1;J!==void 0&&tt!==void 0&&(Bt=tt/J,ft=wt/rt,At=mt.width/J*tt/J,Lt=mt.height/rt*wt/rt),D===void 0&&(D=B,Y=V,B=0,V=0),J!==void 0&&tt===void 0&&(tt=J,wt=rt),J===void 0&&tt===void 0&&(tt=mt.width,wt=mt.height);for(var $,qt=this.ctx.transform.decompose(),Ot=nt(qt.rotate.shx),Nt=new l,Ct=(Nt=(Nt=(Nt=Nt.multiply(qt.translate)).multiply(qt.skew)).multiply(qt.scale)).applyToRectangle(new h(D-B*Bt,Y-V*ft,J*At,rt*Lt)),Et=x.call(this,Ct),Ft=[],jt=0;jt<Et.length;jt+=1)Ft.indexOf(Et[jt])===-1&&Ft.push(Et[jt]);if(y(Ft),this.autoPaging)for(var Xt=Ft[0],te=Ft[Ft.length-1],ie=Xt;ie<te+1;ie++){this.pdf.setPage(ie);var ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_e=ie===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ae=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=ie===1?0:Wt+(ie-2)*ae;if(this.ctx.clip_path.length!==0){var hr=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P($,this.posX+this.margin[3],-It+_e+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=hr}var fe=JSON.parse(JSON.stringify(Ct));fe=P([fe],this.posX+this.margin[3],-It+_e+this.ctx.prevPageLastElemOffset)[0];var Vr=(ie>Xt||ie<te)&&w.call(this);Vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,ae,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,Ot),Vr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,Ot)};var x=function(F,B,V){var J=[];B=B||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var rt=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":J.push(Math.floor((F.y+rt)/V)+1);break;case"arc":J.push(Math.floor((F.y+rt-F.radius)/V)+1),J.push(Math.floor((F.y+rt+F.radius)/V)+1);break;case"qct":var D=dt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);J.push(Math.floor((D.y+rt)/V)+1),J.push(Math.floor((D.y+D.h+rt)/V)+1);break;case"bct":var Y=ot(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);J.push(Math.floor((Y.y+rt)/V)+1),J.push(Math.floor((Y.y+Y.h+rt)/V)+1);break;case"rect":J.push(Math.floor((F.y+rt)/V)+1),J.push(Math.floor((F.y+F.h+rt)/V)+1)}for(var tt=0;tt<J.length;tt+=1)for(;this.pdf.internal.getNumberOfPages()<J[tt];)S.call(this);return J},S=function(){var F=this.fillStyle,B=this.strokeStyle,V=this.font,J=this.lineCap,rt=this.lineWidth,D=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=B,this.font=V,this.lineCap=J,this.lineWidth=rt,this.lineJoin=D},P=function(F,B,V){for(var J=0;J<F.length;J++)switch(F[J].type){case"bct":F[J].x2+=B,F[J].y2+=V;case"qct":F[J].x1+=B,F[J].y1+=V;case"mt":case"lt":case"arc":default:F[J].x+=B,F[J].y+=V}return F},y=function(F){return F.sort(function(B,V){return B-V})},k=function(F,B){for(var V,J,rt=this.fillStyle,D=this.strokeStyle,Y=this.lineCap,tt=this.lineWidth,wt=Math.abs(tt*this.ctx.transform.scaleX),mt=this.lineJoin,At=JSON.parse(JSON.stringify(this.path)),Lt=JSON.parse(JSON.stringify(this.path)),Bt=[],ft=0;ft<Lt.length;ft++)if(Lt[ft].x!==void 0)for(var $=x.call(this,Lt[ft]),qt=0;qt<$.length;qt+=1)Bt.indexOf($[qt])===-1&&Bt.push($[qt]);for(var Ot=0;Ot<Bt.length;Ot++)for(;this.pdf.internal.getNumberOfPages()<Bt[Ot];)S.call(this);if(y(Bt),this.autoPaging)for(var Nt=Bt[0],Ct=Bt[Bt.length-1],Et=Nt;Et<Ct+1;Et++){this.pdf.setPage(Et),this.fillStyle=rt,this.strokeStyle=D,this.lineCap=Y,this.lineWidth=wt,this.lineJoin=mt;var Ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=Et===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],te=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ie=Et===1?0:Xt+(Et-2)*te;if(this.ctx.clip_path.length!==0){var ce=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(V,this.posX+this.margin[3],-ie+jt+this.ctx.prevPageLastElemOffset),R.call(this,F,!0),this.path=ce}if(J=JSON.parse(JSON.stringify(At)),this.path=P(J,this.posX+this.margin[3],-ie+jt+this.ctx.prevPageLastElemOffset),B===!1||Et===0){var _e=(Et>Nt||Et<Ct)&&w.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,te,null).clip().discardPath()),R.call(this,F,B),_e&&this.pdf.restoreGraphicsState()}this.lineWidth=tt}else this.lineWidth=wt,R.call(this,F,B),this.lineWidth=tt;this.path=At},R=function(F,B){if((F!=="stroke"||B||!b.call(this))&&(F==="stroke"||B||!f.call(this))){for(var V,J,rt=[],D=this.path,Y=0;Y<D.length;Y++){var tt=D[Y];switch(tt.type){case"begin":rt.push({begin:!0});break;case"close":rt.push({close:!0});break;case"mt":rt.push({start:tt,deltas:[],abs:[]});break;case"lt":var wt=rt.length;if(D[Y-1]&&!isNaN(D[Y-1].x)&&(V=[tt.x-D[Y-1].x,tt.y-D[Y-1].y],wt>0)){for(;wt>=0;wt--)if(rt[wt-1].close!==!0&&rt[wt-1].begin!==!0){rt[wt-1].deltas.push(V),rt[wt-1].abs.push(tt);break}}break;case"bct":V=[tt.x1-D[Y-1].x,tt.y1-D[Y-1].y,tt.x2-D[Y-1].x,tt.y2-D[Y-1].y,tt.x-D[Y-1].x,tt.y-D[Y-1].y],rt[rt.length-1].deltas.push(V);break;case"qct":var mt=D[Y-1].x+2/3*(tt.x1-D[Y-1].x),At=D[Y-1].y+2/3*(tt.y1-D[Y-1].y),Lt=tt.x+2/3*(tt.x1-tt.x),Bt=tt.y+2/3*(tt.y1-tt.y),ft=tt.x,$=tt.y;V=[mt-D[Y-1].x,At-D[Y-1].y,Lt-D[Y-1].x,Bt-D[Y-1].y,ft-D[Y-1].x,$-D[Y-1].y],rt[rt.length-1].deltas.push(V);break;case"arc":rt.push({deltas:[],abs:[],arc:!0}),Array.isArray(rt[rt.length-1].abs)&&rt[rt.length-1].abs.push(tt)}}J=B?null:F==="stroke"?"stroke":"fill";for(var qt=!1,Ot=0;Ot<rt.length;Ot++)if(rt[Ot].arc)for(var Nt=rt[Ot].abs,Ct=0;Ct<Nt.length;Ct++){var Et=Nt[Ct];Et.type==="arc"?C.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,B,!qt):G.call(this,Et.x,Et.y),qt=!0}else if(rt[Ot].close===!0)this.pdf.internal.out("h"),qt=!1;else if(rt[Ot].begin!==!0){var Ft=rt[Ot].start.x,jt=rt[Ot].start.y;U.call(this,rt[Ot].deltas,Ft,jt),qt=!0}J&&X.call(this,J),B&&q.call(this)}},z=function(F){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-V;case"top":return F+B-V;case"hanging":return F+B-2*V;case"middle":return F+B/2-V;case"ideographic":return F;case"alphabetic":default:return F}},W=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(B,V){this.colorStops.push([B,V])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(F,B,V,J,rt,D,Y,tt,wt){for(var mt=st.call(this,V,J,rt,D),At=0;At<mt.length;At++){var Lt=mt[At];At===0&&(wt?A.call(this,Lt.x1+F,Lt.y1+B):G.call(this,Lt.x1+F,Lt.y1+B)),et.call(this,F,B,Lt.x2,Lt.y2,Lt.x3,Lt.y3,Lt.x4,Lt.y4)}tt?q.call(this):X.call(this,Y)},X=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(F,B){this.pdf.internal.out(e(F)+" "+r(B)+" m")},T=function(F){var B;switch(F.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var V=this.pdf.getTextDimensions(F.text),J=z.call(this,F.y),rt=W.call(this,J)-V.h,D=this.ctx.transform.applyToPoint(new o(F.x,J)),Y=this.ctx.transform.decompose(),tt=new l;tt=(tt=(tt=tt.multiply(Y.translate)).multiply(Y.skew)).multiply(Y.scale);for(var wt,mt,At,Lt=this.ctx.transform.applyToRectangle(new h(F.x,J,V.w,V.h)),Bt=tt.applyToRectangle(new h(F.x,rt,V.w,V.h)),ft=x.call(this,Bt),$=[],qt=0;qt<ft.length;qt+=1)$.indexOf(ft[qt])===-1&&$.push(ft[qt]);if(y($),this.autoPaging)for(var Ot=$[0],Nt=$[$.length-1],Ct=Ot;Ct<Nt+1;Ct++){this.pdf.setPage(Ct);var Et=Ct===1?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[2],Xt=jt-this.margin[0],te=this.pdf.internal.pageSize.width-this.margin[1],ie=te-this.margin[3],ce=Ct===1?0:Ft+(Ct-2)*Xt;if(this.ctx.clip_path.length!==0){var _e=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(wt,this.posX+this.margin[3],-1*ce+Et),R.call(this,"fill",!0),this.path=_e}var Wt=P([JSON.parse(JSON.stringify(Bt))],this.posX+this.margin[3],-ce+Et+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(mt*F.scale),At=this.lineWidth,this.lineWidth=At*F.scale);var ae=this.autoPaging!=="text";if(ae||Wt.y+Wt.h<=jt){if(ae||Wt.y>=Et&&Wt.x<=te){var It=ae?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||te-Wt.x)[0],hr=P([JSON.parse(JSON.stringify(Lt))],this.posX+this.margin[3],-ce+Et+this.ctx.prevPageLastElemOffset)[0],fe=ae&&(Ct>Ot||Ct<Nt)&&w.call(this);fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ie,Xt,null).clip().discardPath()),this.pdf.text(It,hr.x,hr.y,{angle:F.angle,align:B,renderingMode:F.renderingMode}),fe&&this.pdf.restoreGraphicsState()}}else Wt.y<jt&&(this.ctx.prevPageLastElemOffset+=jt-Wt.y);F.scale>=.01&&(this.pdf.setFontSize(mt),this.lineWidth=At)}else F.scale>=.01&&(mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(mt*F.scale),At=this.lineWidth,this.lineWidth=At*F.scale),this.pdf.text(F.text,D.x+this.posX,D.y+this.posY,{angle:F.angle,align:B,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(mt),this.lineWidth=At)},G=function(F,B,V,J){V=V||0,J=J||0,this.pdf.internal.out(e(F+V)+" "+r(B+J)+" l")},U=function(F,B,V){return this.pdf.lines(F,B,V,null,null)},et=function(F,B,V,J,rt,D,Y,tt){this.pdf.internal.out([t(i(V+F)),t(n(J+B)),t(i(rt+F)),t(n(D+B)),t(i(Y+F)),t(n(tt+B)),"c"].join(" "))},st=function(F,B,V,J){for(var rt=2*Math.PI,D=Math.PI/2;B>V;)B-=rt;var Y=Math.abs(V-B);Y<rt&&J&&(Y=rt-Y);for(var tt=[],wt=J?-1:1,mt=B;Y>1e-5;){var At=mt+wt*Math.min(Y,D);tt.push(lt.call(this,F,mt,At)),Y-=Math.abs(At-mt),mt=At}return tt},lt=function(F,B,V){var J=(V-B)/2,rt=F*Math.cos(J),D=F*Math.sin(J),Y=rt,tt=-D,wt=Y*Y+tt*tt,mt=wt+Y*rt+tt*D,At=4/3*(Math.sqrt(2*wt*mt)-mt)/(Y*D-tt*rt),Lt=Y-At*tt,Bt=tt+At*Y,ft=Lt,$=-Bt,qt=J+B,Ot=Math.cos(qt),Nt=Math.sin(qt);return{x1:F*Math.cos(B),y1:F*Math.sin(B),x2:Lt*Ot-Bt*Nt,y2:Lt*Nt+Bt*Ot,x3:ft*Ot-$*Nt,y3:ft*Nt+$*Ot,x4:F*Math.cos(V),y4:F*Math.sin(V)}},nt=function(F){return 180*F/Math.PI},dt=function(F,B,V,J,rt,D){var Y=F+.5*(V-F),tt=B+.5*(J-B),wt=rt+.5*(V-rt),mt=D+.5*(J-D),At=Math.min(F,rt,Y,wt),Lt=Math.max(F,rt,Y,wt),Bt=Math.min(B,D,tt,mt),ft=Math.max(B,D,tt,mt);return new h(At,Bt,Lt-At,ft-Bt)},ot=function(F,B,V,J,rt,D,Y,tt){var wt,mt,At,Lt,Bt,ft,$,qt,Ot,Nt,Ct,Et,Ft,jt,Xt=V-F,te=J-B,ie=rt-V,ce=D-J,_e=Y-rt,Wt=tt-D;for(mt=0;mt<41;mt++)Ot=($=(At=F+(wt=mt/40)*Xt)+wt*((Bt=V+wt*ie)-At))+wt*(Bt+wt*(rt+wt*_e-Bt)-$),Nt=(qt=(Lt=B+wt*te)+wt*((ft=J+wt*ce)-Lt))+wt*(ft+wt*(D+wt*Wt-ft)-qt),mt==0?(Ct=Ot,Et=Nt,Ft=Ot,jt=Nt):(Ct=Math.min(Ct,Ot),Et=Math.min(Et,Nt),Ft=Math.max(Ft,Ot),jt=Math.max(jt,Nt));return new h(Math.round(Ct),Math.round(Et),Math.round(Ft-Ct),Math.round(jt-Et))},vt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,B,V=(F=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:B}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Vt.API),function(a){var t=function(n){var o,h,l,u,p,v,m,f,b,w;for(h=[],l=0,u=(n+=o="\0\0\0\0".slice(n.length%4||4)).length;u>l;l+=4)(p=(n.charCodeAt(l)<<24)+(n.charCodeAt(l+1)<<16)+(n.charCodeAt(l+2)<<8)+n.charCodeAt(l+3))!==0?(v=(p=((p=((p=((p=(p-(w=p%85))/85)-(b=p%85))/85)-(f=p%85))/85)-(m=p%85))/85)%85,h.push(v+33,m+33,f+33,b+33,w+33)):h.push(122);return function(x,S){for(var P=S;P>0;P--)x.pop()}(h,o.length),String.fromCharCode.apply(String,h)+"~>"},e=function(n){var o,h,l,u,p,v=String,m="length",f=255,b="charCodeAt",w="slice",x="replace";for(n[w](-2),n=n[w](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],u=0,p=(n+=o="uuuuu"[w](n[m]%5||5))[m];p>u;u+=5)h=52200625*(n[b](u)-33)+614125*(n[b](u+1)-33)+7225*(n[b](u+2)-33)+85*(n[b](u+3)-33)+(n[b](u+4)-33),l.push(f&h>>24,f&h>>16,f&h>>8,f&h);return function(S,P){for(var y=P;y>0;y--)S.pop()}(l,o[m]),v.fromCharCode.apply(v,l)},r=function(n){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((n=n.replace(/\s/g,"")).indexOf(">")!==-1&&(n=n.substr(0,n.indexOf(">"))),n.length%2&&(n+="0"),o.test(n)===!1)return"";for(var h="",l=0;l<n.length;l+=2)h+=String.fromCharCode("0x"+(n[l]+n[l+1]));return h},i=function(n){for(var o=new Uint8Array(n.length),h=n.length;h--;)o[h]=n.charCodeAt(h);return n=(o=g1(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};a.processDataByFilters=function(n,o){var h=0,l=n||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),h=0;h<o.length;h+=1)switch(o[h]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[h]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Vt.API),function(a){a.loadFile=function(t,e,r){return function(i,n,o){n=n!==!1,o=typeof o=="function"?o:function(){};var h=void 0;try{h=function(l,u,p){var v=new XMLHttpRequest,m=0,f=function(b){var w=b.length,x=[],S=String.fromCharCode;for(m=0;m<w;m+=1)x.push(S(255&b.charCodeAt(m)));return x.join("")};if(v.open("GET",l,!u),v.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(v.onload=function(){v.status===200?p(f(this.responseText)):p(void 0)}),v.send(null),u&&v.status===200)return f(v.responseText)}(i,n,o)}catch{}return h}(t,e,r)},a.loadImageFile=a.loadFile}(Vt.API),function(a){function t(){return(Ht.html2canvas?Promise.resolve(Ht.html2canvas):c1(()=>import("./html2canvas.esm.e0a7d97b.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(Ht.DOMPurify?Promise.resolve(Ht.DOMPurify):c1(()=>import("./purify.es.0b8ca77d.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var h=ye(o);return h==="undefined"?"undefined":h==="string"||o instanceof String?"string":h==="number"||o instanceof Number?"number":h==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(o,h){var l=document.createElement(o);for(var u in h.className&&(l.className=h.className),h.innerHTML&&h.dompurify&&(l.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)l.style[u]=h.style[u];return l},n=function o(h){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(h)};(n.prototype=Object.create(Promise.prototype)).constructor=n,n.convert=function(o,h){return o.__proto__=h||n.prototype,o},n.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},n.prototype.from=function(o,h){return this.then(function(){switch(h=h||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(e).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},n.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},n.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=function l(u,p){for(var v=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)p!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||v.appendChild(l(m,p));return u.nodeType===1&&(u.nodeName==="CANVAS"?(v.width=u.width,v.height=u.height,v.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(v.value=u.value),v.addEventListener("load",function(){v.scrollTop=u.scrollTop,v.scrollLeft=u.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},n.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(h){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,h(this.prop.container,l)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},n.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(h){var l=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var f=u[m],b=f.src.find(function(w){return w.format==="truetype"});b&&l.addFont(b.url,f.ref.name,f.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,l.context2d.save(!0),h(this.prop.container,v)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},n.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},n.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},n.prototype.output=function(o,h,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,h):this.outputPdf(o,h)},n.prototype.outputPdf=function(o,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,h)})},n.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},n.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},n.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},n.prototype.set=function(o){if(r(o)!=="object")return this;var h=Object.keys(o||{}).map(function(l){if(l in n.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(h)})},n.prototype.get=function(o,h){return this.then(function(){var l=o in n.template.prop?this.prop[o]:this.opt[o];return h?h(l):l})},n.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},n.prototype.setPageSize=function(o){function h(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||Vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:h(o.inner.width,o.k),height:h(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},n.prototype.setProgress=function(o,h,l,u){return o!=null&&(this.progress.val=o),h!=null&&(this.progress.state=h),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},n.prototype.updateProgress=function(o,h,l,u){return this.setProgress(o?this.progress.val+o:null,h||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},n.prototype.then=function(o,h){var l=this;return this.thenCore(o,h,function(u,p){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(v){return l.updateProgress(null,u),v}).then(u,p).then(function(v){return l.updateProgress(1),v})})},n.prototype.thenCore=function(o,h,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),h&&(h=h.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:n.convert(Object.assign({},this),Promise.prototype),p=l.call(u,o,h);return n.convert(p,this.__proto__)},n.prototype.thenExternal=function(o,h){return Promise.prototype.then.call(this,o,h)},n.prototype.thenList=function(o){var h=this;return o.forEach(function(l){h=h.thenCore(l)}),h},n.prototype.catch=function(o){o&&(o=o.bind(this));var h=Promise.prototype.catch.call(this,o);return n.convert(h,this)},n.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},n.prototype.error=function(o){return this.then(function(){throw new Error(o)})},n.prototype.using=n.prototype.set,n.prototype.saveAs=n.prototype.save,n.prototype.export=n.prototype.output,n.prototype.run=n.prototype.then,Vt.getPageSize=function(o,h,l){if(ye(o)==="object"){var u=o;o=u.orientation,h=u.unit||h,l=u.format||l}h=h||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var p,v=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+h}var f,b=0,w=0;if(m.hasOwnProperty(v))b=m[v][1]/p,w=m[v][0]/p;else try{b=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",w>b&&(f=w,w=b,b=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>w&&(f=w,w=b,b=f)}return{width:w,height:b,unit:h,k:p,orientation:o}},a.html=function(o,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(w1):null;var l=new n(h);return h.worker?l:l.from(o).doCallback()}}(Vt.API),Vt.API.addJS=function(a){return q0=a,this.internal.events.subscribe("postPutResources",function(){Fo=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fo+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),G0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fo!==void 0&&G0!==void 0&&this.internal.out("/Names <</JavaScript "+Fo+" 0 R>>")}),this},function(a){var t;a.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),n=0;n<i.length;n++){var o=i[n],h=r.exec(o);if(h!=null){var l=h[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,p=[];for(n=0;n<u;n++){var v=e.internal.newObject();p.push(v);var m=e.internal.getPageInfo(n+1);e.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=e.internal.newObject();for(e.internal.write("<< /Names [ "),n=0;n<p.length;n++)e.internal.write("(page_"+(n+1)+")"+p[n]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+f+" 0 R"),e.internal.write(">>","endobj")}}]),a.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),a.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(r,i,n){var o={title:i,options:n,children:[]};return r==null&&(r=this.root),r.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(r){r.id=e.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},e.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},e.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<r.children.length;n++){var o=r.children[n];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),n>0&&this.line("/Prev "+this.makeRef(r.children[n-1])),n<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[n+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var h=this.count=this.count_r({count:0},o);if(h>0&&this.line("/Count "+h),o.options&&o.options.pageNumber){var l=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},e.outline.line=function(r){this.ctx.val+=r+`\r
`},e.outline.makeRef=function(r){return r.id+" 0 R"},e.outline.makeString=function(r){return"("+e.internal.pdfEscape(r)+")"},e.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(r,i){for(var n=0;n<i.children.length;n++)r.count++,this.count_r(r,i.children[n]);return r.count}}])}(Vt.API),function(a){var t=[192,193,194,195,196,197,198,199];a.processJPEG=function(e,r,i,n,o,h){var l,u=this.decode.DCT_DECODE,p=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(v){for(var m,f=256*v.charCodeAt(4)+v.charCodeAt(5),b=v.length,w={width:0,height:0,numcomponents:1},x=4;x<b;x+=2){if(x+=f,t.indexOf(v.charCodeAt(x+1))!==-1){m=256*v.charCodeAt(x+5)+v.charCodeAt(x+6),w={width:256*v.charCodeAt(x+7)+v.charCodeAt(x+8),height:m,numcomponents:v.charCodeAt(x+9)};break}f=256*v.charCodeAt(x+2)+v.charCodeAt(x+3)}return w}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}p={data:e,width:l.width,height:l.height,colorSpace:h,bitsPerComponent:8,filter:u,index:r,alias:i}}return p}}(Vt.API);var ka,Eo,U0,z0,V0,r5=function(){var a,t,e;function r(n){var o,h,l,u,p,v,m,f,b,w,x,S,P,y;for(this.data=n,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(o=this.readUInt32(),b=(function(){var k,R;for(R=[],k=0;k<4;++k)R.push(String.fromCharCode(this.data[this.pos++]));return R}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),u=this.readUInt16()||100,v.delay=1e3*p/u,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),n=(v!=null?v.data:void 0)||this.imgData,S=0;0<=o?S<o:S>o;0<=o?++S:--S)n.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(P=0;0<=w?P<w:P>w;0<=w?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(x=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,x.slice(0,m)),this.text[f]=String.fromCharCode.apply(String,x.slice(m+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(y=this.colorType)===4||y===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(n){var o,h;for(h=[],o=0;0<=n?o<n:o>n;0<=n?++o:--o)h.push(this.data[this.pos++]);return h},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(n){var o=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*o),l=0,u=this;if(n==null&&(n=this.imgData),n.length===0)return new Uint8Array(0);function p(v,m,f,b){var w,x,S,P,y,k,R,z,W,C,X,q,A,T,G,U,et,st,lt,nt,dt,ot=Math.ceil((u.width-v)/f),vt=Math.ceil((u.height-m)/b),F=u.width==ot&&u.height==vt;for(T=o*ot,q=F?h:new Uint8Array(T*vt),k=n.length,A=0,x=0;A<vt&&l<k;){switch(n[l++]){case 0:for(P=et=0;et<T;P=et+=1)q[x++]=n[l++];break;case 1:for(P=st=0;st<T;P=st+=1)w=n[l++],y=P<o?0:q[x-o],q[x++]=(w+y)%256;break;case 2:for(P=lt=0;lt<T;P=lt+=1)w=n[l++],S=(P-P%o)/o,G=A&&q[(A-1)*T+S*o+P%o],q[x++]=(G+w)%256;break;case 3:for(P=nt=0;nt<T;P=nt+=1)w=n[l++],S=(P-P%o)/o,y=P<o?0:q[x-o],G=A&&q[(A-1)*T+S*o+P%o],q[x++]=(w+Math.floor((y+G)/2))%256;break;case 4:for(P=dt=0;dt<T;P=dt+=1)w=n[l++],S=(P-P%o)/o,y=P<o?0:q[x-o],A===0?G=U=0:(G=q[(A-1)*T+S*o+P%o],U=S&&q[(A-1)*T+(S-1)*o+P%o]),R=y+G-U,z=Math.abs(R-y),C=Math.abs(R-G),X=Math.abs(R-U),W=z<=C&&z<=X?y:C<=X?G:U,q[x++]=(w+W)%256;break;default:throw new Error("Invalid filter algorithm: "+n[l-1])}if(!F){var B=((m+A*b)*u.width+v)*o,V=A*T;for(P=0;P<ot;P+=1){for(var J=0;J<o;J+=1)h[B++]=q[V++];B+=(f-1)*o}}A++}}return n=Ru(n),u.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),h},r.prototype.decodePalette=function(){var n,o,h,l,u,p,v,m,f;for(h=this.palette,p=this.transparency.indexed||[],u=new Uint8Array((p.length||0)+h.length),l=0,n=0,o=v=0,m=h.length;v<m;o=v+=3)u[l++]=h[o],u[l++]=h[o+1],u[l++]=h[o+2],u[l++]=(f=p[n++])!=null?f:255;return u},r.prototype.copyToImageData=function(n,o){var h,l,u,p,v,m,f,b,w,x,S;if(l=this.colors,w=null,h=this.hasAlphaChannel,this.palette.length&&(w=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),l=4,h=!0),b=(u=n.data||n).length,v=w||o,p=m=0,l===1)for(;p<b;)f=w?4*o[p/4]:m,x=v[f++],u[p++]=x,u[p++]=x,u[p++]=x,u[p++]=h?v[f++]:255,m=f;else for(;p<b;)f=w?4*o[p/4]:m,u[p++]=v[f++],u[p++]=v[f++],u[p++]=v[f++],u[p++]=h?v[f++]:255,m=f},r.prototype.decode=function(){var n;return n=new Uint8Array(this.width*this.height*4),this.copyToImageData(n,this.decodePixels()),n};var i=function(){if(Object.prototype.toString.call(Ht)==="[object Window]"){try{t=Ht.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),a=function(n){var o;if(i()===!0)return e.width=n.width,e.height=n.height,e.clearRect(0,0,n.width,n.height),e.putImageData(n,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(n){var o,h,l,u,p,v,m,f;if(this.animation){for(f=[],h=p=0,v=(m=this.animation.frames).length;p<v;h=++p)o=m[h],l=n.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,f.push(o.image=a(l));return f}},r.prototype.renderFrame=function(n,o){var h,l,u;return h=(l=this.animation.frames)[o],u=l[o-1],o===0&&n.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?n.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&n.putImageData(u.imageData,u.xOffset,u.yOffset),h.blendOp===0&&n.clearRect(h.xOffset,h.yOffset,h.width,h.height),n.drawImage(h.image,h.xOffset,h.yOffset)},r.prototype.animate=function(n){var o,h,l,u,p,v,m=this;return h=0,v=this.animation,u=v.numFrames,l=v.frames,p=v.numPlays,(o=function(){var f,b;if(f=h++%u,b=l[f],m.renderFrame(n,f),u>1&&h/u<p)return m.animation._timeout=setTimeout(o,b.delay)})()},r.prototype.stopAnimation=function(){var n;return clearTimeout((n=this.animation)!=null?n._timeout:void 0)},r.prototype.render=function(n){var o,h;return n._png&&n._png.stopAnimation(),n._png=this,n.width=this.width,n.height=this.height,o=n.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(h=o.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),o.putImageData(h,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function i5(a){var t=0;if(a[t++]!==71||a[t++]!==73||a[t++]!==70||a[t++]!==56||(a[t++]+1&253)!=56||a[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=a[t++]|a[t++]<<8,r=a[t++]|a[t++]<<8,i=a[t++],n=i>>7,o=1<<(7&i)+1;a[t++],a[t++];var h=null,l=null;n&&(h=t,l=o,t+=3*o);var u=!0,p=[],v=0,m=null,f=0,b=null;for(this.width=e,this.height=r;u&&t<a.length;)switch(a[t++]){case 33:switch(a[t++]){case 255:if(a[t]!==11||a[t+1]==78&&a[t+2]==69&&a[t+3]==84&&a[t+4]==83&&a[t+5]==67&&a[t+6]==65&&a[t+7]==80&&a[t+8]==69&&a[t+9]==50&&a[t+10]==46&&a[t+11]==48&&a[t+12]==3&&a[t+13]==1&&a[t+16]==0)t+=14,b=a[t++]|a[t++]<<8,t++;else for(t+=12;;){if(!((A=a[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(a[t++]!==4||a[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=a[t++];v=a[t++]|a[t++]<<8,m=a[t++],!(1&w)&&(m=null),f=w>>2&7,t++;break;case 254:for(;;){if(!((A=a[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+a[t-1].toString(16))}break;case 44:var x=a[t++]|a[t++]<<8,S=a[t++]|a[t++]<<8,P=a[t++]|a[t++]<<8,y=a[t++]|a[t++]<<8,k=a[t++],R=k>>6&1,z=1<<(7&k)+1,W=h,C=l,X=!1;k>>7&&(X=!0,W=t,C=z,t+=3*z);var q=t;for(t++;;){var A;if(!((A=a[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}p.push({x,y:S,width:P,height:y,has_local_palette:X,palette_offset:W,palette_size:C,data_offset:q,data_length:t-q,transparent_index:m,interlaced:!!R,delay:v,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+a[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return b},this.frameInfo=function(T){if(T<0||T>=p.length)throw new Error("Frame index out of range.");return p[T]},this.decodeAndBlitFrameBGRA=function(T,G){var U=this.frameInfo(T),et=U.width*U.height,st=new Uint8Array(et);H0(a,U.data_offset,st,et);var lt=U.palette_offset,nt=U.transparent_index;nt===null&&(nt=256);var dt=U.width,ot=e-dt,vt=dt,F=4*(U.y*e+U.x),B=4*((U.y+U.height)*e+U.x),V=F,J=4*ot;U.interlaced===!0&&(J+=4*e*7);for(var rt=8,D=0,Y=st.length;D<Y;++D){var tt=st[D];if(vt===0&&(vt=dt,(V+=J)>=B&&(J=4*ot+4*e*(rt-1),V=F+(dt+ot)*(rt<<1),rt>>=1)),tt===nt)V+=4;else{var wt=a[lt+3*tt],mt=a[lt+3*tt+1],At=a[lt+3*tt+2];G[V++]=At,G[V++]=mt,G[V++]=wt,G[V++]=255}--vt}},this.decodeAndBlitFrameRGBA=function(T,G){var U=this.frameInfo(T),et=U.width*U.height,st=new Uint8Array(et);H0(a,U.data_offset,st,et);var lt=U.palette_offset,nt=U.transparent_index;nt===null&&(nt=256);var dt=U.width,ot=e-dt,vt=dt,F=4*(U.y*e+U.x),B=4*((U.y+U.height)*e+U.x),V=F,J=4*ot;U.interlaced===!0&&(J+=4*e*7);for(var rt=8,D=0,Y=st.length;D<Y;++D){var tt=st[D];if(vt===0&&(vt=dt,(V+=J)>=B&&(J=4*ot+4*e*(rt-1),V=F+(dt+ot)*(rt<<1),rt>>=1)),tt===nt)V+=4;else{var wt=a[lt+3*tt],mt=a[lt+3*tt+1],At=a[lt+3*tt+2];G[V++]=wt,G[V++]=mt,G[V++]=At,G[V++]=255}--vt}}}function H0(a,t,e,r){for(var i=a[t++],n=1<<i,o=n+1,h=o+1,l=i+1,u=(1<<l)-1,p=0,v=0,m=0,f=a[t++],b=new Int32Array(4096),w=null;;){for(;p<16&&f!==0;)v|=a[t++]<<p,p+=8,f===1?f=a[t++]:--f;if(p<l)break;var x=v&u;if(v>>=l,p-=l,x!==n){if(x===o)break;for(var S=x<h?x:w,P=0,y=S;y>n;)y=b[y]>>8,++P;var k=y;if(m+P+(S!==x?1:0)>r)return void Ne.log("Warning, gif stream longer than expected.");e[m++]=k;var R=m+=P;for(S!==x&&(e[m++]=k),y=S;P--;)y=b[y],e[--R]=255&y,y>>=8;w!==null&&h<4096&&(b[h++]=w<<8|k,h>=u+1&&l<12&&(++l,u=u<<1|1)),w=x}else h=o+1,u=(1<<(l=i+1))-1,w=null}return m!==r&&Ne.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ql(a){var t,e,r,i,n,o=Math.floor,h=new Array(64),l=new Array(64),u=new Array(64),p=new Array(64),v=new Array(65535),m=new Array(65535),f=new Array(64),b=new Array(64),w=[],x=0,S=7,P=new Array(64),y=new Array(64),k=new Array(64),R=new Array(256),z=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],et=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function st(F,B){for(var V=0,J=0,rt=new Array,D=1;D<=16;D++){for(var Y=1;Y<=F[D];Y++)rt[B[J]]=[],rt[B[J]][0]=V,rt[B[J]][1]=D,J++,V++;V*=2}return rt}function lt(F){for(var B=F[0],V=F[1]-1;V>=0;)B&1<<V&&(x|=1<<S),V--,--S<0&&(x==255?(nt(255),nt(0)):nt(x),S=7,x=0)}function nt(F){w.push(F)}function dt(F){nt(F>>8&255),nt(255&F)}function ot(F,B,V,J,rt){for(var D,Y=rt[0],tt=rt[240],wt=function(Nt,Ct){var Et,Ft,jt,Xt,te,ie,ce,_e,Wt,ae,It=0;for(Wt=0;Wt<8;++Wt){Et=Nt[It],Ft=Nt[It+1],jt=Nt[It+2],Xt=Nt[It+3],te=Nt[It+4],ie=Nt[It+5],ce=Nt[It+6];var hr=Et+(_e=Nt[It+7]),fe=Et-_e,Vr=Ft+ce,xe=Ft-ce,Fe=jt+ie,fi=jt-ie,ge=Xt+te,Ln=Xt-te,Me=hr+ge,Hr=hr-ge,Pi=Vr+Fe,Oe=Vr-Fe;Nt[It]=Me+Pi,Nt[It+4]=Me-Pi;var Kt=.707106781*(Oe+Hr);Nt[It+2]=Hr+Kt,Nt[It+6]=Hr-Kt;var ve=.382683433*((Me=Ln+fi)-(Oe=xe+fe)),Cn=.5411961*Me+ve,sr=1.306562965*Oe+ve,di=.707106781*(Pi=fi+xe),pi=fe+di,zt=fe-di;Nt[It+5]=zt+Cn,Nt[It+3]=zt-Cn,Nt[It+1]=pi+sr,Nt[It+7]=pi-sr,It+=8}for(It=0,Wt=0;Wt<8;++Wt){Et=Nt[It],Ft=Nt[It+8],jt=Nt[It+16],Xt=Nt[It+24],te=Nt[It+32],ie=Nt[It+40],ce=Nt[It+48];var Wr=Et+(_e=Nt[It+56]),gi=Et-_e,Sr=Ft+ce,Je=Ft-ce,$e=jt+ie,Er=jt-ie,ta=Xt+te,ki=Xt-te,$r=Wr+ta,Yr=Wr-ta,Xr=Sr+$e,vi=Sr-$e;Nt[It]=$r+Xr,Nt[It+32]=$r-Xr;var Dr=.707106781*(vi+Yr);Nt[It+16]=Yr+Dr,Nt[It+48]=Yr-Dr;var mi=.382683433*(($r=ki+Er)-(vi=Je+gi)),Pn=.5411961*$r+mi,ea=1.306562965*vi+mi,ra=.707106781*(Xr=Er+Je),ia=gi+ra,na=gi-ra;Nt[It+40]=na+Pn,Nt[It+24]=na-Pn,Nt[It+8]=ia+ea,Nt[It+56]=ia-ea,It++}for(Wt=0;Wt<64;++Wt)ae=Nt[Wt]*Ct[Wt],f[Wt]=ae>0?ae+.5|0:ae-.5|0;return f}(F,B),mt=0;mt<64;++mt)b[W[mt]]=wt[mt];var At=b[0]-V;V=b[0],At==0?lt(J[0]):(lt(J[m[D=32767+At]]),lt(v[D]));for(var Lt=63;Lt>0&&b[Lt]==0;)Lt--;if(Lt==0)return lt(Y),V;for(var Bt,ft=1;ft<=Lt;){for(var $=ft;b[ft]==0&&ft<=Lt;)++ft;var qt=ft-$;if(qt>=16){Bt=qt>>4;for(var Ot=1;Ot<=Bt;++Ot)lt(tt);qt&=15}D=32767+b[ft],lt(rt[(qt<<4)+m[D]]),lt(v[D]),ft++}return Lt!=63&&lt(Y),V}function vt(F){F=Math.min(Math.max(F,1),100),n!=F&&(function(B){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var rt=o((V[J]*B+50)/100);rt=Math.min(Math.max(rt,1),255),h[W[J]]=rt}for(var D=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Y=0;Y<64;Y++){var tt=o((D[Y]*B+50)/100);tt=Math.min(Math.max(tt,1),255),l[W[Y]]=tt}for(var wt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],mt=0,At=0;At<8;At++)for(var Lt=0;Lt<8;Lt++)u[mt]=1/(h[W[mt]]*wt[At]*wt[Lt]*8),p[mt]=1/(l[W[mt]]*wt[At]*wt[Lt]*8),mt++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),n=F)}this.encode=function(F,B){B&&vt(B),w=new Array,x=0,S=7,dt(65496),dt(65504),dt(16),nt(74),nt(70),nt(73),nt(70),nt(0),nt(1),nt(1),nt(0),dt(1),dt(1),nt(0),nt(0),function(){dt(65499),dt(132),nt(0);for(var Ft=0;Ft<64;Ft++)nt(h[Ft]);nt(1);for(var jt=0;jt<64;jt++)nt(l[jt])}(),function(Ft,jt){dt(65472),dt(17),nt(8),dt(jt),dt(Ft),nt(3),nt(1),nt(17),nt(0),nt(2),nt(17),nt(1),nt(3),nt(17),nt(1)}(F.width,F.height),function(){dt(65476),dt(418),nt(0);for(var Ft=0;Ft<16;Ft++)nt(C[Ft+1]);for(var jt=0;jt<=11;jt++)nt(X[jt]);nt(16);for(var Xt=0;Xt<16;Xt++)nt(q[Xt+1]);for(var te=0;te<=161;te++)nt(A[te]);nt(1);for(var ie=0;ie<16;ie++)nt(T[ie+1]);for(var ce=0;ce<=11;ce++)nt(G[ce]);nt(17);for(var _e=0;_e<16;_e++)nt(U[_e+1]);for(var Wt=0;Wt<=161;Wt++)nt(et[Wt])}(),dt(65498),dt(12),nt(3),nt(1),nt(0),nt(2),nt(17),nt(3),nt(17),nt(0),nt(63),nt(0);var V=0,J=0,rt=0;x=0,S=7,this.encode.displayName="_encode_";for(var D,Y,tt,wt,mt,At,Lt,Bt,ft,$=F.data,qt=F.width,Ot=F.height,Nt=4*qt,Ct=0;Ct<Ot;){for(D=0;D<Nt;){for(mt=Nt*Ct+D,Lt=-1,Bt=0,ft=0;ft<64;ft++)At=mt+(Bt=ft>>3)*Nt+(Lt=4*(7&ft)),Ct+Bt>=Ot&&(At-=Nt*(Ct+1+Bt-Ot)),D+Lt>=Nt&&(At-=D+Lt-Nt+4),Y=$[At++],tt=$[At++],wt=$[At++],P[ft]=(z[Y]+z[tt+256>>0]+z[wt+512>>0]>>16)-128,y[ft]=(z[Y+768>>0]+z[tt+1024>>0]+z[wt+1280>>0]>>16)-128,k[ft]=(z[Y+1280>>0]+z[tt+1536>>0]+z[wt+1792>>0]>>16)-128;V=ot(P,u,V,t,r),J=ot(y,p,J,e,i),rt=ot(k,p,rt,e,i),D+=32}Ct+=8}if(S>=0){var Et=[];Et[1]=S+1,Et[0]=(1<<S+1)-1,lt(Et)}return dt(65497),new Uint8Array(w)},a=a||50,function(){for(var F=String.fromCharCode,B=0;B<256;B++)R[B]=F(B)}(),t=st(C,X),e=st(T,G),r=st(q,A),i=st(U,et),function(){for(var F=1,B=2,V=1;V<=15;V++){for(var J=F;J<B;J++)m[32767+J]=V,v[32767+J]=[],v[32767+J][1]=V,v[32767+J][0]=J;for(var rt=-(B-1);rt<=-F;rt++)m[32767+rt]=V,v[32767+rt]=[],v[32767+rt][1]=V,v[32767+rt][0]=B-1+rt;F<<=1,B<<=1}}(),function(){for(var F=0;F<256;F++)z[F]=19595*F,z[F+256>>0]=38470*F,z[F+512>>0]=7471*F+32768,z[F+768>>0]=-11059*F,z[F+1024>>0]=-21709*F,z[F+1280>>0]=32768*F+8421375,z[F+1536>>0]=-27439*F,z[F+1792>>0]=-5329*F}(),vt(a)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function si(a,t){if(this.pos=0,this.buffer=a,this.datav=new DataView(a.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function W0(a){function t(C){if(!C)throw Error("assert :P")}function e(C,X,q){for(var A=0;4>A;A++)if(C[X+A]!=q.charCodeAt(A))return!0;return!1}function r(C,X,q,A,T){for(var G=0;G<T;G++)C[X+G]=q[A+G]}function i(C,X,q,A){for(var T=0;T<A;T++)C[X+T]=q}function n(C){return new Int32Array(C)}function o(C,X){for(var q=[],A=0;A<C;A++)q.push(new X);return q}function h(C,X){var q=[];return function A(T,G,U){for(var et=U[G],st=0;st<et&&(T.push(U.length>G+1?[]:new X),!(U.length<G+1));st++)A(T[st],G+1,U)}(q,0,C),q}var l=function(){var C=this;function X(s,c){for(var g=1<<c-1>>>0;s&g;)g>>>=1;return g?(s&g-1)+g:s}function q(s,c,g,_,N){t(!(_%g));do s[c+(_-=g)]=N;while(0<_)}function A(s,c,g,_,N){if(t(2328>=N),512>=N)var E=n(512);else if((E=n(N))==null)return 0;return function(I,M,O,j,Q,ct){var ut,at,_t=M,pt=1<<O,Z=n(16),it=n(16);for(t(Q!=0),t(j!=null),t(I!=null),t(0<O),at=0;at<Q;++at){if(15<j[at])return 0;++Z[j[at]]}if(Z[0]==Q)return 0;for(it[1]=0,ut=1;15>ut;++ut){if(Z[ut]>1<<ut)return 0;it[ut+1]=it[ut]+Z[ut]}for(at=0;at<Q;++at)ut=j[at],0<j[at]&&(ct[it[ut]++]=at);if(it[15]==1)return(j=new T).g=0,j.value=ct[0],q(I,_t,1,pt,j),pt;var bt,St=-1,yt=pt-1,Mt=0,Pt=1,Ut=1,kt=1<<O;for(at=0,ut=1,Q=2;ut<=O;++ut,Q<<=1){if(Pt+=Ut<<=1,0>(Ut-=Z[ut]))return 0;for(;0<Z[ut];--Z[ut])(j=new T).g=ut,j.value=ct[at++],q(I,_t+Mt,Q,kt,j),Mt=X(Mt,ut)}for(ut=O+1,Q=2;15>=ut;++ut,Q<<=1){if(Pt+=Ut<<=1,0>(Ut-=Z[ut]))return 0;for(;0<Z[ut];--Z[ut]){if(j=new T,(Mt&yt)!=St){for(_t+=kt,bt=1<<(St=ut)-O;15>St&&!(0>=(bt-=Z[St]));)++St,bt<<=1;pt+=kt=1<<(bt=St-O),I[M+(St=Mt&yt)].g=bt+O,I[M+St].value=_t-M-St}j.g=ut-O,j.value=ct[at++],q(I,_t+(Mt>>O),Q,kt,j),Mt=X(Mt,ut)}}return Pt!=2*it[15]-1?0:pt}(s,c,g,_,N,E)}function T(){this.value=this.g=0}function G(){this.value=this.g=0}function U(){this.G=o(5,T),this.H=n(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ar,G)}function et(s,c,g,_){t(s!=null),t(c!=null),t(2147483648>_),s.Ca=254,s.I=0,s.b=-8,s.Ka=0,s.oa=c,s.pa=g,s.Jd=c,s.Yc=g+_,s.Zc=4<=_?g+_-4+1:g,D(s)}function st(s,c){for(var g=0;0<c--;)g|=tt(s,128)<<c;return g}function lt(s,c){var g=st(s,c);return Y(s)?-g:g}function nt(s,c,g,_){var N,E=0;for(t(s!=null),t(c!=null),t(4294967288>_),s.Sb=_,s.Ra=0,s.u=0,s.h=0,4<_&&(_=4),N=0;N<_;++N)E+=c[g+N]<<8*N;s.Ra=E,s.bb=_,s.oa=c,s.pa=g}function dt(s){for(;8<=s.u&&s.bb<s.Sb;)s.Ra>>>=8,s.Ra+=s.oa[s.pa+s.bb]<<ya-8>>>0,++s.bb,s.u-=8;V(s)&&(s.h=1,s.u=0)}function ot(s,c){if(t(0<=c),!s.h&&c<=ba){var g=B(s)&ma[c];return s.u+=c,dt(s),g}return s.h=1,s.u=0}function vt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(s){return s.Ra>>>(s.u&ya-1)>>>0}function V(s){return t(s.bb<=s.Sb),s.h||s.bb==s.Sb&&s.u>ya}function J(s,c){s.u=c,s.h=V(s)}function rt(s){s.u>=ds&&(t(s.u>=ds),dt(s))}function D(s){t(s!=null&&s.oa!=null),s.pa<s.Zc?(s.I=(s.oa[s.pa++]|s.I<<8)>>>0,s.b+=8):(t(s!=null&&s.oa!=null),s.pa<s.Yc?(s.b+=8,s.I=s.oa[s.pa++]|s.I<<8):s.Ka?s.b=0:(s.I<<=8,s.b+=8,s.Ka=1))}function Y(s){return st(s,1)}function tt(s,c){var g=s.Ca;0>s.b&&D(s);var _=s.b,N=g*c>>>8,E=(s.I>>>_>N)+0;for(E?(g-=N,s.I-=N+1<<_>>>0):g=N+1,_=g,N=0;256<=_;)N+=8,_>>=8;return _=7^N+Nr[_],s.b-=_,s.Ca=(g<<_)-1,E}function wt(s,c,g){s[c+0]=g>>24&255,s[c+1]=g>>16&255,s[c+2]=g>>8&255,s[c+3]=g>>0&255}function mt(s,c){return s[c+0]<<0|s[c+1]<<8}function At(s,c){return mt(s,c)|s[c+2]<<16}function Lt(s,c){return mt(s,c)|mt(s,c+2)<<16}function Bt(s,c){var g=1<<c;return t(s!=null),t(0<c),s.X=n(g),s.X==null?0:(s.Mb=32-c,s.Xa=c,1)}function ft(s,c){t(s!=null),t(c!=null),t(s.Xa==c.Xa),r(c.X,0,s.X,0,1<<c.Xa)}function $(){this.X=[],this.Xa=this.Mb=0}function qt(s,c,g,_){t(g!=null),t(_!=null);var N=g[0],E=_[0];return N==0&&(N=(s*E+c/2)/c),E==0&&(E=(c*N+s/2)/s),0>=N||0>=E?0:(g[0]=N,_[0]=E,1)}function Ot(s,c){return s+(1<<c)-1>>>c}function Nt(s,c){return((4278255360&s)+(4278255360&c)>>>0&4278255360)+((16711935&s)+(16711935&c)>>>0&16711935)>>>0}function Ct(s,c){C[c]=function(g,_,N,E,I,M,O){var j;for(j=0;j<I;++j){var Q=C[s](M[O+j-1],N,E+j);M[O+j]=Nt(g[_+j],Q)}}}function Et(){this.ud=this.hd=this.jd=0}function Ft(s,c){return((4278124286&(s^c))>>>1)+(s&c)>>>0}function jt(s){return 0<=s&&256>s?s:0>s?0:255<s?255:void 0}function Xt(s,c){return jt(s+(s-c+.5>>1))}function te(s,c,g){return Math.abs(c-g)-Math.abs(s-g)}function ie(s,c,g,_,N,E,I){for(_=E[I-1],g=0;g<N;++g)E[I+g]=_=Nt(s[c+g],_)}function ce(s,c,g,_,N){var E;for(E=0;E<g;++E){var I=s[c+E],M=I>>8&255,O=16711935&(O=(O=16711935&I)+((M<<16)+M));_[N+E]=(4278255360&I)+O>>>0}}function _e(s,c){c.jd=s>>0&255,c.hd=s>>8&255,c.ud=s>>16&255}function Wt(s,c,g,_,N,E){var I;for(I=0;I<_;++I){var M=c[g+I],O=M>>>8,j=M,Q=255&(Q=(Q=M>>>16)+((s.jd<<24>>24)*(O<<24>>24)>>>5));j=255&(j=(j=j+((s.hd<<24>>24)*(O<<24>>24)>>>5))+((s.ud<<24>>24)*(Q<<24>>24)>>>5)),N[E+I]=(4278255360&M)+(Q<<16)+j}}function ae(s,c,g,_,N){C[c]=function(E,I,M,O,j,Q,ct,ut,at){for(O=ct;O<ut;++O)for(ct=0;ct<at;++ct)j[Q++]=N(M[_(E[I++])])},C[s]=function(E,I,M,O,j,Q,ct){var ut=8>>E.b,at=E.Ea,_t=E.K[0],pt=E.w;if(8>ut)for(E=(1<<E.b)-1,pt=(1<<ut)-1;I<M;++I){var Z,it=0;for(Z=0;Z<at;++Z)Z&E||(it=_(O[j++])),Q[ct++]=N(_t[it&pt]),it>>=ut}else C["VP8LMapColor"+g](O,j,_t,pt,Q,ct,I,M,at)}}function It(s,c,g,_,N){for(g=c+g;c<g;){var E=s[c++];_[N++]=E>>16&255,_[N++]=E>>8&255,_[N++]=E>>0&255}}function hr(s,c,g,_,N){for(g=c+g;c<g;){var E=s[c++];_[N++]=E>>16&255,_[N++]=E>>8&255,_[N++]=E>>0&255,_[N++]=E>>24&255}}function fe(s,c,g,_,N){for(g=c+g;c<g;){var E=(I=s[c++])>>16&240|I>>12&15,I=I>>0&240|I>>28&15;_[N++]=E,_[N++]=I}}function Vr(s,c,g,_,N){for(g=c+g;c<g;){var E=(I=s[c++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;_[N++]=E,_[N++]=I}}function xe(s,c,g,_,N){for(g=c+g;c<g;){var E=s[c++];_[N++]=E>>0&255,_[N++]=E>>8&255,_[N++]=E>>16&255}}function Fe(s,c,g,_,N,E){if(E==0)for(g=c+g;c<g;)wt(_,((E=s[c++])[0]>>24|E[1]>>8&65280|E[2]<<8&16711680|E[3]<<24)>>>0),N+=32;else r(_,N,s,c,g)}function fi(s,c){C[c][0]=C[s+"0"],C[c][1]=C[s+"1"],C[c][2]=C[s+"2"],C[c][3]=C[s+"3"],C[c][4]=C[s+"4"],C[c][5]=C[s+"5"],C[c][6]=C[s+"6"],C[c][7]=C[s+"7"],C[c][8]=C[s+"8"],C[c][9]=C[s+"9"],C[c][10]=C[s+"10"],C[c][11]=C[s+"11"],C[c][12]=C[s+"12"],C[c][13]=C[s+"13"],C[c][14]=C[s+"0"],C[c][15]=C[s+"0"]}function ge(s){return s==xl||s==Al||s==po||s==Nl}function Ln(){this.eb=[],this.size=this.A=this.fb=0}function Me(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Hr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ln,this.f.kb=new Me,this.sd=null}function Pi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Oe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Kt(s){return alert("todo:WebPSamplerProcessPlane"),s.T}function ve(s,c){var g=s.T,_=c.ba.f.RGBA,N=_.eb,E=_.fb+s.ka*_.A,I=qr[c.ba.S],M=s.y,O=s.O,j=s.f,Q=s.N,ct=s.ea,ut=s.W,at=c.cc,_t=c.dc,pt=c.Mc,Z=c.Nc,it=s.ka,bt=s.ka+s.T,St=s.U,yt=St+1>>1;for(it==0?I(M,O,null,null,j,Q,ct,ut,j,Q,ct,ut,N,E,null,null,St):(I(c.ec,c.fc,M,O,at,_t,pt,Z,j,Q,ct,ut,N,E-_.A,N,E,St),++g);it+2<bt;it+=2)at=j,_t=Q,pt=ct,Z=ut,Q+=s.Rc,ut+=s.Rc,E+=2*_.A,I(M,(O+=2*s.fa)-s.fa,M,O,at,_t,pt,Z,j,Q,ct,ut,N,E-_.A,N,E,St);return O+=s.fa,s.j+bt<s.o?(r(c.ec,c.fc,M,O,St),r(c.cc,c.dc,j,Q,yt),r(c.Mc,c.Nc,ct,ut,yt),g--):1&bt||I(M,O,null,null,j,Q,ct,ut,j,Q,ct,ut,N,E+_.A,null,null,St),g}function Cn(s,c,g){var _=s.F,N=[s.J];if(_!=null){var E=s.U,I=c.ba.S,M=I==fo||I==po;c=c.ba.f.RGBA;var O=[0],j=s.ka;O[0]=s.T,s.Kb&&(j==0?--O[0]:(--j,N[0]-=s.width),s.j+s.ka+s.T==s.o&&(O[0]=s.o-s.j-j));var Q=c.eb;j=c.fb+j*c.A,s=oo(_,N[0],s.width,E,O,Q,j+(M?0:3),c.A),t(g==O),s&&ge(I)&&an(Q,j,M,E,O,c.A)}return 0}function sr(s){var c=s.ma,g=c.ba.S,_=11>g,N=g==co||g==uo||g==fo||g==Sl||g==12||ge(g);if(c.memory=null,c.Ib=null,c.Jb=null,c.Nd=null,!us(c.Oa,s,N?11:12))return 0;if(N&&ge(g)&&xt(),s.da)alert("todo:use_scaling");else{if(_){if(c.Ib=Kt,s.Kb){if(g=s.U+1>>1,c.memory=n(s.U+2*g),c.memory==null)return 0;c.ec=c.memory,c.fc=0,c.cc=c.ec,c.dc=c.fc+s.U,c.Mc=c.cc,c.Nc=c.dc+g,c.Ib=ve,xt()}}else alert("todo:EmitYUV");N&&(c.Jb=Cn,_&&ht())}if(_&&!h0){for(s=0;256>s;++s)tu[s]=89858*(s-128)+vo>>go,iu[s]=-22014*(s-128)+vo,ru[s]=-45773*(s-128),eu[s]=113618*(s-128)+vo>>go;for(s=ys;s<Pl;++s)c=76283*(s-16)+vo>>go,nu[s-ys]=Ir(c,255),au[s-ys]=Ir(c+8>>4,15);h0=1}return 1}function di(s){var c=s.ma,g=s.U,_=s.T;return t(!(1&s.ka)),0>=g||0>=_?0:(g=c.Ib(s,c),c.Jb!=null&&c.Jb(s,c,g),c.Dc+=g,1)}function pi(s){s.ma.memory=null}function zt(s,c,g,_){return ot(s,8)!=47?0:(c[0]=ot(s,14)+1,g[0]=ot(s,14)+1,_[0]=ot(s,1),ot(s,3)!=0?0:!s.h)}function Wr(s,c){if(4>s)return s+1;var g=s-2>>1;return(2+(1&s)<<g)+ot(c,g)+1}function gi(s,c){return 120<c?c-120:1<=(g=((g=G2[c-1])>>4)*s+(8-(15&g)))?g:1;var g}function Sr(s,c,g){var _=B(g),N=s[c+=255&_].g-8;return 0<N&&(J(g,g.u+8),_=B(g),c+=s[c].value,c+=_&(1<<N)-1),J(g,g.u+s[c].g),s[c].value}function Je(s,c,g){return g.g+=s.g,g.value+=s.value<<c>>>0,t(8>=g.g),s.g}function $e(s,c,g){var _=s.xc;return t((c=_==0?0:s.vc[s.md*(g>>_)+(c>>_)])<s.Wb),s.Ya[c]}function Er(s,c,g,_){var N=s.ab,E=s.c*c,I=s.C;c=I+c;var M=g,O=_;for(_=s.Ta,g=s.Ua;0<N--;){var j=s.gc[N],Q=I,ct=c,ut=M,at=O,_t=(O=_,M=g,j.Ea);switch(t(Q<ct),t(ct<=j.nc),j.hc){case 2:so(ut,at,(ct-Q)*_t,O,M);break;case 0:var pt=Q,Z=ct,it=O,bt=M,St=(kt=j).Ea;pt==0&&(bl(ut,at,null,null,1,it,bt),ie(ut,at+1,0,0,St-1,it,bt+1),at+=St,bt+=St,++pt);for(var yt=1<<kt.b,Mt=yt-1,Pt=Ot(St,kt.b),Ut=kt.K,kt=kt.w+(pt>>kt.b)*Pt;pt<Z;){var de=Ut,me=kt,ue=1;for(ps(ut,at,it,bt-St,1,it,bt);ue<St;){var se=(ue&~Mt)+yt;se>St&&(se=St),(0,tn[de[me++]>>8&15])(ut,at+ +ue,it,bt+ue-St,se-ue,it,bt+ue),ue=se}at+=St,bt+=St,++pt&Mt||(kt+=Pt)}ct!=j.nc&&r(O,M-_t,O,M+(ct-Q-1)*_t,_t);break;case 1:for(_t=ut,Z=at,St=(ut=j.Ea)-(bt=ut&~(it=(at=1<<j.b)-1)),pt=Ot(ut,j.b),yt=j.K,j=j.w+(Q>>j.b)*pt;Q<ct;){for(Mt=yt,Pt=j,Ut=new Et,kt=Z+bt,de=Z+ut;Z<kt;)_e(Mt[Pt++],Ut),Br(Ut,_t,Z,at,O,M),Z+=at,M+=at;Z<de&&(_e(Mt[Pt++],Ut),Br(Ut,_t,Z,St,O,M),Z+=St,M+=St),++Q&it||(j+=pt)}break;case 3:if(ut==O&&at==M&&0<j.b){for(Z=O,ut=_t=M+(ct-Q)*_t-(bt=(ct-Q)*Ot(j.Ea,j.b)),at=O,it=M,pt=[],bt=(St=bt)-1;0<=bt;--bt)pt[bt]=at[it+bt];for(bt=St-1;0<=bt;--bt)Z[ut+bt]=pt[bt];Zr(j,Q,ct,O,_t,O,M)}else Zr(j,Q,ct,ut,at,O,M)}M=_,O=g}O!=g&&r(_,g,M,O,E)}function ta(s,c){var g=s.V,_=s.Ba+s.c*s.C,N=c-s.C;if(t(c<=s.l.o),t(16>=N),0<N){var E=s.l,I=s.Ta,M=s.Ua,O=E.width;if(Er(s,N,g,_),N=M=[M],t((g=s.C)<(_=c)),t(E.v<E.va),_>E.o&&(_=E.o),g<E.j){var j=E.j-g;g=E.j,N[0]+=j*O}if(g>=_?g=0:(N[0]+=4*E.v,E.ka=g-E.j,E.U=E.va-E.v,E.T=_-g,g=1),g){if(M=M[0],11>(g=s.ca).S){var Q=g.f.RGBA,ct=(_=g.S,N=E.U,E=E.T,j=Q.eb,Q.A),ut=E;for(Q=Q.fb+s.Ma*Q.A;0<ut--;){var at=I,_t=M,pt=N,Z=j,it=Q;switch(_){case lo:ti(at,_t,pt,Z,it);break;case co:en(at,_t,pt,Z,it);break;case xl:en(at,_t,pt,Z,it),an(Z,it,0,pt,1,0);break;case Q1:_a(at,_t,pt,Z,it);break;case uo:Fe(at,_t,pt,Z,it,1);break;case Al:Fe(at,_t,pt,Z,it,1),an(Z,it,0,pt,1,0);break;case fo:Fe(at,_t,pt,Z,it,0);break;case po:Fe(at,_t,pt,Z,it,0),an(Z,it,1,pt,1,0);break;case Sl:yi(at,_t,pt,Z,it);break;case Nl:yi(at,_t,pt,Z,it),xa(Z,it,pt,1,0);break;case Z1:Ti(at,_t,pt,Z,it);break;default:t(0)}M+=O,Q+=ct}s.Ma+=E}else alert("todo:EmitRescaledRowsYUVA");t(s.Ma<=g.height)}}s.C=c,t(s.C<=s.i)}function ki(s){var c;if(0<s.ua)return 0;for(c=0;c<s.Wb;++c){var g=s.Ya[c].G,_=s.Ya[c].H;if(0<g[1][_[1]+0].g||0<g[2][_[2]+0].g||0<g[3][_[3]+0].g)return 0}return 1}function $r(s,c,g,_,N,E){if(s.Z!=0){var I=s.qd,M=s.rd;for(t(on[s.Z]!=null);c<g;++c)on[s.Z](I,M,_,N,_,N,E),I=_,M=N,N+=E;s.qd=I,s.rd=M}}function Yr(s,c){var g=s.l.ma,_=g.Z==0||g.Z==1?s.l.j:s.C;if(_=s.C<_?_:s.C,t(c<=s.l.o),c>_){var N=s.l.width,E=g.ca,I=g.tb+N*_,M=s.V,O=s.Ba+s.c*_,j=s.gc;t(s.ab==1),t(j[0].hc==3),yl(j[0],_,c,M,O,E,I),$r(g,_,c,E,I,N)}s.C=s.Ma=c}function Xr(s,c,g,_,N,E,I){var M=s.$/_,O=s.$%_,j=s.m,Q=s.s,ct=g+s.$,ut=ct;N=g+_*N;var at=g+_*E,_t=280+Q.ua,pt=s.Pb?M:16777216,Z=0<Q.ua?Q.Wa:null,it=Q.wc,bt=ct<at?$e(Q,O,M):null;t(s.C<E),t(at<=N);var St=!1;t:for(;;){for(;St||ct<at;){var yt=0;if(M>=pt){var Mt=ct-g;t((pt=s).Pb),pt.wd=pt.m,pt.xd=Mt,0<pt.s.ua&&ft(pt.s.Wa,pt.s.vb),pt=M+U2}if(O&it||(bt=$e(Q,O,M)),t(bt!=null),bt.Qb&&(c[ct]=bt.qb,St=!0),!St)if(rt(j),bt.jc){yt=j,Mt=c;var Pt=ct,Ut=bt.pd[B(yt)&Ar-1];t(bt.jc),256>Ut.g?(J(yt,yt.u+Ut.g),Mt[Pt]=Ut.value,yt=0):(J(yt,yt.u+Ut.g-256),t(256<=Ut.value),yt=Ut.value),yt==0&&(St=!0)}else yt=Sr(bt.G[0],bt.H[0],j);if(j.h)break;if(St||256>yt){if(!St)if(bt.nd)c[ct]=(bt.qb|yt<<8)>>>0;else{if(rt(j),St=Sr(bt.G[1],bt.H[1],j),rt(j),Mt=Sr(bt.G[2],bt.H[2],j),Pt=Sr(bt.G[3],bt.H[3],j),j.h)break;c[ct]=(Pt<<24|St<<16|yt<<8|Mt)>>>0}if(St=!1,++ct,++O>=_&&(O=0,++M,I!=null&&M<=E&&!(M%16)&&I(s,M),Z!=null))for(;ut<ct;)yt=c[ut++],Z.X[(506832829*yt&4294967295)>>>Z.Mb]=yt}else if(280>yt){if(yt=Wr(yt-256,j),Mt=Sr(bt.G[4],bt.H[4],j),rt(j),Mt=gi(_,Mt=Wr(Mt,j)),j.h)break;if(ct-g<Mt||N-ct<yt)break t;for(Pt=0;Pt<yt;++Pt)c[ct+Pt]=c[ct+Pt-Mt];for(ct+=yt,O+=yt;O>=_;)O-=_,++M,I!=null&&M<=E&&!(M%16)&&I(s,M);if(t(ct<=N),O&it&&(bt=$e(Q,O,M)),Z!=null)for(;ut<ct;)yt=c[ut++],Z.X[(506832829*yt&4294967295)>>>Z.Mb]=yt}else{if(!(yt<_t))break t;for(St=yt-280,t(Z!=null);ut<ct;)yt=c[ut++],Z.X[(506832829*yt&4294967295)>>>Z.Mb]=yt;yt=ct,t(!(St>>>(Mt=Z).Xa)),c[yt]=Mt.X[St],St=!0}St||t(j.h==V(j))}if(s.Pb&&j.h&&ct<N)t(s.m.h),s.a=5,s.m=s.wd,s.$=s.xd,0<s.s.ua&&ft(s.s.vb,s.s.Wa);else{if(j.h)break t;I!=null&&I(s,M>E?E:M),s.a=0,s.$=ct-g}return 1}return s.a=3,0}function vi(s){t(s!=null),s.vc=null,s.yc=null,s.Ya=null;var c=s.Wa;c!=null&&(c.X=null),s.vb=null,t(s!=null)}function Dr(){var s=new ml;return s==null?null:(s.a=0,s.xb=r0,fi("Predictor","VP8LPredictors"),fi("Predictor","VP8LPredictors_C"),fi("PredictorAdd","VP8LPredictorsAdd"),fi("PredictorAdd","VP8LPredictorsAdd_C"),so=ce,Br=Wt,ti=It,en=hr,yi=fe,Ti=Vr,_a=xe,C.VP8LMapColor32b=gs,C.VP8LMapColor8b=_l,s)}function mi(s,c,g,_,N){var E=1,I=[s],M=[c],O=_.m,j=_.s,Q=null,ct=0;t:for(;;){if(g)for(;E&&ot(O,1);){var ut=I,at=M,_t=_,pt=1,Z=_t.m,it=_t.gc[_t.ab],bt=ot(Z,2);if(_t.Oc&1<<bt)E=0;else{switch(_t.Oc|=1<<bt,it.hc=bt,it.Ea=ut[0],it.nc=at[0],it.K=[null],++_t.ab,t(4>=_t.ab),bt){case 0:case 1:it.b=ot(Z,3)+2,pt=mi(Ot(it.Ea,it.b),Ot(it.nc,it.b),0,_t,it.K),it.K=it.K[0];break;case 3:var St,yt=ot(Z,8)+1,Mt=16<yt?0:4<yt?1:2<yt?2:3;if(ut[0]=Ot(it.Ea,Mt),it.b=Mt,St=pt=mi(yt,1,0,_t,it.K)){var Pt,Ut=yt,kt=it,de=1<<(8>>kt.b),me=n(de);if(me==null)St=0;else{var ue=kt.K[0],se=kt.w;for(me[0]=kt.K[0][0],Pt=1;Pt<1*Ut;++Pt)me[Pt]=Nt(ue[se+Pt],me[Pt-1]);for(;Pt<4*de;++Pt)me[Pt]=0;kt.K[0]=null,kt.K[0]=me,St=1}}pt=St;break;case 2:break;default:t(0)}E=pt}}if(I=I[0],M=M[0],E&&ot(O,1)&&!(E=1<=(ct=ot(O,4))&&11>=ct)){_.a=3;break t}var Ae;if(Ae=E)e:{var we,Zt,Xe,Lr=_,Ke=I,Cr=M,be=ct,Mr=g,Or=Lr.m,ir=Lr.s,or=[null],br=1,Ur=0,_i=q2[be];r:for(;;){if(Mr&&ot(Or,1)){var nr=ot(Or,3)+2,Bi=Ot(Ke,nr),On=Ot(Cr,nr),Aa=Bi*On;if(!mi(Bi,On,0,Lr,or))break r;for(or=or[0],ir.xc=nr,we=0;we<Aa;++we){var hn=or[we]>>8&65535;or[we]=hn,hn>=br&&(br=hn+1)}}if(Or.h)break r;for(Zt=0;5>Zt;++Zt){var De=t0[Zt];!Zt&&0<be&&(De+=1<<be),Ur<De&&(Ur=De)}var kl=o(br*_i,T),u0=br,f0=o(u0,U);if(f0==null)var bo=null;else t(65536>=u0),bo=f0;var _s=n(Ur);if(bo==null||_s==null||kl==null){Lr.a=1;break r}var yo=kl;for(we=Xe=0;we<br;++we){var ni=bo[we],Na=ni.G,La=ni.H,d0=0,_o=1,p0=0;for(Zt=0;5>Zt;++Zt){De=t0[Zt],Na[Zt]=yo,La[Zt]=Xe,!Zt&&0<be&&(De+=1<<be);n:{var wo,Fl=De,So=Lr,ws=_s,hu=yo,lu=Xe,El=0,ln=So.m,cu=ot(ln,1);if(i(ws,0,0,Fl),cu){var uu=ot(ln,1)+1,fu=ot(ln,1),g0=ot(ln,fu==0?1:8);ws[g0]=1,uu==2&&(ws[g0=ot(ln,8)]=1);var xo=1}else{var v0=n(19),m0=ot(ln,4)+4;if(19<m0){So.a=3;var Ao=0;break n}for(wo=0;wo<m0;++wo)v0[j2[wo]]=ot(ln,3);var Il=void 0,Ss=void 0,b0=So,du=v0,No=Fl,y0=ws,Tl=0,cn=b0.m,_0=8,w0=o(128,T);i:for(;A(w0,0,7,du,19);){if(ot(cn,1)){var pu=2+2*ot(cn,3);if((Il=2+ot(cn,pu))>No)break i}else Il=No;for(Ss=0;Ss<No&&Il--;){rt(cn);var S0=w0[0+(127&B(cn))];J(cn,cn.u+S0.g);var Ca=S0.value;if(16>Ca)y0[Ss++]=Ca,Ca!=0&&(_0=Ca);else{var gu=Ca==16,x0=Ca-16,vu=D2[x0],A0=ot(cn,R2[x0])+vu;if(Ss+A0>No)break i;for(var mu=gu?_0:0;0<A0--;)y0[Ss++]=mu}}Tl=1;break i}Tl||(b0.a=3),xo=Tl}(xo=xo&&!ln.h)&&(El=A(hu,lu,8,ws,Fl)),xo&&El!=0?Ao=El:(So.a=3,Ao=0)}if(Ao==0)break r;if(_o&&B2[Zt]==1&&(_o=yo[Xe].g==0),d0+=yo[Xe].g,Xe+=Ao,3>=Zt){var xs,Ml=_s[0];for(xs=1;xs<De;++xs)_s[xs]>Ml&&(Ml=_s[xs]);p0+=Ml}}if(ni.nd=_o,ni.Qb=0,_o&&(ni.qb=(Na[3][La[3]+0].value<<24|Na[1][La[1]+0].value<<16|Na[2][La[2]+0].value)>>>0,d0==0&&256>Na[0][La[0]+0].value&&(ni.Qb=1,ni.qb+=Na[0][La[0]+0].value<<8)),ni.jc=!ni.Qb&&6>p0,ni.jc){var Lo,ji=ni;for(Lo=0;Lo<Ar;++Lo){var un=Lo,fn=ji.pd[un],Co=ji.G[0][ji.H[0]+un];256<=Co.value?(fn.g=Co.g+256,fn.value=Co.value):(fn.g=0,fn.value=0,un>>=Je(Co,8,fn),un>>=Je(ji.G[1][ji.H[1]+un],16,fn),un>>=Je(ji.G[2][ji.H[2]+un],0,fn),Je(ji.G[3][ji.H[3]+un],24,fn))}}}ir.vc=or,ir.Wb=br,ir.Ya=bo,ir.yc=kl,Ae=1;break e}Ae=0}if(!(E=Ae)){_.a=3;break t}if(0<ct){if(j.ua=1<<ct,!Bt(j.Wa,ct)){_.a=1,E=0;break t}}else j.ua=0;var Ol=_,N0=I,bu=M,Rl=Ol.s,Dl=Rl.xc;if(Ol.c=N0,Ol.i=bu,Rl.md=Ot(N0,Dl),Rl.wc=Dl==0?-1:(1<<Dl)-1,g){_.xb=X2;break t}if((Q=n(I*M))==null){_.a=1,E=0;break t}E=(E=Xr(_,Q,0,I,M,M,null))&&!O.h;break t}return E?(N!=null?N[0]=Q:(t(Q==null),t(g)),_.$=0,g||vi(j)):vi(j),E}function Pn(s,c){var g=s.c*s.i,_=g+c+16*c;return t(s.c<=c),s.V=n(_),s.V==null?(s.Ta=null,s.Ua=0,s.a=1,0):(s.Ta=s.V,s.Ua=s.Ba+g+c,1)}function ea(s,c){var g=s.C,_=c-g,N=s.V,E=s.Ba+s.c*g;for(t(c<=s.l.o);0<_;){var I=16<_?16:_,M=s.l.ma,O=s.l.width,j=O*I,Q=M.ca,ct=M.tb+O*g,ut=s.Ta,at=s.Ua;Er(s,I,N,E),W1(ut,at,Q,ct,j),$r(M,g,g+I,Q,ct,O),_-=I,N+=I*s.c,g+=I}t(g==c),s.C=s.Ma=c}function ra(){this.ub=this.yd=this.td=this.Rb=0}function ia(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function na(){this.Fb=this.Bb=this.Cb=0,this.Zb=n(4),this.Lb=n(4)}function Gs(){this.Yb=function(){var s=[];return function c(g,_,N){for(var E=N[_],I=0;I<E&&(g.push(N.length>_+1?[]:0),!(N.length<_+1));I++)c(g[I],_+1,N)}(s,0,[3,11]),s}()}function Yh(){this.jb=n(3),this.Wc=h([4,8],Gs),this.Xc=h([4,17],Gs)}function Xh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new n(4),this.od=new n(4)}function aa(){this.ld=this.La=this.dd=this.tc=0}function qs(){this.Na=this.la=0}function Kh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xa(){this.ad=n(384),this.Za=0,this.Ob=n(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Jh(){this.uc=this.M=this.Nb=0,this.wa=Array(new aa),this.Y=0,this.ya=Array(new Xa),this.aa=0,this.l=new sa}function Us(){this.y=n(16),this.f=n(8),this.ea=n(8)}function Qh(){this.cb=this.a=0,this.sc="",this.m=new vt,this.Od=new ra,this.Kc=new ia,this.ed=new Xh,this.Qa=new na,this.Ic=this.$c=this.Aa=0,this.D=new Jh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,vt),this.ia=0,this.pb=o(4,Kh),this.Pa=new Yh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Us),this.Hd=0,this.rb=Array(new qs),this.sb=0,this.wa=Array(new aa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xa),this.L=this.aa=0,this.gd=h([4,2],aa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zh(){var s=new Qh;return s!=null&&(s.a=0,s.sc="OK",s.cb=0,s.Xb=0,bs||(bs=Hs)),s}function qe(s,c,g){return s.a==0&&(s.a=c,s.sc=g,s.cb=0),0}function zs(s,c,g){return 3<=g&&s[c+0]==157&&s[c+1]==1&&s[c+2]==42}function Vs(s,c){if(s==null)return 0;if(s.a=0,s.sc="OK",c==null)return qe(s,2,"null VP8Io passed to VP8GetHeaders()");var g=c.data,_=c.w,N=c.ha;if(4>N)return qe(s,7,"Truncated header.");var E=g[_+0]|g[_+1]<<8|g[_+2]<<16,I=s.Od;if(I.Rb=!(1&E),I.td=E>>1&7,I.yd=E>>4&1,I.ub=E>>5,3<I.td)return qe(s,3,"Incorrect keyframe parameters.");if(!I.yd)return qe(s,4,"Frame not displayable.");_+=3,N-=3;var M=s.Kc;if(I.Rb){if(7>N)return qe(s,7,"cannot parse picture header");if(!zs(g,_,N))return qe(s,3,"Bad code word");M.c=16383&(g[_+4]<<8|g[_+3]),M.Td=g[_+4]>>6,M.i=16383&(g[_+6]<<8|g[_+5]),M.Ud=g[_+6]>>6,_+=7,N-=7,s.za=M.c+15>>4,s.Ub=M.i+15>>4,c.width=M.c,c.height=M.i,c.Da=0,c.j=0,c.v=0,c.va=c.width,c.o=c.height,c.da=0,c.ib=c.width,c.hb=c.height,c.U=c.width,c.T=c.height,i((E=s.Pa).jb,0,255,E.jb.length),t((E=s.Qa)!=null),E.Cb=0,E.Bb=0,E.Fb=1,i(E.Zb,0,0,E.Zb.length),i(E.Lb,0,0,E.Lb)}if(I.ub>N)return qe(s,7,"bad partition length");et(E=s.m,g,_,I.ub),_+=I.ub,N-=I.ub,I.Rb&&(M.Ld=Y(E),M.Kd=Y(E)),M=s.Qa;var O,j=s.Pa;if(t(E!=null),t(M!=null),M.Cb=Y(E),M.Cb){if(M.Bb=Y(E),Y(E)){for(M.Fb=Y(E),O=0;4>O;++O)M.Zb[O]=Y(E)?lt(E,7):0;for(O=0;4>O;++O)M.Lb[O]=Y(E)?lt(E,6):0}if(M.Bb)for(O=0;3>O;++O)j.jb[O]=Y(E)?st(E,8):255}else M.Bb=0;if(E.Ka)return qe(s,3,"cannot parse segment header");if((M=s.ed).zd=Y(E),M.Tb=st(E,6),M.wb=st(E,3),M.Pc=Y(E),M.Pc&&Y(E)){for(j=0;4>j;++j)Y(E)&&(M.vd[j]=lt(E,6));for(j=0;4>j;++j)Y(E)&&(M.od[j]=lt(E,6))}if(s.L=M.Tb==0?0:M.zd?1:2,E.Ka)return qe(s,3,"cannot parse filter header");var Q=N;if(N=O=_,_=O+Q,M=Q,s.Xb=(1<<st(s.m,2))-1,Q<3*(j=s.Xb))g=7;else{for(O+=3*j,M-=3*j,Q=0;Q<j;++Q){var ct=g[N+0]|g[N+1]<<8|g[N+2]<<16;ct>M&&(ct=M),et(s.Jc[+Q],g,O,ct),O+=ct,M-=ct,N+=3}et(s.Jc[+j],g,O,M),g=O<_?0:5}if(g!=0)return qe(s,g,"cannot parse partitions");for(g=st(O=s.m,7),N=Y(O)?lt(O,4):0,_=Y(O)?lt(O,4):0,M=Y(O)?lt(O,4):0,j=Y(O)?lt(O,4):0,O=Y(O)?lt(O,4):0,Q=s.Qa,ct=0;4>ct;++ct){if(Q.Cb){var ut=Q.Zb[ct];Q.Fb||(ut+=g)}else{if(0<ct){s.pb[ct]=s.pb[0];continue}ut=g}var at=s.pb[ct];at.Sc[0]=Ll[Ir(ut+N,127)],at.Sc[1]=Cl[Ir(ut+0,127)],at.Eb[0]=2*Ll[Ir(ut+_,127)],at.Eb[1]=101581*Cl[Ir(ut+M,127)]>>16,8>at.Eb[1]&&(at.Eb[1]=8),at.Qc[0]=Ll[Ir(ut+j,117)],at.Qc[1]=Cl[Ir(ut+O,127)],at.lc=ut+O}if(!I.Rb)return qe(s,4,"Not a key frame.");for(Y(E),I=s.Pa,g=0;4>g;++g){for(N=0;8>N;++N)for(_=0;3>_;++_)for(M=0;11>M;++M)j=tt(E,$2[g][N][_][M])?st(E,8):H2[g][N][_][M],I.Wc[g][N].Yb[_][M]=j;for(N=0;17>N;++N)I.Xc[g][N]=I.Wc[g][Y2[N]]}return s.kc=Y(E),s.kc&&(s.Bd=st(E,8)),s.cb=1}function Hs(s,c,g,_,N,E,I){var M=c[N].Yb[g];for(g=0;16>N;++N){if(!tt(s,M[g+0]))return N;for(;!tt(s,M[g+1]);)if(M=c[++N].Yb[0],g=0,N==16)return 16;var O=c[N+1].Yb;if(tt(s,M[g+2])){var j=s,Q=0;if(tt(j,(ut=M)[(ct=g)+3]))if(tt(j,ut[ct+6])){for(M=0,ct=2*(Q=tt(j,ut[ct+8]))+(ut=tt(j,ut[ct+9+Q])),Q=0,ut=z2[ct];ut[M];++M)Q+=Q+tt(j,ut[M]);Q+=3+(8<<ct)}else tt(j,ut[ct+7])?(Q=7+2*tt(j,165),Q+=tt(j,145)):Q=5+tt(j,159);else Q=tt(j,ut[ct+4])?3+tt(j,ut[ct+5]):2;M=O[2]}else Q=1,M=O[1];O=I+V2[N],0>(j=s).b&&D(j);var ct,ut=j.b,at=(ct=j.Ca>>1)-(j.I>>ut)>>31;--j.b,j.Ca+=at,j.Ca|=1,j.I-=(ct+1&at)<<ut,E[O]=((Q^at)-at)*_[(0<N)+0]}return 16}function Ka(s){var c=s.rb[s.sb-1];c.la=0,c.Na=0,i(s.zc,0,0,s.zc.length),s.ja=0}function tl(s,c){if(s==null)return 0;if(c==null)return qe(s,2,"NULL VP8Io parameter in VP8Decode().");if(!s.cb&&!Vs(s,c))return 0;if(t(s.cb),c.ac==null||c.ac(c)){c.ob&&(s.L=0);var g=mo[s.L];if(s.L==2?(s.yb=0,s.zb=0):(s.yb=c.v-g>>4,s.zb=c.j-g>>4,0>s.yb&&(s.yb=0),0>s.zb&&(s.zb=0)),s.Va=c.o+15+g>>4,s.Hb=c.va+15+g>>4,s.Hb>s.za&&(s.Hb=s.za),s.Va>s.Ub&&(s.Va=s.Ub),0<s.L){var _=s.ed;for(g=0;4>g;++g){var N;if(s.Qa.Cb){var E=s.Qa.Lb[g];s.Qa.Fb||(E+=_.Tb)}else E=_.Tb;for(N=0;1>=N;++N){var I=s.gd[g][N],M=E;if(_.Pc&&(M+=_.vd[0],N&&(M+=_.od[0])),0<(M=0>M?0:63<M?63:M)){var O=M;0<_.wb&&(O=4<_.wb?O>>2:O>>1)>9-_.wb&&(O=9-_.wb),1>O&&(O=1),I.dd=O,I.tc=2*M+O,I.ld=40<=M?2:15<=M?1:0}else I.tc=0;I.La=N}}}g=0}else qe(s,6,"Frame setup failed"),g=s.a;if(g=g==0){if(g){s.$c=0,0<s.Aa||(s.Ic=ou);t:{g=s.Ic,_=4*(O=s.za);var j=32*O,Q=O+1,ct=0<s.L?O*(0<s.Aa?2:1):0,ut=(s.Aa==2?2:1)*O;if((I=_+832+(N=3*(16*g+mo[s.L])/2*j)+(E=s.Fa!=null&&0<s.Fa.length?s.Kc.c*s.Kc.i:0))!=I)g=0;else{if(I>s.Vb){if(s.Vb=0,s.Ec=n(I),s.Fc=0,s.Ec==null){g=qe(s,1,"no memory during frame initialization.");break t}s.Vb=I}I=s.Ec,M=s.Fc,s.Ac=I,s.Bc=M,M+=_,s.Gd=o(j,Us),s.Hd=0,s.rb=o(Q+1,qs),s.sb=1,s.wa=ct?o(ct,aa):null,s.Y=0,s.D.Nb=0,s.D.wa=s.wa,s.D.Y=s.Y,0<s.Aa&&(s.D.Y+=O),t(!0),s.oc=I,s.pc=M,M+=832,s.ya=o(ut,Xa),s.aa=0,s.D.ya=s.ya,s.D.aa=s.aa,s.Aa==2&&(s.D.aa+=O),s.R=16*O,s.B=8*O,O=(j=mo[s.L])*s.R,j=j/2*s.B,s.sa=I,s.ta=M+O,s.qa=s.sa,s.ra=s.ta+16*g*s.R+j,s.Ha=s.qa,s.Ia=s.ra+8*g*s.B+j,s.$c=0,M+=N,s.mb=E?I:null,s.nb=E?M:null,t(M+E<=s.Fc+s.Vb),Ka(s),i(s.Ac,s.Bc,0,_),g=1}}if(g){if(c.ka=0,c.y=s.sa,c.O=s.ta,c.f=s.qa,c.N=s.ra,c.ea=s.Ha,c.Vd=s.Ia,c.fa=s.R,c.Rc=s.B,c.F=null,c.J=0,!J1){for(g=-255;255>=g;++g)$1[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)Y1[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)X1[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)K1[255+g]=0>g?0:255<g?255:g;J1=1}ei=il,wa=el,rn=$s,ri=rl,Mi=Ys,vs=Ws,Tn=rs,Sa=En,Mn=vl,nn=is,ms=gl,jr=fa,Oi=ns,Ce=io,Pe=ro,Ue=Ei,Qe=Ji,Ri=pl,ii[0]=bi,ii[1]=nl,ii[2]=hl,ii[3]=ll,ii[4]=Js,ii[5]=ca,ii[6]=Qs,ii[7]=Za,ii[8]=ul,ii[9]=cl,sn[0]=Xs,sn[1]=sl,sn[2]=Fi,sn[3]=ha,sn[4]=lr,sn[5]=ol,sn[6]=Ks,Di[0]=Ki,Di[1]=al,Di[2]=fl,Di[3]=ts,Di[4]=Fn,Di[5]=dl,Di[6]=es,g=1}else g=0}g&&(g=function(at,_t){for(at.M=0;at.M<at.Va;++at.M){var pt,Z=at.Jc[at.M&at.Xb],it=at.m,bt=at;for(pt=0;pt<bt.za;++pt){var St=it,yt=bt,Mt=yt.Ac,Pt=yt.Bc+4*pt,Ut=yt.zc,kt=yt.ya[yt.aa+pt];if(yt.Qa.Bb?kt.$b=tt(St,yt.Pa.jb[0])?2+tt(St,yt.Pa.jb[2]):tt(St,yt.Pa.jb[1]):kt.$b=0,yt.kc&&(kt.Ad=tt(St,yt.Bd)),kt.Za=!tt(St,145)+0,kt.Za){var de=kt.Ob,me=0;for(yt=0;4>yt;++yt){var ue,se=Ut[0+yt];for(ue=0;4>ue;++ue){se=W2[Mt[Pt+ue]][se];for(var Ae=e0[tt(St,se[0])];0<Ae;)Ae=e0[2*Ae+tt(St,se[Ae])];se=-Ae,Mt[Pt+ue]=se}r(de,me,Mt,Pt,4),me+=4,Ut[0+yt]=se}}else se=tt(St,156)?tt(St,128)?1:3:tt(St,163)?2:0,kt.Ob[0]=se,i(Mt,Pt,se,4),i(Ut,0,se,4);kt.Dd=tt(St,142)?tt(St,114)?tt(St,183)?1:3:2:0}if(bt.m.Ka)return qe(at,7,"Premature end-of-partition0 encountered.");for(;at.ja<at.za;++at.ja){if(bt=Z,St=(it=at).rb[it.sb-1],Mt=it.rb[it.sb+it.ja],pt=it.ya[it.aa+it.ja],Pt=it.kc?pt.Ad:0)St.la=Mt.la=0,pt.Za||(St.Na=Mt.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var we,Zt;if(St=Mt,Mt=bt,Pt=it.Pa.Xc,Ut=it.ya[it.aa+it.ja],kt=it.pb[Ut.$b],yt=Ut.ad,de=0,me=it.rb[it.sb-1],se=ue=0,i(yt,de,0,384),Ut.Za)var Xe=0,Lr=Pt[3];else{Ae=n(16);var Ke=St.Na+me.Na;if(Ke=bs(Mt,Pt[1],Ke,kt.Eb,0,Ae,0),St.Na=me.Na=(0<Ke)+0,1<Ke)ei(Ae,0,yt,de);else{var Cr=Ae[0]+3>>3;for(Ae=0;256>Ae;Ae+=16)yt[de+Ae]=Cr}Xe=1,Lr=Pt[0]}var be=15&St.la,Mr=15&me.la;for(Ae=0;4>Ae;++Ae){var Or=1&Mr;for(Cr=Zt=0;4>Cr;++Cr)be=be>>1|(Or=(Ke=bs(Mt,Lr,Ke=Or+(1&be),kt.Sc,Xe,yt,de))>Xe)<<7,Zt=Zt<<2|(3<Ke?3:1<Ke?2:yt[de+0]!=0),de+=16;be>>=4,Mr=Mr>>1|Or<<7,ue=(ue<<8|Zt)>>>0}for(Lr=be,Xe=Mr>>4,we=0;4>we;we+=2){for(Zt=0,be=St.la>>4+we,Mr=me.la>>4+we,Ae=0;2>Ae;++Ae){for(Or=1&Mr,Cr=0;2>Cr;++Cr)Ke=Or+(1&be),be=be>>1|(Or=0<(Ke=bs(Mt,Pt[2],Ke,kt.Qc,0,yt,de)))<<3,Zt=Zt<<2|(3<Ke?3:1<Ke?2:yt[de+0]!=0),de+=16;be>>=2,Mr=Mr>>1|Or<<5}se|=Zt<<4*we,Lr|=be<<4<<we,Xe|=(240&Mr)<<we}St.la=Lr,me.la=Xe,Ut.Hc=ue,Ut.Gc=se,Ut.ia=43690&se?0:kt.ia,Pt=!(ue|se)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[pt.$b][pt.Za],it.wa[it.Y+it.ja].La|=!Pt),bt.Ka)return qe(at,7,"Premature end-of-file encountered.")}if(Ka(at),it=_t,bt=1,pt=(Z=at).D,St=0<Z.L&&Z.M>=Z.zb&&Z.M<=Z.Va,Z.Aa==0)t:{if(pt.M=Z.M,pt.uc=St,cs(Z,pt),bt=1,pt=(Zt=Z.D).Nb,St=(se=mo[Z.L])*Z.R,Mt=se/2*Z.B,Ae=16*pt*Z.R,Cr=8*pt*Z.B,Pt=Z.sa,Ut=Z.ta-St+Ae,kt=Z.qa,yt=Z.ra-Mt+Cr,de=Z.Ha,me=Z.Ia-Mt+Cr,Mr=(be=Zt.M)==0,ue=be>=Z.Va-1,Z.Aa==2&&cs(Z,Zt),Zt.uc)for(Or=(Ke=Z).D.M,t(Ke.D.uc),Zt=Ke.yb;Zt<Ke.Hb;++Zt){Xe=Zt,Lr=Or;var ir=(or=(De=Ke).D).Nb;we=De.R;var or=or.wa[or.Y+Xe],br=De.sa,Ur=De.ta+16*ir*we+16*Xe,_i=or.dd,nr=or.tc;if(nr!=0)if(t(3<=nr),De.L==1)0<Xe&&Ue(br,Ur,we,nr+4),or.La&&Ri(br,Ur,we,nr),0<Lr&&Pe(br,Ur,we,nr+4),or.La&&Qe(br,Ur,we,nr);else{var Bi=De.B,On=De.qa,Aa=De.ra+8*ir*Bi+8*Xe,hn=De.Ha,De=De.Ia+8*ir*Bi+8*Xe;ir=or.ld,0<Xe&&(Sa(br,Ur,we,nr+4,_i,ir),nn(On,Aa,hn,De,Bi,nr+4,_i,ir)),or.La&&(jr(br,Ur,we,nr,_i,ir),Ce(On,Aa,hn,De,Bi,nr,_i,ir)),0<Lr&&(Tn(br,Ur,we,nr+4,_i,ir),Mn(On,Aa,hn,De,Bi,nr+4,_i,ir)),or.La&&(ms(br,Ur,we,nr,_i,ir),Oi(On,Aa,hn,De,Bi,nr,_i,ir))}}if(Z.ia&&alert("todo:DitherRow"),it.put!=null){if(Zt=16*be,be=16*(be+1),Mr?(it.y=Z.sa,it.O=Z.ta+Ae,it.f=Z.qa,it.N=Z.ra+Cr,it.ea=Z.Ha,it.W=Z.Ia+Cr):(Zt-=se,it.y=Pt,it.O=Ut,it.f=kt,it.N=yt,it.ea=de,it.W=me),ue||(be-=se),be>it.o&&(be=it.o),it.F=null,it.J=null,Z.Fa!=null&&0<Z.Fa.length&&Zt<be&&(it.J=hs(Z,it,Zt,be-Zt),it.F=Z.mb,it.F==null&&it.F.length==0)){bt=qe(Z,3,"Could not decode alpha data.");break t}Zt<it.j&&(se=it.j-Zt,Zt=it.j,t(!(1&se)),it.O+=Z.R*se,it.N+=Z.B*(se>>1),it.W+=Z.B*(se>>1),it.F!=null&&(it.J+=it.width*se)),Zt<be&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=Zt-it.j,it.U=it.va-it.v,it.T=be-Zt,bt=it.put(it))}pt+1!=Z.Ic||ue||(r(Z.sa,Z.ta-St,Pt,Ut+16*Z.R,St),r(Z.qa,Z.ra-Mt,kt,yt+8*Z.B,Mt),r(Z.Ha,Z.Ia-Mt,de,me+8*Z.B,Mt))}if(!bt)return qe(at,6,"Output aborted.")}return 1}(s,c)),c.bc!=null&&c.bc(c),g&=1}return g?(s.cb=0,g):0}function Kr(s,c,g,_,N){N=s[c+g+32*_]+(N>>3),s[c+g+32*_]=-256&N?0>N?0:255:N}function oa(s,c,g,_,N,E){Kr(s,c,0,g,_+N),Kr(s,c,1,g,_+E),Kr(s,c,2,g,_-E),Kr(s,c,3,g,_-N)}function xr(s){return(20091*s>>16)+s}function Ja(s,c,g,_){var N,E=0,I=n(16);for(N=0;4>N;++N){var M=s[c+0]+s[c+8],O=s[c+0]-s[c+8],j=(35468*s[c+4]>>16)-xr(s[c+12]),Q=xr(s[c+4])+(35468*s[c+12]>>16);I[E+0]=M+Q,I[E+1]=O+j,I[E+2]=O-j,I[E+3]=M-Q,E+=4,c++}for(N=E=0;4>N;++N)M=(s=I[E+0]+4)+I[E+8],O=s-I[E+8],j=(35468*I[E+4]>>16)-xr(I[E+12]),Kr(g,_,0,0,M+(Q=xr(I[E+4])+(35468*I[E+12]>>16))),Kr(g,_,1,0,O+j),Kr(g,_,2,0,O-j),Kr(g,_,3,0,M-Q),E++,_+=32}function Ws(s,c,g,_){var N=s[c+0]+4,E=35468*s[c+4]>>16,I=xr(s[c+4]),M=35468*s[c+1]>>16;oa(g,_,0,N+I,s=xr(s[c+1]),M),oa(g,_,1,N+E,s,M),oa(g,_,2,N-E,s,M),oa(g,_,3,N-I,s,M)}function el(s,c,g,_,N){Ja(s,c,g,_),N&&Ja(s,c+16,g,_+4)}function $s(s,c,g,_){wa(s,c+0,g,_,1),wa(s,c+32,g,_+128,1)}function rl(s,c,g,_){var N;for(s=s[c+0]+4,N=0;4>N;++N)for(c=0;4>c;++c)Kr(g,_,c,N,s)}function Ys(s,c,g,_){s[c+0]&&ri(s,c+0,g,_),s[c+16]&&ri(s,c+16,g,_+4),s[c+32]&&ri(s,c+32,g,_+128),s[c+48]&&ri(s,c+48,g,_+128+4)}function il(s,c,g,_){var N,E=n(16);for(N=0;4>N;++N){var I=s[c+0+N]+s[c+12+N],M=s[c+4+N]+s[c+8+N],O=s[c+4+N]-s[c+8+N],j=s[c+0+N]-s[c+12+N];E[0+N]=I+M,E[8+N]=I-M,E[4+N]=j+O,E[12+N]=j-O}for(N=0;4>N;++N)I=(s=E[0+4*N]+3)+E[3+4*N],M=E[1+4*N]+E[2+4*N],O=E[1+4*N]-E[2+4*N],j=s-E[3+4*N],g[_+0]=I+M>>3,g[_+16]=j+O>>3,g[_+32]=I-M>>3,g[_+48]=j-O>>3,_+=64}function Qa(s,c,g){var _,N=c-32,E=Tr,I=255-s[N-1];for(_=0;_<g;++_){var M,O=E,j=I+s[c-1];for(M=0;M<g;++M)s[c+M]=O[j+s[N+M]];c+=32}}function nl(s,c){Qa(s,c,4)}function al(s,c){Qa(s,c,8)}function sl(s,c){Qa(s,c,16)}function Fi(s,c){var g;for(g=0;16>g;++g)r(s,c+32*g,s,c-32,16)}function ha(s,c){var g;for(g=16;0<g;--g)i(s,c,s[c-1],16),c+=32}function la(s,c,g){var _;for(_=0;16>_;++_)i(c,g+32*_,s,16)}function Xs(s,c){var g,_=16;for(g=0;16>g;++g)_+=s[c-1+32*g]+s[c+g-32];la(_>>5,s,c)}function lr(s,c){var g,_=8;for(g=0;16>g;++g)_+=s[c-1+32*g];la(_>>4,s,c)}function ol(s,c){var g,_=8;for(g=0;16>g;++g)_+=s[c+g-32];la(_>>4,s,c)}function Ks(s,c){la(128,s,c)}function Yt(s,c,g){return s+2*c+g+2>>2}function hl(s,c){var g,_=c-32;for(_=new Uint8Array([Yt(s[_-1],s[_+0],s[_+1]),Yt(s[_+0],s[_+1],s[_+2]),Yt(s[_+1],s[_+2],s[_+3]),Yt(s[_+2],s[_+3],s[_+4])]),g=0;4>g;++g)r(s,c+32*g,_,0,_.length)}function ll(s,c){var g=s[c-1],_=s[c-1+32],N=s[c-1+64],E=s[c-1+96];wt(s,c+0,16843009*Yt(s[c-1-32],g,_)),wt(s,c+32,16843009*Yt(g,_,N)),wt(s,c+64,16843009*Yt(_,N,E)),wt(s,c+96,16843009*Yt(N,E,E))}function bi(s,c){var g,_=4;for(g=0;4>g;++g)_+=s[c+g-32]+s[c-1+32*g];for(_>>=3,g=0;4>g;++g)i(s,c+32*g,_,4)}function Js(s,c){var g=s[c-1+0],_=s[c-1+32],N=s[c-1+64],E=s[c-1-32],I=s[c+0-32],M=s[c+1-32],O=s[c+2-32],j=s[c+3-32];s[c+0+96]=Yt(_,N,s[c-1+96]),s[c+1+96]=s[c+0+64]=Yt(g,_,N),s[c+2+96]=s[c+1+64]=s[c+0+32]=Yt(E,g,_),s[c+3+96]=s[c+2+64]=s[c+1+32]=s[c+0+0]=Yt(I,E,g),s[c+3+64]=s[c+2+32]=s[c+1+0]=Yt(M,I,E),s[c+3+32]=s[c+2+0]=Yt(O,M,I),s[c+3+0]=Yt(j,O,M)}function Qs(s,c){var g=s[c+1-32],_=s[c+2-32],N=s[c+3-32],E=s[c+4-32],I=s[c+5-32],M=s[c+6-32],O=s[c+7-32];s[c+0+0]=Yt(s[c+0-32],g,_),s[c+1+0]=s[c+0+32]=Yt(g,_,N),s[c+2+0]=s[c+1+32]=s[c+0+64]=Yt(_,N,E),s[c+3+0]=s[c+2+32]=s[c+1+64]=s[c+0+96]=Yt(N,E,I),s[c+3+32]=s[c+2+64]=s[c+1+96]=Yt(E,I,M),s[c+3+64]=s[c+2+96]=Yt(I,M,O),s[c+3+96]=Yt(M,O,O)}function ca(s,c){var g=s[c-1+0],_=s[c-1+32],N=s[c-1+64],E=s[c-1-32],I=s[c+0-32],M=s[c+1-32],O=s[c+2-32],j=s[c+3-32];s[c+0+0]=s[c+1+64]=E+I+1>>1,s[c+1+0]=s[c+2+64]=I+M+1>>1,s[c+2+0]=s[c+3+64]=M+O+1>>1,s[c+3+0]=O+j+1>>1,s[c+0+96]=Yt(N,_,g),s[c+0+64]=Yt(_,g,E),s[c+0+32]=s[c+1+96]=Yt(g,E,I),s[c+1+32]=s[c+2+96]=Yt(E,I,M),s[c+2+32]=s[c+3+96]=Yt(I,M,O),s[c+3+32]=Yt(M,O,j)}function Za(s,c){var g=s[c+0-32],_=s[c+1-32],N=s[c+2-32],E=s[c+3-32],I=s[c+4-32],M=s[c+5-32],O=s[c+6-32],j=s[c+7-32];s[c+0+0]=g+_+1>>1,s[c+1+0]=s[c+0+64]=_+N+1>>1,s[c+2+0]=s[c+1+64]=N+E+1>>1,s[c+3+0]=s[c+2+64]=E+I+1>>1,s[c+0+32]=Yt(g,_,N),s[c+1+32]=s[c+0+96]=Yt(_,N,E),s[c+2+32]=s[c+1+96]=Yt(N,E,I),s[c+3+32]=s[c+2+96]=Yt(E,I,M),s[c+3+64]=Yt(I,M,O),s[c+3+96]=Yt(M,O,j)}function cl(s,c){var g=s[c-1+0],_=s[c-1+32],N=s[c-1+64],E=s[c-1+96];s[c+0+0]=g+_+1>>1,s[c+2+0]=s[c+0+32]=_+N+1>>1,s[c+2+32]=s[c+0+64]=N+E+1>>1,s[c+1+0]=Yt(g,_,N),s[c+3+0]=s[c+1+32]=Yt(_,N,E),s[c+3+32]=s[c+1+64]=Yt(N,E,E),s[c+3+64]=s[c+2+64]=s[c+0+96]=s[c+1+96]=s[c+2+96]=s[c+3+96]=E}function ul(s,c){var g=s[c-1+0],_=s[c-1+32],N=s[c-1+64],E=s[c-1+96],I=s[c-1-32],M=s[c+0-32],O=s[c+1-32],j=s[c+2-32];s[c+0+0]=s[c+2+32]=g+I+1>>1,s[c+0+32]=s[c+2+64]=_+g+1>>1,s[c+0+64]=s[c+2+96]=N+_+1>>1,s[c+0+96]=E+N+1>>1,s[c+3+0]=Yt(M,O,j),s[c+2+0]=Yt(I,M,O),s[c+1+0]=s[c+3+32]=Yt(g,I,M),s[c+1+32]=s[c+3+64]=Yt(_,g,I),s[c+1+64]=s[c+3+96]=Yt(N,_,g),s[c+1+96]=Yt(E,N,_)}function fl(s,c){var g;for(g=0;8>g;++g)r(s,c+32*g,s,c-32,8)}function ts(s,c){var g;for(g=0;8>g;++g)i(s,c,s[c-1],8),c+=32}function kn(s,c,g){var _;for(_=0;8>_;++_)i(c,g+32*_,s,8)}function Ki(s,c){var g,_=8;for(g=0;8>g;++g)_+=s[c+g-32]+s[c-1+32*g];kn(_>>4,s,c)}function dl(s,c){var g,_=4;for(g=0;8>g;++g)_+=s[c+g-32];kn(_>>3,s,c)}function Fn(s,c){var g,_=4;for(g=0;8>g;++g)_+=s[c-1+32*g];kn(_>>3,s,c)}function es(s,c){kn(128,s,c)}function ua(s,c,g){var _=s[c-g],N=s[c+0],E=3*(N-_)+wl[1020+s[c-2*g]-s[c+g]],I=ho[112+(E+4>>3)];s[c-g]=Tr[255+_+ho[112+(E+3>>3)]],s[c+0]=Tr[255+N-I]}function Zs(s,c,g,_){var N=s[c+0],E=s[c+g];return Gr[255+s[c-2*g]-s[c-g]]>_||Gr[255+E-N]>_}function to(s,c,g,_){return 4*Gr[255+s[c-g]-s[c+0]]+Gr[255+s[c-2*g]-s[c+g]]<=_}function eo(s,c,g,_,N){var E=s[c-3*g],I=s[c-2*g],M=s[c-g],O=s[c+0],j=s[c+g],Q=s[c+2*g],ct=s[c+3*g];return 4*Gr[255+M-O]+Gr[255+I-j]>_?0:Gr[255+s[c-4*g]-E]<=N&&Gr[255+E-I]<=N&&Gr[255+I-M]<=N&&Gr[255+ct-Q]<=N&&Gr[255+Q-j]<=N&&Gr[255+j-O]<=N}function ro(s,c,g,_){var N=2*_+1;for(_=0;16>_;++_)to(s,c+_,g,N)&&ua(s,c+_,g)}function Ei(s,c,g,_){var N=2*_+1;for(_=0;16>_;++_)to(s,c+_*g,1,N)&&ua(s,c+_*g,1)}function Ji(s,c,g,_){var N;for(N=3;0<N;--N)ro(s,c+=4*g,g,_)}function pl(s,c,g,_){var N;for(N=3;0<N;--N)Ei(s,c+=4,g,_)}function Qi(s,c,g,_,N,E,I,M){for(E=2*E+1;0<N--;){if(eo(s,c,g,E,I))if(Zs(s,c,g,M))ua(s,c,g);else{var O=s,j=c,Q=g,ct=O[j-2*Q],ut=O[j-Q],at=O[j+0],_t=O[j+Q],pt=O[j+2*Q],Z=27*(bt=wl[1020+3*(at-ut)+wl[1020+ct-_t]])+63>>7,it=18*bt+63>>7,bt=9*bt+63>>7;O[j-3*Q]=Tr[255+O[j-3*Q]+bt],O[j-2*Q]=Tr[255+ct+it],O[j-Q]=Tr[255+ut+Z],O[j+0]=Tr[255+at-Z],O[j+Q]=Tr[255+_t-it],O[j+2*Q]=Tr[255+pt-bt]}c+=_}}function Jr(s,c,g,_,N,E,I,M){for(E=2*E+1;0<N--;){if(eo(s,c,g,E,I))if(Zs(s,c,g,M))ua(s,c,g);else{var O=s,j=c,Q=g,ct=O[j-Q],ut=O[j+0],at=O[j+Q],_t=ho[112+((pt=3*(ut-ct))+4>>3)],pt=ho[112+(pt+3>>3)],Z=_t+1>>1;O[j-2*Q]=Tr[255+O[j-2*Q]+Z],O[j-Q]=Tr[255+ct+pt],O[j+0]=Tr[255+ut-_t],O[j+Q]=Tr[255+at-Z]}c+=_}}function rs(s,c,g,_,N,E){Qi(s,c,g,1,16,_,N,E)}function En(s,c,g,_,N,E){Qi(s,c,1,g,16,_,N,E)}function gl(s,c,g,_,N,E){var I;for(I=3;0<I;--I)Jr(s,c+=4*g,g,1,16,_,N,E)}function fa(s,c,g,_,N,E){var I;for(I=3;0<I;--I)Jr(s,c+=4,1,g,16,_,N,E)}function vl(s,c,g,_,N,E,I,M){Qi(s,c,N,1,8,E,I,M),Qi(g,_,N,1,8,E,I,M)}function is(s,c,g,_,N,E,I,M){Qi(s,c,1,N,8,E,I,M),Qi(g,_,1,N,8,E,I,M)}function ns(s,c,g,_,N,E,I,M){Jr(s,c+4*N,N,1,8,E,I,M),Jr(g,_+4*N,N,1,8,E,I,M)}function io(s,c,g,_,N,E,I,M){Jr(s,c+4,1,N,8,E,I,M),Jr(g,_+4,1,N,8,E,I,M)}function da(){this.ba=new Hr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Oe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function as(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ss(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function no(){this.ua=0,this.Wa=new $,this.vb=new $,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new T}function ml(){this.xb=this.a=0,this.l=new sa,this.ca=new Hr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new no,this.ab=0,this.gc=o(4,ss),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function In(s,c,g,_,N,E,I){for(s=s==null?0:s[c+0],c=0;c<I;++c)N[E+c]=s+g[_+c]&255,s=N[E+c]}function os(s,c,g,_,N,E,I){var M;if(s==null)In(null,null,g,_,N,E,I);else for(M=0;M<I;++M)N[E+M]=s[c+M]+g[_+M]&255}function Zi(s,c,g,_,N,E,I){if(s==null)In(null,null,g,_,N,E,I);else{var M,O=s[c+0],j=O,Q=O;for(M=0;M<I;++M)j=Q+(O=s[c+M])-j,Q=g[_+M]+(-256&j?0>j?0:255:j)&255,j=O,N[E+M]=Q}}function hs(s,c,g,_){var N=c.width,E=c.o;if(t(s!=null&&c!=null),0>g||0>=_||g+_>E)return null;if(!s.Cc){if(s.ga==null){var I;if(s.ga=new pa,(I=s.ga==null)||(I=c.width*c.o,t(s.Gb.length==0),s.Gb=n(I),s.Uc=0,s.Gb==null?I=0:(s.mb=s.Gb,s.nb=s.Uc,s.rc=null,I=1),I=!I),!I){I=s.ga;var M=s.Fa,O=s.P,j=s.qc,Q=s.mb,ct=s.nb,ut=O+1,at=j-1,_t=I.l;if(t(M!=null&&Q!=null&&c!=null),on[0]=null,on[1]=In,on[2]=os,on[3]=Zi,I.ca=Q,I.tb=ct,I.c=c.width,I.i=c.height,t(0<I.c&&0<I.i),1>=j)c=0;else if(I.$a=M[O+0]>>0&3,I.Z=M[O+0]>>2&3,I.Lc=M[O+0]>>4&3,O=M[O+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||O)c=0;else if(_t.put=di,_t.ac=sr,_t.bc=pi,_t.ma=I,_t.width=c.width,_t.height=c.height,_t.Da=c.Da,_t.v=c.v,_t.va=c.va,_t.j=c.j,_t.o=c.o,I.$a)t:{t(I.$a==1),c=Dr();e:for(;;){if(c==null){c=0;break t}if(t(I!=null),I.mc=c,c.c=I.c,c.i=I.i,c.l=I.l,c.l.ma=I,c.l.width=I.c,c.l.height=I.i,c.a=0,nt(c.m,M,ut,at),!mi(I.c,I.i,1,c,null)||(c.ab==1&&c.gc[0].hc==3&&ki(c.s)?(I.ic=1,M=c.c*c.i,c.Ta=null,c.Ua=0,c.V=n(M),c.Ba=0,c.V==null?(c.a=1,c=0):c=1):(I.ic=0,c=Pn(c,I.c)),!c))break e;c=1;break t}I.mc=null,c=0}else c=at>=I.c*I.i;I=!c}if(I)return null;s.ga.Lc!=1?s.Ga=0:_=E-g}t(s.ga!=null),t(g+_<=E);t:{if(c=(M=s.ga).c,E=M.l.o,M.$a==0){if(ut=s.rc,at=s.Vc,_t=s.Fa,O=s.P+1+g*c,j=s.mb,Q=s.nb+g*c,t(O<=s.P+s.qc),M.Z!=0)for(t(on[M.Z]!=null),I=0;I<_;++I)on[M.Z](ut,at,_t,O,j,Q,c),ut=j,at=Q,Q+=c,O+=c;else for(I=0;I<_;++I)r(j,Q,_t,O,c),ut=j,at=Q,Q+=c,O+=c;s.rc=ut,s.Vc=at}else{if(t(M.mc!=null),c=g+_,t((I=M.mc)!=null),t(c<=I.i),I.C>=c)c=1;else if(M.ic||ht(),M.ic){M=I.V,ut=I.Ba,at=I.c;var pt=I.i,Z=(_t=1,O=I.$/at,j=I.$%at,Q=I.m,ct=I.s,I.$),it=at*pt,bt=at*c,St=ct.wc,yt=Z<bt?$e(ct,j,O):null;t(Z<=it),t(c<=pt),t(ki(ct));e:for(;;){for(;!Q.h&&Z<bt;){if(j&St||(yt=$e(ct,j,O)),t(yt!=null),rt(Q),256>(pt=Sr(yt.G[0],yt.H[0],Q)))M[ut+Z]=pt,++Z,++j>=at&&(j=0,++O<=c&&!(O%16)&&Yr(I,O));else{if(!(280>pt)){_t=0;break e}pt=Wr(pt-256,Q);var Mt,Pt=Sr(yt.G[4],yt.H[4],Q);if(rt(Q),!(Z>=(Pt=gi(at,Pt=Wr(Pt,Q)))&&it-Z>=pt)){_t=0;break e}for(Mt=0;Mt<pt;++Mt)M[ut+Z+Mt]=M[ut+Z+Mt-Pt];for(Z+=pt,j+=pt;j>=at;)j-=at,++O<=c&&!(O%16)&&Yr(I,O);Z<bt&&j&St&&(yt=$e(ct,j,O))}t(Q.h==V(Q))}Yr(I,O>c?c:O);break e}!_t||Q.h&&Z<it?(_t=0,I.a=Q.h?5:3):I.$=Z,c=_t}else c=Xr(I,I.V,I.Ba,I.c,I.i,c,ea);if(!c){_=0;break t}}g+_>=E&&(s.Cc=1),_=1}if(!_)return null;if(s.Cc&&((_=s.ga)!=null&&(_.mc=null),s.ga=null,0<s.Ga))return alert("todo:WebPDequantizeLevels"),null}return s.nb+g*N}function d(s,c,g,_,N,E){for(;0<N--;){var I,M=s,O=c+(g?1:0),j=s,Q=c+(g?0:3);for(I=0;I<_;++I){var ct=j[Q+4*I];ct!=255&&(ct*=32897,M[O+4*I+0]=M[O+4*I+0]*ct>>23,M[O+4*I+1]=M[O+4*I+1]*ct>>23,M[O+4*I+2]=M[O+4*I+2]*ct>>23)}c+=E}}function L(s,c,g,_,N){for(;0<_--;){var E;for(E=0;E<g;++E){var I=s[c+2*E+0],M=15&(j=s[c+2*E+1]),O=4369*M,j=(240&j|j>>4)*O>>16;s[c+2*E+0]=(240&I|I>>4)*O>>16&240|(15&I|I<<4)*O>>16>>4&15,s[c+2*E+1]=240&j|M}c+=N}}function H(s,c,g,_,N,E,I,M){var O,j,Q=255;for(j=0;j<N;++j){for(O=0;O<_;++O){var ct=s[c+O];E[I+4*O]=ct,Q&=ct}c+=g,I+=M}return Q!=255}function K(s,c,g,_,N){var E;for(E=0;E<N;++E)g[_+E]=s[c+E]>>8}function ht(){an=d,xa=L,oo=H,W1=K}function gt(s,c,g){C[s]=function(_,N,E,I,M,O,j,Q,ct,ut,at,_t,pt,Z,it,bt,St){var yt,Mt=St-1>>1,Pt=M[O+0]|j[Q+0]<<16,Ut=ct[ut+0]|at[_t+0]<<16;t(_!=null);var kt=3*Pt+Ut+131074>>2;for(c(_[N+0],255&kt,kt>>16,pt,Z),E!=null&&(kt=3*Ut+Pt+131074>>2,c(E[I+0],255&kt,kt>>16,it,bt)),yt=1;yt<=Mt;++yt){var de=M[O+yt]|j[Q+yt]<<16,me=ct[ut+yt]|at[_t+yt]<<16,ue=Pt+de+Ut+me+524296,se=ue+2*(de+Ut)>>3;kt=se+Pt>>1,Pt=(ue=ue+2*(Pt+me)>>3)+de>>1,c(_[N+2*yt-1],255&kt,kt>>16,pt,Z+(2*yt-1)*g),c(_[N+2*yt-0],255&Pt,Pt>>16,pt,Z+(2*yt-0)*g),E!=null&&(kt=ue+Ut>>1,Pt=se+me>>1,c(E[I+2*yt-1],255&kt,kt>>16,it,bt+(2*yt-1)*g),c(E[I+2*yt+0],255&Pt,Pt>>16,it,bt+(2*yt+0)*g)),Pt=de,Ut=me}1&St||(kt=3*Pt+Ut+131074>>2,c(_[N+St-1],255&kt,kt>>16,pt,Z+(St-1)*g),E!=null&&(kt=3*Ut+Pt+131074>>2,c(E[I+St-1],255&kt,kt>>16,it,bt+(St-1)*g)))}}function xt(){qr[lo]=K2,qr[co]=i0,qr[Q1]=J2,qr[uo]=n0,qr[fo]=a0,qr[Sl]=s0,qr[Z1]=Q2,qr[xl]=i0,qr[Al]=n0,qr[po]=a0,qr[Nl]=s0}function Tt(s){return s&~Z2?0>s?0:255:s>>o0}function Gt(s,c){return Tt((19077*s>>8)+(26149*c>>8)-14234)}function Qt(s,c,g){return Tt((19077*s>>8)-(6419*c>>8)-(13320*g>>8)+8708)}function ee(s,c){return Tt((19077*s>>8)+(33050*c>>8)-17685)}function he(s,c,g,_,N){_[N+0]=Gt(s,g),_[N+1]=Qt(s,c,g),_[N+2]=ee(s,c)}function Ie(s,c,g,_,N){_[N+0]=ee(s,c),_[N+1]=Qt(s,c,g),_[N+2]=Gt(s,g)}function Re(s,c,g,_,N){var E=Qt(s,c,g);c=E<<3&224|ee(s,c)>>3,_[N+0]=248&Gt(s,g)|E>>5,_[N+1]=c}function Ye(s,c,g,_,N){var E=240&ee(s,c)|15;_[N+0]=240&Gt(s,g)|Qt(s,c,g)>>4,_[N+1]=E}function cr(s,c,g,_,N){_[N+0]=255,he(s,c,g,_,N+1)}function rr(s,c,g,_,N){Ie(s,c,g,_,N),_[N+3]=255}function Qr(s,c,g,_,N){he(s,c,g,_,N),_[N+3]=255}function Ir(s,c){return 0>s?0:s>c?c:s}function Ii(s,c,g){C[s]=function(_,N,E,I,M,O,j,Q,ct){for(var ut=Q+(-2&ct)*g;Q!=ut;)c(_[N+0],E[I+0],M[O+0],j,Q),c(_[N+1],E[I+0],M[O+0],j,Q+g),N+=2,++I,++O,Q+=2*g;1&ct&&c(_[N+0],E[I+0],M[O+0],j,Q)}}function ao(s,c,g){return g==0?s==0?c==0?6:5:c==0?4:0:g}function ls(s,c,g,_,N){switch(s>>>30){case 3:wa(c,g,_,N,0);break;case 2:vs(c,g,_,N);break;case 1:ri(c,g,_,N)}}function cs(s,c){var g,_,N=c.M,E=c.Nb,I=s.oc,M=s.pc+40,O=s.oc,j=s.pc+584,Q=s.oc,ct=s.pc+600;for(g=0;16>g;++g)I[M+32*g-1]=129;for(g=0;8>g;++g)O[j+32*g-1]=129,Q[ct+32*g-1]=129;for(0<N?I[M-1-32]=O[j-1-32]=Q[ct-1-32]=129:(i(I,M-32-1,127,21),i(O,j-32-1,127,9),i(Q,ct-32-1,127,9)),_=0;_<s.za;++_){var ut=c.ya[c.aa+_];if(0<_){for(g=-1;16>g;++g)r(I,M+32*g-4,I,M+32*g+12,4);for(g=-1;8>g;++g)r(O,j+32*g-4,O,j+32*g+4,4),r(Q,ct+32*g-4,Q,ct+32*g+4,4)}var at=s.Gd,_t=s.Hd+_,pt=ut.ad,Z=ut.Hc;if(0<N&&(r(I,M-32,at[_t].y,0,16),r(O,j-32,at[_t].f,0,8),r(Q,ct-32,at[_t].ea,0,8)),ut.Za){var it=I,bt=M-32+16;for(0<N&&(_>=s.za-1?i(it,bt,at[_t].y[15],4):r(it,bt,at[_t+1].y,0,4)),g=0;4>g;g++)it[bt+128+g]=it[bt+256+g]=it[bt+384+g]=it[bt+0+g];for(g=0;16>g;++g,Z<<=2)it=I,bt=M+l0[g],ii[ut.Ob[g]](it,bt),ls(Z,pt,16*+g,it,bt)}else if(it=ao(_,N,ut.Ob[0]),sn[it](I,M),Z!=0)for(g=0;16>g;++g,Z<<=2)ls(Z,pt,16*+g,I,M+l0[g]);for(g=ut.Gc,it=ao(_,N,ut.Dd),Di[it](O,j),Di[it](Q,ct),Z=pt,it=O,bt=j,255&(ut=g>>0)&&(170&ut?rn(Z,256,it,bt):Mi(Z,256,it,bt)),ut=Q,Z=ct,255&(g>>=8)&&(170&g?rn(pt,320,ut,Z):Mi(pt,320,ut,Z)),N<s.Ub-1&&(r(at[_t].y,0,I,M+480,16),r(at[_t].f,0,O,j+224,8),r(at[_t].ea,0,Q,ct+224,8)),g=8*E*s.B,at=s.sa,_t=s.ta+16*_+16*E*s.R,pt=s.qa,ut=s.ra+8*_+g,Z=s.Ha,it=s.Ia+8*_+g,g=0;16>g;++g)r(at,_t+g*s.R,I,M+32*g,16);for(g=0;8>g;++g)r(pt,ut+g*s.B,O,j+32*g,8),r(Z,it+g*s.B,Q,ct+32*g,8)}}function ga(s,c,g,_,N,E,I,M,O){var j=[0],Q=[0],ct=0,ut=O!=null?O.kd:0,at=O??new as;if(s==null||12>g)return 7;at.data=s,at.w=c,at.ha=g,c=[c],g=[g],at.gb=[at.gb];t:{var _t=c,pt=g,Z=at.gb;if(t(s!=null),t(pt!=null),t(Z!=null),Z[0]=0,12<=pt[0]&&!e(s,_t[0],"RIFF")){if(e(s,_t[0]+8,"WEBP")){Z=3;break t}var it=Lt(s,_t[0]+4);if(12>it||4294967286<it){Z=3;break t}if(ut&&it>pt[0]-8){Z=7;break t}Z[0]=it,_t[0]+=12,pt[0]-=12}Z=0}if(Z!=0)return Z;for(it=0<at.gb[0],g=g[0];;){t:{var bt=s;pt=c,Z=g;var St=j,yt=Q,Mt=_t=[0];if((kt=ct=[ct])[0]=0,8>Z[0])Z=7;else{if(!e(bt,pt[0],"VP8X")){if(Lt(bt,pt[0]+4)!=10){Z=3;break t}if(18>Z[0]){Z=7;break t}var Pt=Lt(bt,pt[0]+8),Ut=1+At(bt,pt[0]+12);if(2147483648<=Ut*(bt=1+At(bt,pt[0]+15))){Z=3;break t}Mt!=null&&(Mt[0]=Pt),St!=null&&(St[0]=Ut),yt!=null&&(yt[0]=bt),pt[0]+=18,Z[0]-=18,kt[0]=1}Z=0}}if(ct=ct[0],_t=_t[0],Z!=0)return Z;if(pt=!!(2&_t),!it&&ct)return 3;if(E!=null&&(E[0]=!!(16&_t)),I!=null&&(I[0]=pt),M!=null&&(M[0]=0),I=j[0],_t=Q[0],ct&&pt&&O==null){Z=0;break}if(4>g){Z=7;break}if(it&&ct||!it&&!ct&&!e(s,c[0],"ALPH")){g=[g],at.na=[at.na],at.P=[at.P],at.Sa=[at.Sa];t:{Pt=s,Z=c,it=g;var kt=at.gb;St=at.na,yt=at.P,Mt=at.Sa,Ut=22,t(Pt!=null),t(it!=null),bt=Z[0];var de=it[0];for(t(St!=null),t(Mt!=null),St[0]=null,yt[0]=null,Mt[0]=0;;){if(Z[0]=bt,it[0]=de,8>de){Z=7;break t}var me=Lt(Pt,bt+4);if(4294967286<me){Z=3;break t}var ue=8+me+1&-2;if(Ut+=ue,0<kt&&Ut>kt){Z=3;break t}if(!e(Pt,bt,"VP8 ")||!e(Pt,bt,"VP8L")){Z=0;break t}if(de[0]<ue){Z=7;break t}e(Pt,bt,"ALPH")||(St[0]=Pt,yt[0]=bt+8,Mt[0]=me),bt+=ue,de-=ue}}if(g=g[0],at.na=at.na[0],at.P=at.P[0],at.Sa=at.Sa[0],Z!=0)break}g=[g],at.Ja=[at.Ja],at.xa=[at.xa];t:if(kt=s,Z=c,it=g,St=at.gb[0],yt=at.Ja,Mt=at.xa,Pt=Z[0],bt=!e(kt,Pt,"VP8 "),Ut=!e(kt,Pt,"VP8L"),t(kt!=null),t(it!=null),t(yt!=null),t(Mt!=null),8>it[0])Z=7;else{if(bt||Ut){if(kt=Lt(kt,Pt+4),12<=St&&kt>St-12){Z=3;break t}if(ut&&kt>it[0]-8){Z=7;break t}yt[0]=kt,Z[0]+=8,it[0]-=8,Mt[0]=Ut}else Mt[0]=5<=it[0]&&kt[Pt+0]==47&&!(kt[Pt+4]>>5),yt[0]=it[0];Z=0}if(g=g[0],at.Ja=at.Ja[0],at.xa=at.xa[0],c=c[0],Z!=0)break;if(4294967286<at.Ja)return 3;if(M==null||pt||(M[0]=at.xa?2:1),I=[I],_t=[_t],at.xa){if(5>g){Z=7;break}M=I,ut=_t,pt=E,s==null||5>g?s=0:5<=g&&s[c+0]==47&&!(s[c+4]>>5)?(it=[0],kt=[0],St=[0],nt(yt=new F,s,c,g),zt(yt,it,kt,St)?(M!=null&&(M[0]=it[0]),ut!=null&&(ut[0]=kt[0]),pt!=null&&(pt[0]=St[0]),s=1):s=0):s=0}else{if(10>g){Z=7;break}M=_t,s==null||10>g||!zs(s,c+3,g-3)?s=0:(ut=s[c+0]|s[c+1]<<8|s[c+2]<<16,pt=16383&(s[c+7]<<8|s[c+6]),s=16383&(s[c+9]<<8|s[c+8]),1&ut||3<(ut>>1&7)||!(ut>>4&1)||ut>>5>=at.Ja||!pt||!s?s=0:(I&&(I[0]=pt),M&&(M[0]=s),s=1))}if(!s||(I=I[0],_t=_t[0],ct&&(j[0]!=I||Q[0]!=_t)))return 3;O!=null&&(O[0]=at,O.offset=c-O.w,t(4294967286>c-O.w),t(O.offset==O.ha-g));break}return Z==0||Z==7&&ct&&O==null?(E!=null&&(E[0]|=at.na!=null&&0<at.na.length),_!=null&&(_[0]=I),N!=null&&(N[0]=_t),0):Z}function us(s,c,g){var _=c.width,N=c.height,E=0,I=0,M=_,O=N;if(c.Da=s!=null&&0<s.Da,c.Da&&(M=s.cd,O=s.bd,E=s.v,I=s.j,11>g||(E&=-2,I&=-2),0>E||0>I||0>=M||0>=O||E+M>_||I+O>N))return 0;if(c.v=E,c.j=I,c.va=E+M,c.o=I+O,c.U=M,c.T=O,c.da=s!=null&&0<s.da,c.da){if(!qt(M,O,g=[s.ib],E=[s.hb]))return 0;c.ib=g[0],c.hb=E[0]}return c.ob=s!=null&&s.ob,c.Kb=s==null||!s.Sd,c.da&&(c.ob=c.ib<3*_/4&&c.hb<3*N/4,c.Kb=0),1}function fs(s){if(s==null)return 2;if(11>s.S){var c=s.f.RGBA;c.fb+=(s.height-1)*c.A,c.A=-c.A}else c=s.f.kb,s=s.height,c.O+=(s-1)*c.fa,c.fa=-c.fa,c.N+=(s-1>>1)*c.Ab,c.Ab=-c.Ab,c.W+=(s-1>>1)*c.Db,c.Db=-c.Db,c.F!=null&&(c.J+=(s-1)*c.lb,c.lb=-c.lb);return 0}function va(s,c,g,_){if(_==null||0>=s||0>=c)return 2;if(g!=null){if(g.Da){var N=g.cd,E=g.bd,I=-2&g.v,M=-2&g.j;if(0>I||0>M||0>=N||0>=E||I+N>s||M+E>c)return 2;s=N,c=E}if(g.da){if(!qt(s,c,N=[g.ib],E=[g.hb]))return 2;s=N[0],c=E[0]}}_.width=s,_.height=c;t:{var O=_.width,j=_.height;if(s=_.S,0>=O||0>=j||!(s>=lo&&13>s))s=2;else{if(0>=_.Rd&&_.sd==null){I=E=N=c=0;var Q=(M=O*c0[s])*j;if(11>s||(E=(j+1)/2*(c=(O+1)/2),s==12&&(I=(N=O)*j)),(j=n(Q+2*E+I))==null){s=1;break t}_.sd=j,11>s?((O=_.f.RGBA).eb=j,O.fb=0,O.A=M,O.size=Q):((O=_.f.kb).y=j,O.O=0,O.fa=M,O.Fd=Q,O.f=j,O.N=0+Q,O.Ab=c,O.Cd=E,O.ea=j,O.W=0+Q+E,O.Db=c,O.Ed=E,s==12&&(O.F=j,O.J=0+Q+2*E),O.Tc=I,O.lb=N)}if(c=1,N=_.S,E=_.width,I=_.height,N>=lo&&13>N)if(11>N)s=_.f.RGBA,c&=(M=Math.abs(s.A))*(I-1)+E<=s.size,c&=M>=E*c0[N],c&=s.eb!=null;else{s=_.f.kb,M=(E+1)/2,Q=(I+1)/2,O=Math.abs(s.fa),j=Math.abs(s.Ab);var ct=Math.abs(s.Db),ut=Math.abs(s.lb),at=ut*(I-1)+E;c&=O*(I-1)+E<=s.Fd,c&=j*(Q-1)+M<=s.Cd,c=(c&=ct*(Q-1)+M<=s.Ed)&O>=E&j>=M&ct>=M,c&=s.y!=null,c&=s.f!=null,c&=s.ea!=null,N==12&&(c&=ut>=E,c&=at<=s.Tc,c&=s.F!=null)}else c=0;s=c?0:2}}return s!=0||g!=null&&g.fd&&(s=fs(_)),s}var Ar=64,ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ba=24,ya=32,ds=8,Nr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ct("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(s){return s},C.Predictor2=function(s,c,g){return c[g+0]},C.Predictor3=function(s,c,g){return c[g+1]},C.Predictor4=function(s,c,g){return c[g-1]},C.Predictor5=function(s,c,g){return Ft(Ft(s,c[g+1]),c[g+0])},C.Predictor6=function(s,c,g){return Ft(s,c[g-1])},C.Predictor7=function(s,c,g){return Ft(s,c[g+0])},C.Predictor8=function(s,c,g){return Ft(c[g-1],c[g+0])},C.Predictor9=function(s,c,g){return Ft(c[g+0],c[g+1])},C.Predictor10=function(s,c,g){return Ft(Ft(s,c[g-1]),Ft(c[g+0],c[g+1]))},C.Predictor11=function(s,c,g){var _=c[g+0];return 0>=te(_>>24&255,s>>24&255,(c=c[g-1])>>24&255)+te(_>>16&255,s>>16&255,c>>16&255)+te(_>>8&255,s>>8&255,c>>8&255)+te(255&_,255&s,255&c)?_:s},C.Predictor12=function(s,c,g){var _=c[g+0];return(jt((s>>24&255)+(_>>24&255)-((c=c[g-1])>>24&255))<<24|jt((s>>16&255)+(_>>16&255)-(c>>16&255))<<16|jt((s>>8&255)+(_>>8&255)-(c>>8&255))<<8|jt((255&s)+(255&_)-(255&c)))>>>0},C.Predictor13=function(s,c,g){var _=c[g-1];return(Xt((s=Ft(s,c[g+0]))>>24&255,_>>24&255)<<24|Xt(s>>16&255,_>>16&255)<<16|Xt(s>>8&255,_>>8&255)<<8|Xt(s>>0&255,_>>0&255))>>>0};var bl=C.PredictorAdd0;C.PredictorAdd1=ie,Ct("Predictor2","PredictorAdd2"),Ct("Predictor3","PredictorAdd3"),Ct("Predictor4","PredictorAdd4"),Ct("Predictor5","PredictorAdd5"),Ct("Predictor6","PredictorAdd6"),Ct("Predictor7","PredictorAdd7"),Ct("Predictor8","PredictorAdd8"),Ct("Predictor9","PredictorAdd9"),Ct("Predictor10","PredictorAdd10"),Ct("Predictor11","PredictorAdd11"),Ct("Predictor12","PredictorAdd12"),Ct("Predictor13","PredictorAdd13");var ps=C.PredictorAdd2;ae("ColorIndexInverseTransform","MapARGB","32b",function(s){return s>>8&255},function(s){return s}),ae("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(s){return s},function(s){return s>>8&255});var so,Zr=C.ColorIndexInverseTransform,gs=C.MapARGB,yl=C.VP8LColorIndexInverseTransformAlpha,_l=C.MapAlpha,tn=C.VP8LPredictorsAdd=[];tn.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Br,ti,en,yi,Ti,_a,ei,wa,vs,rn,ri,Mi,Tn,Sa,Mn,nn,ms,jr,Oi,Ce,Pe,Ue,Qe,Ri,an,xa,oo,W1,$1=n(511),Y1=n(2041),X1=n(225),K1=n(767),J1=0,wl=Y1,ho=X1,Tr=K1,Gr=$1,lo=0,co=1,Q1=2,uo=3,fo=4,Sl=5,Z1=6,xl=7,Al=8,po=9,Nl=10,R2=[2,3,7],D2=[3,3,11],t0=[280,256,256,256,40],B2=[0,1,1,1,0],j2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],G2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],q2=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],U2=8,Ll=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Cl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bs=null,z2=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],V2=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],e0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],H2=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],W2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Y2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sn=[],ii=[],Di=[],X2=1,r0=2,on=[],qr=[];gt("UpsampleRgbLinePair",he,3),gt("UpsampleBgrLinePair",Ie,3),gt("UpsampleRgbaLinePair",Qr,4),gt("UpsampleBgraLinePair",rr,4),gt("UpsampleArgbLinePair",cr,4),gt("UpsampleRgba4444LinePair",Ye,2),gt("UpsampleRgb565LinePair",Re,2);var K2=C.UpsampleRgbLinePair,J2=C.UpsampleBgrLinePair,i0=C.UpsampleRgbaLinePair,n0=C.UpsampleBgraLinePair,a0=C.UpsampleArgbLinePair,s0=C.UpsampleRgba4444LinePair,Q2=C.UpsampleRgb565LinePair,go=16,vo=1<<go-1,ys=-227,Pl=482,o0=6,Z2=(256<<o0)-1,h0=0,tu=n(256),eu=n(256),ru=n(256),iu=n(256),nu=n(Pl-ys),au=n(Pl-ys);Ii("YuvToRgbRow",he,3),Ii("YuvToBgrRow",Ie,3),Ii("YuvToRgbaRow",Qr,4),Ii("YuvToBgraRow",rr,4),Ii("YuvToArgbRow",cr,4),Ii("YuvToRgba4444Row",Ye,2),Ii("YuvToRgb565Row",Re,2);var l0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],mo=[0,2,8],su=[8,7,6,4,4,2,2,2,1,1,1,1],ou=1;this.WebPDecodeRGBA=function(s,c,g,_,N){var E=co,I=new da,M=new Hr;I.ba=M,M.S=E,M.width=[M.width],M.height=[M.height];var O=M.width,j=M.height,Q=new Pi;if(Q==null||s==null)var ct=2;else t(Q!=null),ct=ga(s,c,g,Q.width,Q.height,Q.Pd,Q.Qd,Q.format,null);if(ct!=0?O=0:(O!=null&&(O[0]=Q.width[0]),j!=null&&(j[0]=Q.height[0]),O=1),O){M.width=M.width[0],M.height=M.height[0],_!=null&&(_[0]=M.width),N!=null&&(N[0]=M.height);t:{if(_=new sa,(N=new as).data=s,N.w=c,N.ha=g,N.kd=1,c=[0],t(N!=null),((s=ga(N.data,N.w,N.ha,null,null,null,c,null,N))==0||s==7)&&c[0]&&(s=4),(c=s)==0){if(t(I!=null),_.data=N.data,_.w=N.w+N.offset,_.ha=N.ha-N.offset,_.put=di,_.ac=sr,_.bc=pi,_.ma=I,N.xa){if((s=Dr())==null){I=1;break t}if(function(ut,at){var _t=[0],pt=[0],Z=[0];e:for(;;){if(ut==null)return 0;if(at==null)return ut.a=2,0;if(ut.l=at,ut.a=0,nt(ut.m,at.data,at.w,at.ha),!zt(ut.m,_t,pt,Z)){ut.a=3;break e}if(ut.xb=r0,at.width=_t[0],at.height=pt[0],!mi(_t[0],pt[0],1,ut,null))break e;return 1}return t(ut.a!=0),0}(s,_)){if(_=(c=va(_.width,_.height,I.Oa,I.ba))==0){e:{_=s;r:for(;;){if(_==null){_=0;break e}if(t(_.s.yc!=null),t(_.s.Ya!=null),t(0<_.s.Wb),t((g=_.l)!=null),t((N=g.ma)!=null),_.xb!=0){if(_.ca=N.ba,_.tb=N.tb,t(_.ca!=null),!us(N.Oa,g,uo)){_.a=2;break r}if(!Pn(_,g.width)||g.da)break r;if((g.da||ge(_.ca.S))&&ht(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ht()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Bt(_.s.vb,_.s.Wa.Xa)){_.a=1;break r}_.xb=0}if(!Xr(_,_.V,_.Ba,_.c,_.i,g.o,ta))break r;N.Dc=_.Ma,_=1;break e}t(_.a!=0),_=0}_=!_}_&&(c=s.a)}else c=s.a}else{if((s=new Zh)==null){I=1;break t}if(s.Fa=N.na,s.P=N.P,s.qc=N.Sa,Vs(s,_)){if((c=va(_.width,_.height,I.Oa,I.ba))==0){if(s.Aa=0,g=I.Oa,t((N=s)!=null),g!=null){if(0<(O=0>(O=g.Md)?0:100<O?255:255*O/100)){for(j=Q=0;4>j;++j)12>(ct=N.pb[j]).lc&&(ct.ia=O*su[0>ct.lc?0:ct.lc]>>3),Q|=ct.ia;Q&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=g.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}tl(s,_)||(c=s.a)}}else c=s.a}c==0&&I.Oa!=null&&I.Oa.fd&&(c=fs(I.ba))}I=c}E=I!=0?null:11>E?M.f.RGBA.eb:M.f.kb.y}else E=null;return E};var c0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,X){for(var q="",A=0;A<4;A++)q+=String.fromCharCode(C[X++]);return q}function p(C,X){return(C[X+0]<<0|C[X+1]<<8|C[X+2]<<16)>>>0}function v(C,X){return(C[X+0]<<0|C[X+1]<<8|C[X+2]<<16|C[X+3]<<24)>>>0}new l;var m=[0],f=[0],b=[],w=new l,x=a,S=function(C,X){var q={},A=0,T=!1,G=0,U=0;if(q.frames=[],!function(B,V,J,rt){for(var D=0;D<rt;D++)if(B[V+D]!=J.charCodeAt(D))return!0;return!1}(C,X,"RIFF",4)){var et,st;for(v(C,X+=4),X+=8;X<C.length;){var lt=u(C,X),nt=v(C,X+=4);X+=4;var dt=nt+(1&nt);switch(lt){case"VP8 ":case"VP8L":q.frames[A]===void 0&&(q.frames[A]={}),(F=q.frames[A]).src_off=T?U:X-8,F.src_size=G+nt+8,A++,T&&(T=!1,G=0,U=0);break;case"VP8X":(F=q.header={}).feature_flags=C[X];var ot=X+4;F.canvas_width=1+p(C,ot),ot+=3,F.canvas_height=1+p(C,ot),ot+=3;break;case"ALPH":T=!0,G=dt+8,U=X-8;break;case"ANIM":(F=q.header).bgcolor=v(C,X),ot=X+4,F.loop_count=(et=C)[(st=ot)+0]<<0|et[st+1]<<8,ot+=2;break;case"ANMF":var vt,F;(F=q.frames[A]={}).offset_x=2*p(C,X),X+=3,F.offset_y=2*p(C,X),X+=3,F.width=1+p(C,X),X+=3,F.height=1+p(C,X),X+=3,F.duration=p(C,X),X+=3,vt=C[X++],F.dispose=1&vt,F.blend=vt>>1&1}lt!="ANMF"&&(X+=dt)}return q}}(x,0);S.response=x,S.rgbaoutput=!0,S.dataurl=!1;var P=S.header?S.header:null,y=S.frames?S.frames:null;if(P){P.loop_counter=P.loop_count,m=[P.canvas_height],f=[P.canvas_width];for(var k=0;k<y.length&&y[k].blend!=0;k++);}var R=y[0],z=w.WebPDecodeRGBA(x,R.src_off,R.src_size,f,m);R.rgba=z,R.imgwidth=f[0],R.imgheight=m[0];for(var W=0;W<f[0]*m[0]*4;W++)b[W]=z[W];return this.width=f,this.height=m,this.data=b,this}(function(a){var t=function(){return typeof g1=="function"},e=function(m,f,b,w){var x=4,S=o;switch(w){case a.image_compression.FAST:x=1,S=n;break;case a.image_compression.MEDIUM:x=6,S=h;break;case a.image_compression.SLOW:x=9,S=l}m=r(m,f,b,S);var P=g1(m,{level:x});return a.__addimage__.arrayBufferToBinaryString(P)},r=function(m,f,b,w){for(var x,S,P,y=m.length/f,k=new Uint8Array(m.length+y),R=p(),z=0;z<y;z+=1){if(P=z*f,x=m.subarray(P,P+f),w)k.set(w(x,b,S),P+z);else{for(var W,C=R.length,X=[];W<C;W+=1)X[W]=R[W](x,b,S);var q=v(X.concat());k.set(X[q],P+z)}S=x}return k},i=function(m){var f=Array.apply([],m);return f.unshift(0),f},n=function(m,f){var b,w=[],x=m.length;w[0]=1;for(var S=0;S<x;S+=1)b=m[S-f]||0,w[S+1]=m[S]-b+256&255;return w},o=function(m,f,b){var w,x=[],S=m.length;x[0]=2;for(var P=0;P<S;P+=1)w=b&&b[P]||0,x[P+1]=m[P]-w+256&255;return x},h=function(m,f,b){var w,x,S=[],P=m.length;S[0]=3;for(var y=0;y<P;y+=1)w=m[y-f]||0,x=b&&b[y]||0,S[y+1]=m[y]+256-(w+x>>>1)&255;return S},l=function(m,f,b){var w,x,S,P,y=[],k=m.length;y[0]=4;for(var R=0;R<k;R+=1)w=m[R-f]||0,x=b&&b[R]||0,S=b&&b[R-f]||0,P=u(w,x,S),y[R+1]=m[R]-P+256&255;return y},u=function(m,f,b){if(m===f&&f===b)return m;var w=Math.abs(f-b),x=Math.abs(m-b),S=Math.abs(m+f-b-b);return w<=x&&w<=S?m:x<=S?f:b},p=function(){return[i,n,o,h,l]},v=function(m){var f=m.map(function(b){return b.reduce(function(w,x){return w+Math.abs(x)},0)});return f.indexOf(Math.min.apply(null,f))};a.processPNG=function(m,f,b,w){var x,S,P,y,k,R,z,W,C,X,q,A,T,G,U,et=this.decode.FLATE_DECODE,st="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(P=new r5(m)).imgData,S=P.bits,x=P.colorSpace,k=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){C=(W=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,q=new Uint8Array(C*P.colors),X=new Uint8Array(C);var lt,nt=P.pixelBitlength-P.bits;for(G=0,U=0;G<C;G++){for(T=W[G],lt=0;lt<nt;)q[U++]=T>>>lt&255,lt+=P.bits;X[G]=T>>>lt&255}}if(P.bits===16){C=(W=new Uint32Array(P.decodePixels().buffer)).length,q=new Uint8Array(C*(32/P.pixelBitlength)*P.colors),X=new Uint8Array(C*(32/P.pixelBitlength)),A=P.colors>1,G=0,U=0;for(var dt=0;G<C;)T=W[G++],q[U++]=T>>>0&255,A&&(q[U++]=T>>>16&255,T=W[G++],q[U++]=T>>>0&255),X[dt++]=T>>>16&255;S=8}w!==a.image_compression.NONE&&t()?(m=e(q,P.width*P.colors,P.colors,w),z=e(X,P.width,1,w)):(m=q,z=X,et=void 0)}if(P.colorType===3&&(x=this.color_spaces.INDEXED,R=P.palette,P.transparency.indexed)){var ot=P.transparency.indexed,vt=0;for(G=0,C=ot.length;G<C;++G)vt+=ot[G];if((vt/=255)===C-1&&ot.indexOf(0)!==-1)y=[ot.indexOf(0)];else if(vt!==C){for(W=P.decodePixels(),X=new Uint8Array(W.length),G=0,C=W.length;G<C;G++)X[G]=ot[W[G]];z=e(X,P.width,1)}}var F=function(B){var V;switch(B){case a.image_compression.FAST:V=11;break;case a.image_compression.MEDIUM:V=13;break;case a.image_compression.SLOW:V=14;break;default:V=12}return V}(w);return et===this.decode.FLATE_DECODE&&(st="/Predictor "+F+" "),st+="/Colors "+k+" /BitsPerComponent "+S+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(z&&this.__addimage__.isArrayBuffer(z)||this.__addimage__.isArrayBufferView(z))&&(z=this.__addimage__.arrayBufferToBinaryString(z)),{alias:b,data:m,index:f,filter:et,decodeParameters:st,transparency:y,palette:R,sMask:z,predictor:F,width:P.width,height:P.height,bitsPerComponent:S,colorSpace:x}}}})(Vt.API),function(a){a.processGIF89A=function(t,e,r,i){var n=new i5(t),o=n.width,h=n.height,l=[];n.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:h},p=new Ql(100).encode(u,100);return a.processJPEG.call(this,p,e,r,i)},a.processGIF87A=a.processGIF89A}(Vt.API),si.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var a=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(a);for(var t=0;t<a;t++){var e=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:e,quad:n}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},si.prototype.parseBGR=function(){this.pos=this.offset;try{var a="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[a]()}catch(e){Ne.log("bit decode error:"+e)}},si.prototype.bit1=function(){var a,t=Math.ceil(this.width/8),e=t%4;for(a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<t;i++)for(var n=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,h=0;h<8&&8*i+h<this.width;h++){var l=this.palette[n>>7-h&1];this.data[o+4*h]=l.blue,this.data[o+4*h+1]=l.green,this.data[o+4*h+2]=l.red,this.data[o+4*h+3]=255}e!==0&&(this.pos+=4-e)}},si.prototype.bit4=function(){for(var a=Math.ceil(this.width/2),t=a%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<a;i++){var n=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,h=n>>4,l=15&n,u=this.palette[h];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},si.prototype.bit8=function(){for(var a=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[n]=o.red,this.data[n+1]=o.green,this.data[n+2]=o.blue,this.data[n+3]=255}else this.data[n]=255,this.data[n+1]=255,this.data[n+2]=255,this.data[n+3]=255}a!==0&&(this.pos+=4-a)}},si.prototype.bit15=function(){for(var a=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var n=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(n&t)/t*255|0,h=(n>>5&t)/t*255|0,l=(n>>10&t)/t*255|0,u=n>>15?255:0,p=r*this.width*4+4*i;this.data[p]=l,this.data[p+1]=h,this.data[p+2]=o,this.data[p+3]=u}this.pos+=a}},si.prototype.bit16=function(){for(var a=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(o&t)/t*255|0,l=(o>>5&e)/e*255|0,u=(o>>11)/t*255|0,p=i*this.width*4+4*n;this.data[p]=u,this.data[p+1]=l,this.data[p+2]=h,this.data[p+3]=255}this.pos+=a}},si.prototype.bit24=function(){for(var a=this.height-1;a>=0;a--){for(var t=this.bottom_up?a:this.height-1-a,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=n,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},si.prototype.bit32=function(){for(var a=this.height-1;a>=0;a--)for(var t=this.bottom_up?a:this.height-1-a,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*e;this.data[h]=n,this.data[h+1]=i,this.data[h+2]=r,this.data[h+3]=o}},si.prototype.getData=function(){return this.data},function(a){a.processBMP=function(t,e,r,i){var n=new si(t,!1),o=n.width,h=n.height,l={data:n.getData(),width:o,height:h},u=new Ql(100).encode(l,100);return a.processJPEG.call(this,u,e,r,i)}}(Vt.API),W0.prototype.getData=function(){return this.data},function(a){a.processWEBP=function(t,e,r,i){var n=new W0(t),o=n.width,h=n.height,l={data:n.getData(),width:o,height:h},u=new Ql(100).encode(l,100);return a.processJPEG.call(this,u,e,r,i)}}(Vt.API),Vt.API.processRGBA=function(a,t,e){for(var r=a.data,i=r.length,n=new Uint8Array(i/4*3),o=new Uint8Array(i/4),h=0,l=0,u=0;u<i;u+=4){var p=r[u],v=r[u+1],m=r[u+2],f=r[u+3];n[h++]=p,n[h++]=v,n[h++]=m,o[l++]=f}var b=this.__addimage__.arrayBufferToBinaryString(n);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:a.width,height:a.height}},Vt.API.setLanguage=function(a){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[a]!==void 0&&(this.internal.languageSettings.languageCode=a,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ka=Vt.API,Eo=ka.getCharWidthsArray=function(a,t){var e,r,i=(t=t||{}).font||this.internal.getFont(),n=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),h=t.widths?t.widths:i.metadata.Unicode.widths,l=h.fof?h.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=u.fof?u.fof:1,v=t.doKerning!==!1,m=0,f=a.length,b=0,w=h[0]||l,x=[];for(e=0;e<f;e++)r=a.charCodeAt(e),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/n)||0)/1e3):(m=v&&ye(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/p:0,x.push((h[r]||w)/l+m)),b=r;return x},U0=ka.getStringUnitWidth=function(a,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return ka.processArabic&&(a=ka.processArabic(a)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(a,e,i)/e:Eo.apply(this,arguments).reduce(function(n,o){return n+o},0)},z0=function(a,t,e,r){for(var i=[],n=0,o=a.length,h=0;n!==o&&h+t[n]<e;)h+=t[n],n++;i.push(a.slice(0,n));var l=n;for(h=0;n!==o;)h+t[n]>r&&(i.push(a.slice(l,n)),h=0,l=n),h+=t[n],n++;return l!==n&&i.push(a.slice(l,n)),i},V0=function(a,t,e){e||(e={});var r,i,n,o,h,l,u,p=[],v=[p],m=e.textIndent||0,f=0,b=0,w=a.split(" "),x=Eo.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?w[0].length+2:e.lineIndent||0){var S=Array(l).join(" "),P=[];w.map(function(k){(k=k.split(/\s*\n/)).length>1?P=P.concat(k.map(function(R,z){return(z&&R.length?`
`:"")+R})):P.push(k[0])}),w=P,l=U0.apply(this,[S,e])}for(n=0,o=w.length;n<o;n++){var y=0;if(r=w[n],l&&r[0]==`
`&&(r=r.substr(1),y=1),m+f+(b=(i=Eo.apply(this,[r,e])).reduce(function(k,R){return k+R},0))>t||y){if(b>t){for(h=z0.apply(this,[r,i,t-(m+f),t]),p.push(h.shift()),p=[h.pop()];h.length;)v.push([h.shift()]);b=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(k,R){return k+R},0)}else p=[r];v.push(p),m=b+l,f=x}else p.push(r),m+=f+b,f=x}return u=l?function(k,R){return(R?S:"")+k.join(" ")}:function(k){return k.join(" ")},v.map(u)},ka.splitTextToSize=function(a,t,e){var r,i=(e=e||{}).fontSize||this.internal.getFontSize(),n=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var v=this.internal.getFont(p.fontName,p.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);r=Array.isArray(a)?a:String(a).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;n.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,n.lineIndent=e.lineIndent;var h,l,u=[];for(h=0,l=r.length;h<l;h++)u=u.concat(V0.apply(this,[r[h],o,n]));return u},function(a){a.__fontmetrics__=a.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},r={},i=0;i<t.length;i++)e[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var n=function(v){return"0x"+parseInt(v,10).toString(16)},o=a.__fontmetrics__.compress=function(v){var m,f,b,w,x=["{"];for(var S in v){if(m=v[S],isNaN(parseInt(S,10))?f="'"+S+"'":(S=parseInt(S,10),f=(f=n(S).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof m=="number")m<0?(b=n(m).slice(3),w="-"):(b=n(m).slice(2),w=""),b=w+b.slice(0,-1)+r[b.slice(-1)];else{if(ye(m)!=="object")throw new Error("Don't know what to do with value type "+ye(m)+".");b=o(m)}x.push(f+b)}return x.push("}"),x.join("")},h=a.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,f,b,w,x={},S=1,P=x,y=[],k="",R="",z=v.length-1,W=1;W<z;W+=1)(w=v[W])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(w):w=="{"?(y.push([P,b]),P={},b=void 0):w=="}"?((f=y.pop())[0][f[1]]=P,b=void 0,P=f[0]):w=="-"?S=-1:b===void 0?e.hasOwnProperty(w)?(k+=e[w],b=parseInt(k,16)*S,S=1,k=""):k+=w:e.hasOwnProperty(w)?(R+=e[w],P[b]=parseInt(R,16)*S,S=1,b=void 0,R=""):R+=w;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFont",function(v){var m=v.font,f=p.Unicode[m.postScriptName];f&&(m.metadata.Unicode={},m.metadata.Unicode.widths=f.widths,m.metadata.Unicode.kerning=f.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(Vt.API),function(a){var t=function(e){for(var r=e.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=e.charCodeAt(n);return i};a.API.events.push(["addFont",function(e){var r=void 0,i=e.font,n=e.instance;if(!i.isStandardFont){if(n===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=n.existsFileInVFS(i.postScriptName)===!1?n.loadFile(i.postScriptName):n.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,h){h=/^\x00\x01\x00\x00/.test(h)?t(h):t(Fs(h)),o.metadata=a.API.TTFFont.open(h),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Vt),function(a){function t(){return(Ht.canvg?Promise.resolve(Ht.canvg):c1(()=>import("./index.es.d819e8bb.js"),[],import.meta.url)).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Vt.API.addSvgAsImage=function(e,r,i,n,o,h,l,u){if(isNaN(r)||isNaN(i))throw Ne.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(o))throw Ne.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=n,p.height=o;var v=p.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,p.width,p.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(b){return b.fromString(v,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){f.addImage(p.toDataURL("image/jpeg",1),r,i,n,o,l,u)})}}(),Vt.API.putTotalPages=function(a){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(a,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(a,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,e);return this},Vt.API.viewerPreferences=function(a,t){var e;a=a||{},t=t||!1;var r,i,n,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(o),l=[],u=0,p=0,v=0;function m(b,w){var x,S=!1;for(x=0;x<b.length;x+=1)b[x]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,a==="reset"||t===!0){var f=h.length;for(v=0;v<f;v+=1)e[h[v]].value=e[h[v]].defaultValue,e[h[v]].explicitSet=!1}if(ye(a)==="object"){for(i in a)if(n=a[i],m(h,i)&&n!==void 0){if(e[i].type==="boolean"&&typeof n=="boolean")e[i].value=n;else if(e[i].type==="name"&&m(e[i].valueSet,n))e[i].value=n;else if(e[i].type==="integer"&&Number.isInteger(n))e[i].value=n;else if(e[i].type==="array"){for(u=0;u<n.length;u+=1)if(r=!0,n[u].length===1&&typeof n[u][0]=="number")l.push(String(n[u]-1));else if(n[u].length>1){for(p=0;p<n[u].length;p+=1)typeof n[u][p]!="number"&&(r=!1);r===!0&&l.push([n[u][0]-1,n[u][1]-1].join(" "))}e[i].value="["+l.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in e)e[b].explicitSet===!0&&(e[b].type==="name"?w.push("/"+b+" /"+e[b].value):w.push("/"+b+" "+e[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(a){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=n.length+o.length+h.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+n+o+h+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};a.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Vt.API),function(a){var t=a.API,e=t.pdfEscape16=function(n,o){for(var h,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],p=[""],v=0,m=n.length;v<m;++v){if(h=o.metadata.characterToGlyph(n.charCodeAt(v)),o.metadata.glyIdsUsed.push(h),o.metadata.toUnicode[h]=n.charCodeAt(v),l.indexOf(h)==-1&&(l.push(h),l.push([parseInt(o.metadata.widthOfGlyph(h),10)])),h=="0")return p.join("");h=h.toString(16),p.push(u[4-h.length],h)}return p.join("")},r=function(n){var o,h,l,u,p,v,m;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],v=0,m=(h=Object.keys(n).sort(function(f,b){return f-b})).length;v<m;v++)o=h[v],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),n[o]!==void 0&&n[o]!==null&&typeof n[o].toString=="function"&&(u=("0000"+n[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(n){(function(o){var h=o.font,l=o.out,u=o.newObject,p=o.putStream;if(h.metadata instanceof a.API.TTFFont&&h.encoding==="Identity-H"){for(var v=h.metadata.Unicode.widths,m=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),f="",b=0;b<m.length;b++)f+=String.fromCharCode(m[b]);var w=u();p({data:f,addLength1:!0,objectId:w}),l("endobj");var x=u();p({data:r(h.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var S=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ma(h.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+a.API.PDFObject.convert(h.metadata.bbox)),l("/Flags "+h.metadata.flags),l("/StemV "+h.metadata.stemV),l("/ItalicAngle "+h.metadata.italicAngle),l("/Ascent "+h.metadata.ascender),l("/Descent "+h.metadata.decender),l("/CapHeight "+h.metadata.capHeight),l(">>"),l("endobj");var P=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ma(h.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+a.API.PDFObject.convert(v)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+h.encoding+")"),l(">>"),l(">>"),l("endobj"),h.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+Ma(h.fontName)),l("/Encoding /"+h.encoding),l("/DescendantFonts ["+P+" 0 R]"),l(">>"),l("endobj"),h.isAlreadyPutted=!0}})(n)}]),t.events.push(["putFont",function(n){(function(o){var h=o.font,l=o.out,u=o.newObject,p=o.putStream;if(h.metadata instanceof a.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var v=h.metadata.rawData,m="",f=0;f<v.length;f++)m+=String.fromCharCode(v[f]);var b=u();p({data:m,addLength1:!0,objectId:b}),l("endobj");var w=u();p({data:r(h.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var x=u();l("<<"),l("/Descent "+h.metadata.decender),l("/CapHeight "+h.metadata.capHeight),l("/StemV "+h.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+a.API.PDFObject.convert(h.metadata.bbox)),l("/FontName /"+Ma(h.fontName)),l("/ItalicAngle "+h.metadata.italicAngle),l("/Ascent "+h.metadata.ascender),l(">>"),l("endobj"),h.objectNumber=u();for(var S=0;S<h.metadata.hmtx.widths.length;S++)h.metadata.hmtx.widths[S]=parseInt(h.metadata.hmtx.widths[S]*(1e3/h.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Ma(h.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+a.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),l("endobj"),h.isAlreadyPutted=!0}})(n)}]);var i=function(n){var o,h=n.text||"",l=n.x,u=n.y,p=n.options||{},v=n.mutex||{},m=v.pdfEscape,f=v.activeFontKey,b=v.fonts,w=f,x="",S=0,P="",y=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:h,x:l,y:u,options:p,mutex:v};for(P=h,w=f,Array.isArray(h)&&(P=h[0]),S=0;S<P.length;S+=1)b[w].metadata.hasOwnProperty("cmap")&&(o=b[w].metadata.cmap.unicode.codeMap[P[S].charCodeAt(0)]),o||P[S].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?x+=P[S]:x+="";var k="";return parseInt(w.slice(1))<14||y==="WinAnsiEncoding"?k=m(x,w).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):y==="Identity-H"&&(k=e(x,b[w])),v.isHex=!0,{text:k,x:l,y:u,options:p,mutex:v}};t.events.push(["postProcessText",function(n){var o=n.text||"",h=[],l={text:o,x:n.x,y:n.y,options:n.options,mutex:n.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?h.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):h.push(i(Object.assign({},l,{text:o[u]})).text);n.text=h}else n.text=i(Object.assign({},l,{text:o})).text}])}(Vt),function(a){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};a.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},a.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},a.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Vt.API),function(a){a.__bidiEngine__=a.prototype.__bidiEngine__=function(r){var i,n,o,h,l,u,p,v=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,y=0;this.__bidiEngine__={};var k=function(A){var T=A.charCodeAt(),G=T>>8,U=w[G];return U!==void 0?v[256*U+(255&T)]:G===252||G===253?"AL":S.test(G)?"L":G===8?"R":"N"},R=function(A){for(var T,G=0;G<A.length;G++){if((T=k(A.charAt(G)))==="L")return!1;if(T==="R")return!0}return!1},z=function(A,T,G,U){var et,st,lt,nt,dt=T[U];switch(dt){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(dt="AN");break;case"AL":P=!0,dt="R";break;case"WS":dt="N";break;case"CS":U<1||U+1>=T.length||(et=G[U-1])!=="EN"&&et!=="AN"||(st=T[U+1])!=="EN"&&st!=="AN"?dt="N":P&&(st="AN"),dt=st===et?st:"N";break;case"ES":dt=(et=U>0?G[U-1]:"B")==="EN"&&U+1<T.length&&T[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&G[U-1]==="EN"){dt="EN";break}if(P){dt="N";break}for(lt=U+1,nt=T.length;lt<nt&&T[lt]==="ET";)lt++;dt=lt<nt&&T[lt]==="EN"?"EN":"N";break;case"NSM":if(o&&!h){for(nt=T.length,lt=U+1;lt<nt&&T[lt]==="NSM";)lt++;if(lt<nt){var ot=A[U],vt=ot>=1425&&ot<=2303||ot===64286;if(et=T[lt],vt&&(et==="R"||et==="AL")){dt="R";break}}}dt=U<1||(et=T[U-1])==="B"?"N":G[U-1];break;case"B":P=!1,i=!0,dt=y;break;case"S":n=!0,dt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":dt="N"}return dt},W=function(A,T,G){var U=A.split("");return G&&C(U,G,{hiLevel:y}),U.reverse(),T&&T.reverse(),U.join("")},C=function(A,T,G){var U,et,st,lt,nt,dt=-1,ot=A.length,vt=0,F=[],B=y?f:m,V=[];for(P=!1,i=!1,n=!1,et=0;et<ot;et++)V[et]=k(A[et]);for(st=0;st<ot;st++){if(nt=vt,F[st]=z(A,V,F,st),U=240&(vt=B[nt][b[F[st]]]),vt&=15,T[st]=lt=B[vt][5],U>0)if(U===16){for(et=dt;et<st;et++)T[et]=1;dt=-1}else dt=-1;if(B[vt][6])dt===-1&&(dt=st);else if(dt>-1){for(et=dt;et<st;et++)T[et]=lt;dt=-1}V[st]==="B"&&(T[st]=0),G.hiLevel|=lt}n&&function(J,rt,D){for(var Y=0;Y<D;Y++)if(J[Y]==="S"){rt[Y]=y;for(var tt=Y-1;tt>=0&&J[tt]==="WS";tt--)rt[tt]=y}}(V,T,ot)},X=function(A,T,G,U,et){if(!(et.hiLevel<A)){if(A===1&&y===1&&!i)return T.reverse(),void(G&&G.reverse());for(var st,lt,nt,dt,ot=T.length,vt=0;vt<ot;){if(U[vt]>=A){for(nt=vt+1;nt<ot&&U[nt]>=A;)nt++;for(dt=vt,lt=nt-1;dt<lt;dt++,lt--)st=T[dt],T[dt]=T[lt],T[lt]=st,G&&(st=G[dt],G[dt]=G[lt],G[lt]=st);vt=nt}vt++}}},q=function(A,T,G){var U=A.split(""),et={hiLevel:y};return G||(G=[]),C(U,G,et),function(st,lt,nt){if(nt.hiLevel!==0&&p)for(var dt,ot=0;ot<st.length;ot++)lt[ot]===1&&(dt=x.indexOf(st[ot]))>=0&&(st[ot]=x[dt+1])}(U,G,et),X(2,U,T,G,et),X(1,U,T,G,et),U.join("")};return this.__bidiEngine__.doBidiReorder=function(A,T,G){if(function(et,st){if(st)for(var lt=0;lt<et.length;lt++)st[lt]=lt;h===void 0&&(h=R(et)),u===void 0&&(u=R(et))}(A,T),o||!l||u)if(o&&l&&h^u)y=h?1:0,A=W(A,T,G);else if(!o&&l&&u)y=h?1:0,A=q(A,T,G),A=W(A,T);else if(!o||h||l||u){if(o&&!l&&h^u)A=W(A,T),h?(y=0,A=q(A,T,G)):(y=1,A=q(A,T,G),A=W(A,T));else if(o&&h&&!l&&u)y=1,A=q(A,T,G),A=W(A,T);else if(!o&&!l&&h^u){var U=p;h?(y=1,A=q(A,T,G),y=0,p=!1,A=q(A,T,G),p=U):(y=0,A=q(A,T,G),A=W(A,T),y=1,p=!1,A=q(A,T,G),p=U,A=W(A,T))}}else y=0,A=q(A,T,G);else y=h?1:0,A=q(A,T,G);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,l=A.isOutputVisual,h=A.isInputRtl,u=A.isOutputRtl,p=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new a.__bidiEngine__({isInputVisual:!0});a.API.events.push(["postProcessText",function(r){var i=r.text,n=(r.x,r.y,r.options||{}),o=(r.mutex,n.lang,[]);if(n.isInputVisual=typeof n.isInputVisual!="boolean"||n.isInputVisual,e.setOptions(n),Object.prototype.toString.call(i)==="[object Array]"){var h=0;for(o=[],h=0;h<i.length;h+=1)Object.prototype.toString.call(i[h])==="[object Array]"?o.push([e.doBidiReorder(i[h][0]),i[h][1],i[h][2]]):o.push([e.doBidiReorder(i[h])]);r.text=o}else r.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(Vt),Vt.API.TTFFont=function(){function a(t){var e;if(this.rawData=t,e=this.contents=new yn(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new b5(this),this.registerTTF()}return a.open=function(t){return new a(t)},a.prototype.parse=function(){return this.directory=new n5(this.contents),this.head=new s5(this),this.name=new u5(this),this.cmap=new Jc(this),this.toUnicode={},this.hhea=new o5(this),this.maxp=new f5(this),this.hmtx=new d5(this),this.post=new l5(this),this.os2=new h5(this),this.loca=new m5(this),this.glyf=new p5(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},a.prototype.registerTTF=function(){var t,e,r,i,n;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,h,l,u;for(u=[],o=0,h=(l=this.bbox).length;o<h;o++)t=l[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(n=this.familyClass)===1||n===2||n===3||n===4||n===5||n===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},a.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},a.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},a.prototype.widthOfString=function(t,e,r){var i,n,o,h;for(o=0,n=0,h=(t=""+t).length;0<=h?n<h:n>h;n=0<=h?++n:--n)i=t.charCodeAt(n),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/e)||0;return o*(e/1e3)},a.prototype.lineHeight=function(t,e){var r;return e==null&&(e=!1),r=e?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},a}();var ci,yn=function(){function a(t){this.data=t??[],this.pos=0,this.length=this.data.length}return a.prototype.readByte=function(){return this.data[this.pos++]},a.prototype.writeByte=function(t){return this.data[this.pos++]=t},a.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},a.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},a.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},a.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},a.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},a.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},a.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},a.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},a.prototype.readString=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)r[e]=String.fromCharCode(this.readByte());return r.join("")},a.prototype.writeString=function(t){var e,r,i;for(i=[],e=0,r=t.length;0<=r?e<r:e>r;e=0<=r?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},a.prototype.readShort=function(){return this.readInt16()},a.prototype.writeShort=function(t){return this.writeInt16(t)},a.prototype.readLongLong=function(){var t,e,r,i,n,o,h,l;return t=this.readByte(),e=this.readByte(),r=this.readByte(),i=this.readByte(),n=this.readByte(),o=this.readByte(),h=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^n)+65536*(255^o)+256*(255^h)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*r+4294967296*i+16777216*n+65536*o+256*h+l},a.prototype.writeLongLong=function(t){var e,r;return e=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},a.prototype.readInt=function(){return this.readInt32()},a.prototype.writeInt=function(t){return this.writeInt32(t)},a.prototype.read=function(t){var e,r;for(e=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)e.push(this.readByte());return e},a.prototype.write=function(t){var e,r,i,n;for(n=[],r=0,i=t.length;r<i;r++)e=t[r],n.push(this.writeByte(e));return n},a}(),n5=function(){var a;function t(e){var r,i,n;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,n=this.tableCount;0<=n?i<n:i>n;i=0<=n?++i:--i)r={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(e){var r,i,n,o,h,l,u,p,v,m,f,b,w;for(w in f=Object.keys(e).length,l=Math.log(2),v=16*Math.floor(Math.log(f)/l),o=Math.floor(v/l),p=16*f-v,(i=new yn).writeInt(this.scalarType),i.writeShort(f),i.writeShort(v),i.writeShort(o),i.writeShort(p),n=16*f,u=i.pos+n,h=null,b=[],e)for(m=e[w],i.writeString(w),i.writeInt(a(m)),i.writeInt(u),i.writeInt(m.length),b=b.concat(m),w==="head"&&(h=u),u+=m.length;u%4;)b.push(0),u++;return i.write(b),r=2981146554-a(i.data),i.pos=h+8,i.writeUInt32(r),i.data},a=function(e){var r,i,n,o;for(e=Qc.call(e);e.length%4;)e.push(0);for(n=new yn(e),i=0,r=0,o=e.length;r<o;r=r+=4)i+=n.readUInt32();return 4294967295&i},t}(),a5={}.hasOwnProperty,Ni=function(a,t){for(var e in t)a5.call(t,e)&&(a[e]=t[e]);function r(){this.constructor=a}return r.prototype=t.prototype,a.prototype=new r,a.__super__=t.prototype,a};ci=function(){function a(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return a.prototype.parse=function(){},a.prototype.encode=function(){},a.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},a}();var s5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new yn).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),$0=function(){function a(t,e){var r,i,n,o,h,l,u,p,v,m,f,b,w,x,S,P,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(f=t.readUInt16(),m=f/2,t.pos+=6,n=function(){var k,R;for(R=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)R.push(t.readUInt16());return R}(),t.pos+=2,w=function(){var k,R;for(R=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)R.push(t.readUInt16());return R}(),u=function(){var k,R;for(R=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)R.push(t.readUInt16());return R}(),p=function(){var k,R;for(R=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)R.push(t.readUInt16());return R}(),i=(this.length-t.pos+this.offset)/2,h=function(){var k,R;for(R=[],l=k=0;0<=i?k<i:k>i;l=0<=i?++k:--k)R.push(t.readUInt16());return R}(),l=S=0,y=n.length;S<y;l=++S)for(x=n[l],r=P=b=w[l];b<=x?P<=x:P>=x;r=b<=x?++P:--P)p[l]===0?o=r+u[l]:(o=h[p[l]/2+(r-b)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}t.pos=v}return a.encode=function(t,e){var r,i,n,o,h,l,u,p,v,m,f,b,w,x,S,P,y,k,R,z,W,C,X,q,A,T,G,U,et,st,lt,nt,dt,ot,vt,F,B,V,J,rt,D,Y,tt,wt,mt,At;switch(U=new yn,o=Object.keys(t).sort(function(Lt,Bt){return Lt-Bt}),e){case"macroman":for(w=0,x=function(){var Lt=[];for(b=0;b<256;++b)Lt.push(0);return Lt}(),P={0:0},n={},et=0,dt=o.length;et<dt;et++)P[tt=t[i=o[et]]]==null&&(P[tt]=++w),n[i]={old:t[i],new:P[t[i]]},x[i]=P[t[i]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(x),{charMap:n,subtable:U.data,maxGlyphID:w+1};case"unicode":for(T=[],v=[],y=0,P={},r={},S=u=null,st=0,ot=o.length;st<ot;st++)P[R=t[i=o[st]]]==null&&(P[R]=++y),r[i]={old:R,new:P[R]},h=P[R]-i,S!=null&&h===u||(S&&v.push(S),T.push(i),u=h),S=i;for(S&&v.push(S),v.push(65535),T.push(65535),q=2*(X=T.length),C=2*Math.pow(Math.log(X)/Math.LN2,2),m=Math.log(C/2)/Math.LN2,W=2*X-C,l=[],z=[],f=[],b=lt=0,vt=T.length;lt<vt;b=++lt){if(A=T[b],p=v[b],A===65535){l.push(0),z.push(0);break}if(A-(G=r[A].new)>=32768)for(l.push(0),z.push(2*(f.length+X-b)),i=nt=A;A<=p?nt<=p:nt>=p;i=A<=p?++nt:--nt)f.push(r[i].new);else l.push(G-A),z.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*X+2*f.length),U.writeUInt16(0),U.writeUInt16(q),U.writeUInt16(C),U.writeUInt16(m),U.writeUInt16(W),D=0,F=v.length;D<F;D++)i=v[D],U.writeUInt16(i);for(U.writeUInt16(0),Y=0,B=T.length;Y<B;Y++)i=T[Y],U.writeUInt16(i);for(wt=0,V=l.length;wt<V;wt++)h=l[wt],U.writeUInt16(h);for(mt=0,J=z.length;mt<J;mt++)k=z[mt],U.writeUInt16(k);for(At=0,rt=f.length;At<rt;At++)w=f[At],U.writeUInt16(w);return{charMap:r,subtable:U.data,maxGlyphID:y+1}}},a}(),Jc=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,i,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r=new $0(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var i,n;return r==null&&(r="macroman"),i=$0.encode(e,r),(n=new yn).writeUInt16(0),n.writeUInt16(1),i.table=n.data.concat(i.subtable),i},t}(),o5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),h5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(e.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(e.readInt());return i}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(e.readInt());return i}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),l5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="post",t.prototype.parse=function(e){var r,i,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var o;for(i=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)r=e.readByte(),n.push(this.names.push(e.readString(r)));return n;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 196608:break;case 262144:return this.map=(function(){var h,l,u;for(u=[],o=h=0,l=this.file.maxp.numGlyphs;0<=l?h<l:h>l;o=0<=l?++h:--h)u.push(e.readUInt32());return u}).call(this)}},t}(),c5=function(a,t){this.raw=a,this.length=a.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},u5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="name",t.prototype.parse=function(e){var r,i,n,o,h,l,u,p,v,m,f;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(u={},o=v=0,m=i.length;v<m;o=++v)n=i[o],e.pos=n.offset,p=e.readString(n.length),h=new c5(p,n),u[f=n.nameID]==null&&(u[f]=[]),u[n.nameID].push(h);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),f5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),d5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,i,n,o,h,l,u;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,v;for(v=[],r=p=0;0<=n?p<n:p>n;r=0<=n?++p:--p)v.push(e.readInt16());return v}(),this.widths=(function(){var p,v,m,f;for(f=[],p=0,v=(m=this.metrics).length;p<v;p++)o=m[p],f.push(o.advance);return f}).call(this),i=this.widths[this.widths.length-1],u=[],r=h=0;0<=n?h<n:h>n;r=0<=n?++h:--h)u.push(this.widths.push(i));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Qc=[].slice,p5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,i,n,o,h,l,u,p,v,m;return e in this.cache?this.cache[e]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(e),(n=o.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+i,h=(l=new yn(r.read(n))).readShort(),p=l.readShort(),m=l.readShort(),u=l.readShort(),v=l.readShort(),this.cache[e]=h===-1?new v5(l,p,m,u,v):new g5(l,h,p,m,u,v),this.cache[e]))},t.prototype.encode=function(e,r,i){var n,o,h,l,u;for(h=[],o=[],l=0,u=r.length;l<u;l++)n=e[r[l]],o.push(h.length),n&&(h=h.concat(n.encode(i)));return o.push(h.length),{table:h,offsets:o}},t}(),g5=function(){function a(t,e,r,i,n,o){this.raw=t,this.numberOfContours=e,this.xMin=r,this.yMin=i,this.xMax=n,this.yMax=o,this.compound=!1}return a.prototype.encode=function(){return this.raw.data},a}(),v5=function(){function a(t,e,r,i,n){var o,h;for(this.raw=t,this.xMin=e,this.yMin=r,this.xMax=i,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;h=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&h;)o.pos+=1&h?4:2,128&h?o.pos+=8:64&h?o.pos+=4:8&h&&(o.pos+=2)}return a.prototype.encode=function(){var t,e,r;for(e=new yn(Qc.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)e.pos=this.glyphOffsets[t];return e.data},a}(),m5=function(a){function t(){return t.__super__.constructor.apply(this,arguments)}return Ni(t,ci),t.prototype.tag="loca",t.prototype.parse=function(e){var r,i;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,o;for(o=[],i=0,n=this.length;i<n;i+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var n,o;for(o=[],i=0,n=this.length;i<n;i+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var i=new Uint32Array(this.offsets.length),n=0,o=0,h=0;h<i.length;++h)if(i[h]=n,o<r.length&&r[o]==h){++o,i[h]=n;var l=this.offsets[h],u=this.offsets[h+1]-l;u>0&&(n+=u)}for(var p=new Array(4*i.length),v=0;v<i.length;++v)p[4*v+3]=255&i[v],p[4*v+2]=(65280&i[v])>>8,p[4*v+1]=(16711680&i[v])>>16,p[4*v]=(4278190080&i[v])>>24;return p},t}(),b5=function(){function a(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return a.prototype.generateCmap=function(){var t,e,r,i,n;for(e in i=this.font.cmap.tables[0].codeMap,t={},n=this.subset)r=n[e],t[e]=i[r];return t},a.prototype.glyphsFor=function(t){var e,r,i,n,o,h,l;for(i={},o=0,h=t.length;o<h;o++)i[n=t[o]]=this.font.glyf.glyphFor(n);for(n in e=[],i)(r=i[n])!=null&&r.compound&&e.push.apply(e,r.glyphIDs);if(e.length>0)for(n in l=this.glyphsFor(e))r=l[n],i[n]=r;return i},a.prototype.encode=function(t,e){var r,i,n,o,h,l,u,p,v,m,f,b,w,x,S;for(i in r=Jc.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},S=r.charMap)f[(l=S[i]).old]=l.new;for(b in m=r.maxGlyphID,o)b in f||(f[b]=m++);return p=function(P){var y,k;for(y in k={},P)k[P[y]]=y;return k}(f),v=Object.keys(p).sort(function(P,y){return P-y}),w=function(){var P,y,k;for(k=[],P=0,y=v.length;P<y;P++)h=v[P],k.push(p[h]);return k}(),n=this.font.glyf.encode(o,w,f),u=this.font.loca.encode(n.offsets,w),x={cmap:this.font.cmap.raw(),glyf:n.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},a}();Vt.API.PDFObject=function(){var a;function t(){}return a=function(e,r){return(Array(r+1).join("0")+e).slice(-r)},t.convert=function(e){var r,i,n,o;if(Array.isArray(e))return"["+function(){var h,l,u;for(u=[],h=0,l=e.length;h<l;h++)r=e[h],u.push(t.convert(r));return u}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+a(e.getUTCFullYear(),4)+a(e.getUTCMonth(),2)+a(e.getUTCDate(),2)+a(e.getUTCHours(),2)+a(e.getUTCMinutes(),2)+a(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in n=["<<"],e)o=e[i],n.push("/"+i+" "+t.convert(o));return n.push(">>"),n.join(`
`)}return""+e},t}();const Y0={clickedImg:"l",needsUpdate:!1},mn={BackPainImg:{title:"Back Pain",tags:"pain,back,spine",path:"images/BackPain.png"},BreathImage:{title:"Breathing",tags:"face,mouth,breath",path:"images/Breathe.png"},CheckMarkImg:{title:"Check Mark",tags:"icon",path:"images/check.png"},RedXImg:{title:"Red X",tags:"icon",path:"images/nobueno.png"},GreenWhitePillImg:{title:"Pill",tags:"icon",path:"images/pill.png"},StomachImg:{title:"Stomach",tags:"pain",path:"images/stummy.png"},ThermometerImg:{title:"Thermometer",tags:"icon",path:"images/thermo.png"},AlchoholImg:{title:"Alchohol",tags:"icon",path:"images/alc.png"},CarCrashImg:{title:"Car Crash",tags:"accident",path:"images/carcrash.png"},FeverImg:{title:"Fever",tags:"icon",path:"images/fever.png"},HeadacheImg:{title:"Headache",tags:"pain",path:"images/headache.png"},NauseaImg:{title:"Nausea",tags:"pain",path:"images/nausea.png"},RashImg:{title:"Rash",tags:"pain",path:"images/rash.png"},VomitImg:{title:"Vomit",tags:"pain",path:"images/vomit.png"}};var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ig(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Zc={exports:{}},rh={},t2={},ne={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const t=Math.PI/180;function e(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof X0<"u"?X0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.2",isBrowser:e(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return a.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(i){a.glob.Konva=i}};const r=i=>{a.Konva[i.prototype.getClassName()]=i};a._registerNode=r,a.Konva._injectGlobal(a.Konva)})(ne);var Te={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const t=ne;class e{constructor(k=[1,0,0,1,0,0]){this.dirty=!1,this.m=k&&k.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(k){k.m[0]=this.m[0],k.m[1]=this.m[1],k.m[2]=this.m[2],k.m[3]=this.m[3],k.m[4]=this.m[4],k.m[5]=this.m[5]}point(k){var R=this.m;return{x:R[0]*k.x+R[2]*k.y+R[4],y:R[1]*k.x+R[3]*k.y+R[5]}}translate(k,R){return this.m[4]+=this.m[0]*k+this.m[2]*R,this.m[5]+=this.m[1]*k+this.m[3]*R,this}scale(k,R){return this.m[0]*=k,this.m[1]*=k,this.m[2]*=R,this.m[3]*=R,this}rotate(k){var R=Math.cos(k),z=Math.sin(k),W=this.m[0]*R+this.m[2]*z,C=this.m[1]*R+this.m[3]*z,X=this.m[0]*-z+this.m[2]*R,q=this.m[1]*-z+this.m[3]*R;return this.m[0]=W,this.m[1]=C,this.m[2]=X,this.m[3]=q,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(k,R){var z=this.m[0]+this.m[2]*R,W=this.m[1]+this.m[3]*R,C=this.m[2]+this.m[0]*k,X=this.m[3]+this.m[1]*k;return this.m[0]=z,this.m[1]=W,this.m[2]=C,this.m[3]=X,this}multiply(k){var R=this.m[0]*k.m[0]+this.m[2]*k.m[1],z=this.m[1]*k.m[0]+this.m[3]*k.m[1],W=this.m[0]*k.m[2]+this.m[2]*k.m[3],C=this.m[1]*k.m[2]+this.m[3]*k.m[3],X=this.m[0]*k.m[4]+this.m[2]*k.m[5]+this.m[4],q=this.m[1]*k.m[4]+this.m[3]*k.m[5]+this.m[5];return this.m[0]=R,this.m[1]=z,this.m[2]=W,this.m[3]=C,this.m[4]=X,this.m[5]=q,this}invert(){var k=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),R=this.m[3]*k,z=-this.m[1]*k,W=-this.m[2]*k,C=this.m[0]*k,X=k*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),q=k*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=R,this.m[1]=z,this.m[2]=W,this.m[3]=C,this.m[4]=X,this.m[5]=q,this}getMatrix(){return this.m}decompose(){var k=this.m[0],R=this.m[1],z=this.m[2],W=this.m[3],C=this.m[4],X=this.m[5],q=k*W-R*z;let A={x:C,y:X,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(k!=0||R!=0){var T=Math.sqrt(k*k+R*R);A.rotation=R>0?Math.acos(k/T):-Math.acos(k/T),A.scaleX=T,A.scaleY=q/T,A.skewX=(k*z+R*W)/q,A.skewY=0}else if(z!=0||W!=0){var G=Math.sqrt(z*z+W*W);A.rotation=Math.PI/2-(W>0?Math.acos(-z/G):-Math.acos(z/G)),A.scaleX=q/G,A.scaleY=G,A.skewX=0,A.skewY=(k*z+R*W)/q}return A.rotation=a.Util._getRotation(A.rotation),A}}a.Transform=e;var r="[object Array]",i="[object Number]",n="[object String]",o="[object Boolean]",h=Math.PI/180,l=180/Math.PI,u="#",p="",v="0",m="Konva warning: ",f="Konva error: ",b="rgb(",w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},x=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,S=[];const P=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(y){setTimeout(y,60)};a.Util={_isElement(y){return!!(y&&y.nodeType==1)},_isFunction(y){return!!(y&&y.constructor&&y.call&&y.apply)},_isPlainObject(y){return!!y&&y.constructor===Object},_isArray(y){return Object.prototype.toString.call(y)===r},_isNumber(y){return Object.prototype.toString.call(y)===i&&!isNaN(y)&&isFinite(y)},_isString(y){return Object.prototype.toString.call(y)===n},_isBoolean(y){return Object.prototype.toString.call(y)===o},isObject(y){return y instanceof Object},isValidSelector(y){if(typeof y!="string")return!1;var k=y[0];return k==="#"||k==="."||k===k.toUpperCase()},_sign(y){return y===0||y>0?1:-1},requestAnimFrame(y){S.push(y),S.length===1&&P(function(){const k=S;S=[],k.forEach(function(R){R()})})},createCanvasElement(){var y=document.createElement("canvas");try{y.style=y.style||{}}catch{}return y},createImageElement(){return document.createElement("img")},_isInDocument(y){for(;y=y.parentNode;)if(y==document)return!0;return!1},_urlToImage(y,k){var R=a.Util.createImageElement();R.onload=function(){k(R)},R.src=y},_rgbToHex(y,k,R){return((1<<24)+(y<<16)+(k<<8)+R).toString(16).slice(1)},_hexToRgb(y){y=y.replace(u,p);var k=parseInt(y,16);return{r:k>>16&255,g:k>>8&255,b:k&255}},getRandomColor(){for(var y=(Math.random()*16777215<<0).toString(16);y.length<6;)y=v+y;return u+y},getRGB(y){var k;return y in w?(k=w[y],{r:k[0],g:k[1],b:k[2]}):y[0]===u?this._hexToRgb(y.substring(1)):y.substr(0,4)===b?(k=x.exec(y.replace(/ /g,"")),{r:parseInt(k[1],10),g:parseInt(k[2],10),b:parseInt(k[3],10)}):{r:0,g:0,b:0}},colorToRGBA(y){return y=y||"black",a.Util._namedColorToRBA(y)||a.Util._hex3ColorToRGBA(y)||a.Util._hex4ColorToRGBA(y)||a.Util._hex6ColorToRGBA(y)||a.Util._hex8ColorToRGBA(y)||a.Util._rgbColorToRGBA(y)||a.Util._rgbaColorToRGBA(y)||a.Util._hslColorToRGBA(y)},_namedColorToRBA(y){var k=w[y.toLowerCase()];return k?{r:k[0],g:k[1],b:k[2],a:1}:null},_rgbColorToRGBA(y){if(y.indexOf("rgb(")===0){y=y.match(/rgb\(([^)]+)\)/)[1];var k=y.split(/ *, */).map(Number);return{r:k[0],g:k[1],b:k[2],a:1}}},_rgbaColorToRGBA(y){if(y.indexOf("rgba(")===0){y=y.match(/rgba\(([^)]+)\)/)[1];var k=y.split(/ *, */).map((R,z)=>R.slice(-1)==="%"?z===3?parseInt(R)/100:parseInt(R)/100*255:Number(R));return{r:k[0],g:k[1],b:k[2],a:k[3]}}},_hex8ColorToRGBA(y){if(y[0]==="#"&&y.length===9)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:parseInt(y.slice(7,9),16)/255}},_hex6ColorToRGBA(y){if(y[0]==="#"&&y.length===7)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:1}},_hex4ColorToRGBA(y){if(y[0]==="#"&&y.length===5)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:parseInt(y[4]+y[4],16)/255}},_hex3ColorToRGBA(y){if(y[0]==="#"&&y.length===4)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:1}},_hslColorToRGBA(y){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(y)){const[k,...R]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(y),z=Number(R[0])/360,W=Number(R[1])/100,C=Number(R[2])/100;let X,q,A;if(W===0)return A=C*255,{r:Math.round(A),g:Math.round(A),b:Math.round(A),a:1};C<.5?X=C*(1+W):X=C+W-C*W;const T=2*C-X,G=[0,0,0];for(let U=0;U<3;U++)q=z+1/3*-(U-1),q<0&&q++,q>1&&q--,6*q<1?A=T+(X-T)*6*q:2*q<1?A=X:3*q<2?A=T+(X-T)*(2/3-q)*6:A=T,G[U]=A*255;return{r:Math.round(G[0]),g:Math.round(G[1]),b:Math.round(G[2]),a:1}}},haveIntersection(y,k){return!(k.x>y.x+y.width||k.x+k.width<y.x||k.y>y.y+y.height||k.y+k.height<y.y)},cloneObject(y){var k={};for(var R in y)this._isPlainObject(y[R])?k[R]=this.cloneObject(y[R]):this._isArray(y[R])?k[R]=this.cloneArray(y[R]):k[R]=y[R];return k},cloneArray(y){return y.slice(0)},degToRad(y){return y*h},radToDeg(y){return y*l},_degToRad(y){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(y)},_radToDeg(y){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(y)},_getRotation(y){return t.Konva.angleDeg?a.Util.radToDeg(y):y},_capitalize(y){return y.charAt(0).toUpperCase()+y.slice(1)},throw(y){throw new Error(f+y)},error(y){console.error(f+y)},warn(y){t.Konva.showWarnings&&console.warn(m+y)},each(y,k){for(var R in y)k(R,y[R])},_inRange(y,k,R){return k<=y&&y<R},_getProjectionToSegment(y,k,R,z,W,C){var X,q,A,T=(y-R)*(y-R)+(k-z)*(k-z);if(T==0)X=y,q=k,A=(W-R)*(W-R)+(C-z)*(C-z);else{var G=((W-y)*(R-y)+(C-k)*(z-k))/T;G<0?(X=y,q=k,A=(y-W)*(y-W)+(k-C)*(k-C)):G>1?(X=R,q=z,A=(R-W)*(R-W)+(z-C)*(z-C)):(X=y+G*(R-y),q=k+G*(z-k),A=(X-W)*(X-W)+(q-C)*(q-C))}return[X,q,A]},_getProjectionToLine(y,k,R){var z=a.Util.cloneObject(y),W=Number.MAX_VALUE;return k.forEach(function(C,X){if(!(!R&&X===k.length-1)){var q=k[(X+1)%k.length],A=a.Util._getProjectionToSegment(C.x,C.y,q.x,q.y,y.x,y.y),T=A[0],G=A[1],U=A[2];U<W&&(z.x=T,z.y=G,W=U)}}),z},_prepareArrayForTween(y,k,R){var z,W=[],C=[];if(y.length>k.length){var X=k;k=y,y=X}for(z=0;z<y.length;z+=2)W.push({x:y[z],y:y[z+1]});for(z=0;z<k.length;z+=2)C.push({x:k[z],y:k[z+1]});var q=[];return C.forEach(function(A){var T=a.Util._getProjectionToLine(A,W,R);q.push(T.x),q.push(T.y)}),q},_prepareToStringify(y){var k;y.visitedByCircularReferenceRemoval=!0;for(var R in y)if(y.hasOwnProperty(R)&&y[R]&&typeof y[R]=="object"){if(k=Object.getOwnPropertyDescriptor(y,R),y[R].visitedByCircularReferenceRemoval||a.Util._isElement(y[R]))if(k.configurable)delete y[R];else return null;else if(a.Util._prepareToStringify(y[R])===null)if(k.configurable)delete y[R];else return null}return delete y.visitedByCircularReferenceRemoval,y},_assign(y,k){for(var R in k)y[R]=k[R];return y},_getFirstPointerId(y){return y.touches?y.changedTouches[0].identifier:y.pointerId||999},releaseCanvas(...y){t.Konva.releaseCanvasOnDestroy&&y.forEach(k=>{k.width=0,k.height=0})},drawRoundedRectPath(y,k,R,z){let W=0,C=0,X=0,q=0;typeof z=="number"?W=C=X=q=Math.min(z,k/2,R/2):(W=Math.min(z[0]||0,k/2,R/2),C=Math.min(z[1]||0,k/2,R/2),q=Math.min(z[2]||0,k/2,R/2),X=Math.min(z[3]||0,k/2,R/2)),y.moveTo(W,0),y.lineTo(k-C,0),y.arc(k-C,C,C,Math.PI*3/2,0,!1),y.lineTo(k,R-q),y.arc(k-q,R-q,q,0,Math.PI/2,!1),y.lineTo(X,R),y.arc(X,R-X,X,Math.PI/2,Math.PI,!1),y.lineTo(0,W),y.arc(W,W,W,Math.PI,Math.PI*3/2,!1)}}})(Te);var Ee={},re={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getComponentValidator=Dt.getBooleanValidator=Dt.getNumberArrayValidator=Dt.getFunctionValidator=Dt.getStringOrGradientValidator=Dt.getStringValidator=Dt.getNumberOrAutoValidator=Dt.getNumberOrArrayOfNumbersValidator=Dt.getNumberValidator=Dt.alphaComponent=Dt.RGBComponent=void 0;const Wi=ne,je=Te;function $i(a){return je.Util._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||je.Util._isBoolean(a)?a:Object.prototype.toString.call(a)}function y5(a){return a>255?255:a<0?0:Math.round(a)}Dt.RGBComponent=y5;function _5(a){return a>1?1:a<1e-4?1e-4:a}Dt.alphaComponent=_5;function w5(){if(Wi.Konva.isUnminified)return function(a,t){return je.Util._isNumber(a)||je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),a}}Dt.getNumberValidator=w5;function S5(a){if(Wi.Konva.isUnminified)return function(t,e){let r=je.Util._isNumber(t),i=je.Util._isArray(t)&&t.length==a;return!r&&!i&&je.Util.warn($i(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+a+")"),t}}Dt.getNumberOrArrayOfNumbersValidator=S5;function x5(){if(Wi.Konva.isUnminified)return function(a,t){var e=je.Util._isNumber(a),r=a==="auto";return e||r||je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),a}}Dt.getNumberOrAutoValidator=x5;function A5(){if(Wi.Konva.isUnminified)return function(a,t){return je.Util._isString(a)||je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),a}}Dt.getStringValidator=A5;function N5(){if(Wi.Konva.isUnminified)return function(a,t){const e=je.Util._isString(a),r=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return e||r||je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),a}}Dt.getStringOrGradientValidator=N5;function L5(){if(Wi.Konva.isUnminified)return function(a,t){return je.Util._isFunction(a)||je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),a}}Dt.getFunctionValidator=L5;function C5(){if(Wi.Konva.isUnminified)return function(a,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&a instanceof e||(je.Util._isArray(a)?a.forEach(function(r){je.Util._isNumber(r)||je.Util.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),a}}Dt.getNumberArrayValidator=C5;function P5(){if(Wi.Konva.isUnminified)return function(a,t){var e=a===!0||a===!1;return e||je.Util.warn($i(a)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),a}}Dt.getBooleanValidator=P5;function k5(a){if(Wi.Konva.isUnminified)return function(t,e){return t==null||je.Util.isObject(t)||je.Util.warn($i(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+a),t}}Dt.getComponentValidator=k5;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const t=Te,e=Dt;var r="get",i="set";a.Factory={addGetterSetter(n,o,h,l,u){a.Factory.addGetter(n,o,h),a.Factory.addSetter(n,o,l,u),a.Factory.addOverloadedGetterSetter(n,o)},addGetter(n,o,h){var l=r+t.Util._capitalize(o);n.prototype[l]=n.prototype[l]||function(){var u=this.attrs[o];return u===void 0?h:u}},addSetter(n,o,h,l){var u=i+t.Util._capitalize(o);n.prototype[u]||a.Factory.overWriteSetter(n,o,h,l)},overWriteSetter(n,o,h,l){var u=i+t.Util._capitalize(o);n.prototype[u]=function(p){return h&&p!==void 0&&p!==null&&(p=h.call(this,p,o)),this._setAttr(o,p),l&&l.call(this),this}},addComponentsGetterSetter(n,o,h,l,u){var p=h.length,v=t.Util._capitalize,m=r+v(o),f=i+v(o),b,w;n.prototype[m]=function(){var S={};for(b=0;b<p;b++)w=h[b],S[w]=this.getAttr(o+v(w));return S};var x=(0,e.getComponentValidator)(h);n.prototype[f]=function(S){var P=this.attrs[o],y;l&&(S=l.call(this,S)),x&&x.call(this,S,o);for(y in S)S.hasOwnProperty(y)&&this._setAttr(o+v(y),S[y]);return S||h.forEach(k=>{this._setAttr(o+v(k),void 0)}),this._fireChangeEvent(o,P,S),u&&u.call(this),this},a.Factory.addOverloadedGetterSetter(n,o)},addOverloadedGetterSetter(n,o){var h=t.Util._capitalize(o),l=i+h,u=r+h;n.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(n,o,h,l){t.Util.error("Adding deprecated "+o);var u=r+t.Util._capitalize(o),p=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[u]=function(){t.Util.error(p);var v=this.attrs[o];return v===void 0?h:v},a.Factory.addSetter(n,o,l,function(){t.Util.error(p)}),a.Factory.addOverloadedGetterSetter(n,o)},backCompat(n,o){t.Util.each(o,function(h,l){var u=n.prototype[l],p=r+t.Util._capitalize(h),v=i+t.Util._capitalize(h);function m(){u.apply(this,arguments),t.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}n.prototype[h]=m,n.prototype[p]=m,n.prototype[v]=m})},afterSetFilter(){this._filterUpToDate=!1}}})(re);var hi={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.HitContext=Hi.SceneContext=Hi.Context=void 0;const e2=Te,F5=ne;function E5(a){var t=[],e=a.length,r=e2.Util,i,n;for(i=0;i<e;i++)n=a[i],r._isNumber(n)?n=Math.round(n*1e3)/1e3:r._isString(n)||(n=n+""),t.push(n);return t}var K0=",",I5="(",T5=")",M5="([",O5="])",R5=";",D5="()",B5="=",J0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],j5=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const G5=100;class ih{constructor(t){this.canvas=t,F5.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){var r=this.traceArr,i=r.length,n="",o,h,l,u;for(o=0;o<i;o++)h=r[o],l=h.method,l?(u=h.args,n+=l,t?n+=D5:e2.Util._isArray(u[0])?n+=M5+u.join(K0)+O5:(e&&(u=u.map(p=>typeof p=="number"?Math.floor(p):p)),n+=I5+u.join(K0)+T5)):(n+=h.property,t||(n+=B5+h.val)),n+=R5;return n}clearTrace(){this.traceArr=[]}_trace(t){var e=this.traceArr,r;e.push(t),r=e.length,r>=G5&&e.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){var e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,r,i,n,o){this._context.arc(t,e,r,i,n,o)}arcTo(t,e,r,i,n){this._context.arcTo(t,e,r,i,n)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,r,i,n,o){this._context.bezierCurveTo(t,e,r,i,n,o)}clearRect(t,e,r,i){this._context.clearRect(t,e,r,i)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){var r=arguments;if(r.length===2)return this._context.createImageData(t,e);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,r,i){return this._context.createLinearGradient(t,e,r,i)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,r,i,n,o){return this._context.createRadialGradient(t,e,r,i,n,o)}drawImage(t,e,r,i,n,o,h,l,u){var p=arguments,v=this._context;p.length===3?v.drawImage(t,e,r):p.length===5?v.drawImage(t,e,r,i,n):p.length===9&&v.drawImage(t,e,r,i,n,o,h,l,u)}ellipse(t,e,r,i,n,o,h,l){this._context.ellipse(t,e,r,i,n,o,h,l)}isPointInPath(t,e,r,i){return r?this._context.isPointInPath(r,t,e,i):this._context.isPointInPath(t,e,i)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,r,i){this._context.fillRect(t,e,r,i)}strokeRect(t,e,r,i){this._context.strokeRect(t,e,r,i)}fillText(t,e,r,i){i?this._context.fillText(t,e,r,i):this._context.fillText(t,e,r)}measureText(t){return this._context.measureText(t)}getImageData(t,e,r,i){return this._context.getImageData(t,e,r,i)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,r,i){this._context.rect(t,e,r,i)}roundRect(t,e,r,i,n){this._context.roundRect(t,e,r,i,n)}putImageData(t,e,r){this._context.putImageData(t,e,r)}quadraticCurveTo(t,e,r,i){this._context.quadraticCurveTo(t,e,r,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,r,i,n,o){this._context.setTransform(t,e,r,i,n,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,r,i){this._context.strokeText(t,e,r,i)}transform(t,e,r,i,n,o){this._context.transform(t,e,r,i,n,o)}translate(t,e){this._context.translate(t,e)}_enableTrace(){var t=this,e=J0.length,r=this.setAttr,i,n,o=function(h){var l=t[h],u;t[h]=function(){return n=E5(Array.prototype.slice.call(arguments,0)),u=l.apply(t,arguments),t._trace({method:h,args:n}),u}};for(i=0;i<e;i++)o(J0[i]);t.setAttr=function(){r.apply(t,arguments);var h=arguments[0],l=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:h,val:l})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;var r=!e||e==="source-over";r||this.setAttr("globalCompositeOperation",e)}}Hi.Context=ih;j5.forEach(function(a){Object.defineProperty(ih.prototype,a,{get(){return this._context[a]},set(t){this._context[a]=t}})});class q5 extends ih{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),r=t.getFillPriority();if(e&&r==="color"){this._fillColor(t);return}const i=t.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(t);return}const n=t.getFillLinearGradientColorStops();if(n&&r==="linear-gradient"){this._fillLinearGradient(t);return}const o=t.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):i?this._fillPattern(t):n?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),n=this.createLinearGradient(e.x,e.y,r.x,r.y);if(i){for(var o=0;o<i.length;o+=2)n.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",n)}}_stroke(t){var e=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var n=t.getStrokeLinearGradientColorStops();n?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var e,r,i,n=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",o=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,h=(i=t.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=t.getAbsoluteScale(),u=this.canvas.getPixelRatio(),p=l.x*u,v=l.y*u;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",o*Math.min(Math.abs(p),Math.abs(v))),this.setAttr("shadowOffsetX",h.x*p),this.setAttr("shadowOffsetY",h.y*v)}}Hi.SceneContext=q5;class U5 extends ih{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();var e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}Hi.HitContext=U5;Object.defineProperty(hi,"__esModule",{value:!0});hi.HitCanvas=hi.SceneCanvas=hi.Canvas=void 0;const Wo=Te,r2=Hi,i2=ne,z5=re,V5=Dt;var Io;function H5(){if(Io)return Io;var a=Wo.Util.createCanvasElement(),t=a.getContext("2d");return Io=function(){var e=i2.Konva._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/r}(),Wo.Util.releaseCanvas(a),Io}class nh{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=t||{},r=e.pixelRatio||i2.Konva.pixelRatio||H5();this.pixelRatio=r,this._canvas=Wo.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio,r=this.getContext()._context;r.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio,r=this.getContext()._context;r.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(i){return Wo.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}hi.Canvas=nh;z5.Factory.addGetterSetter(nh,"pixelRatio",void 0,(0,V5.getNumberValidator)());class W5 extends nh{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new r2.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}hi.SceneCanvas=W5;class $5 extends nh{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new r2.HitContext(this),this.setSize(t.width,t.height)}}hi.HitCanvas=$5;var ah={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const t=ne,e=Te;a.DD={get isDragging(){var r=!1;return a.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return a.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];a.DD._dragElements.forEach((n,o)=>{const{node:h}=n,l=h.getStage();l.setPointersPositions(r),n.pointerId===void 0&&(n.pointerId=e.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(m=>m.id===n.pointerId);if(u){if(n.dragStatus!=="dragging"){var p=h.dragDistance(),v=Math.max(Math.abs(u.x-n.startPointerPos.x),Math.abs(u.y-n.startPointerPos.y));if(v<p||(h.startDrag({evt:r}),!h.isDragging()))return}h._setDragPosition(r,n),i.push(h)}}),i.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:r},!0)})},_endDragBefore(r){const i=[];a.DD._dragElements.forEach(n=>{const{node:o}=n,h=o.getStage();if(r&&h.setPointersPositions(r),!h._changedPointerPositions.find(p=>p.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(a.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,n.dragStatus="stopped");const u=n.node.getLayer()||n.node instanceof t.Konva.Stage&&n.node;u&&i.indexOf(u)===-1&&i.push(u)}),i.forEach(n=>{n.draw()})},_endDragAfter(r){a.DD._dragElements.forEach((i,n)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&a.DD._dragElements.delete(n)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1))})(ah);Object.defineProperty(Ee,"__esModule",{value:!0});Ee.Node=void 0;const oe=Te,Os=re,Ls=hi,Rn=ne,zr=ah,We=Dt;var Uo="absoluteOpacity",To="allEventListeners",Ui="absoluteTransform",Q0="absoluteScale",Dn="canvas",Y5="Change",X5="children",K5="konva",S1="listening",Z0="mouseenter",tc="mouseleave",ec="set",rc="Shape",zo=" ",ic="stage",gn="transform",J5="Stage",x1="visible",Q5=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(zo);let Z5=1;class $t{constructor(t){this._id=Z5++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===gn||t===Ui)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){var r=this._cache.get(t),i=t===gn||t===Ui,n=r===void 0||i&&r.dirty===!0;return n&&(r=e.call(this),this._cache.set(t,r)),r}_calculate(t,e,r){if(!this._attachedDepsListeners.get(t)){const i=e.map(n=>n+"Change.konva").join(zo);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(Dn)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Ui&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Dn)){const{scene:t,filter:e,hit:r}=this._cache.get(Dn);oe.Util.releaseCanvas(t,e,r),this._cache.delete(Dn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var e=t||{},r={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(e.width||r.width),n=Math.ceil(e.height||r.height),o=e.pixelRatio,h=e.x===void 0?Math.floor(r.x):e.x,l=e.y===void 0?Math.floor(r.y):e.y,u=e.offset||0,p=e.drawBorder||!1,v=e.hitCanvasPixelRatio||1;if(!i||!n){oe.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const m=Math.abs(Math.round(r.x)-h)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;i+=u*2+m,n+=u*2+f,h-=u,l-=u;var b=new Ls.SceneCanvas({pixelRatio:o,width:i,height:n}),w=new Ls.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),x=new Ls.HitCanvas({pixelRatio:v,width:i,height:n}),S=b.getContext(),P=x.getContext();return x.isCache=!0,b.isCache=!0,this._cache.delete(Dn),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(b.getContext()._context.imageSmoothingEnabled=!1,w.getContext()._context.imageSmoothingEnabled=!1),S.save(),P.save(),S.translate(-h,-l),P.translate(-h,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Uo),this._clearSelfAndDescendantCache(Q0),this.drawScene(b,this),this.drawHit(x,this),this._isUnderCache=!1,S.restore(),P.restore(),p&&(S.save(),S.beginPath(),S.rect(0,0,i,n),S.closePath(),S.setAttr("strokeStyle","red"),S.setAttr("lineWidth",5),S.stroke(),S.restore()),this._cache.set(Dn,{scene:b,filter:w,hit:x,x:h,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Dn)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],i=1/0,n=1/0,o=-1/0,h=-1/0,l=this.getAbsoluteTransform(e);return r.forEach(function(u){var p=l.point(u);i===void 0&&(i=o=p.x,n=h=p.y),i=Math.min(i,p.x),n=Math.min(n,p.y),o=Math.max(o,p.x),h=Math.max(h,p.y)}),{x:i,y:n,width:o-i,height:h-n}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/i,r.height/i),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),r=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),e=this._getCanvasCache(),r=e.scene,i=e.filter,n=i.getContext(),o,h,l,u;if(t){if(!this._filterUpToDate){var p=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=t.length,n.clear(),n.drawImage(r._canvas,0,0,r.getWidth()/p,r.getHeight()/p),h=n.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<o;l++){if(u=t[l],typeof u!="function"){oe.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,h),n.putImageData(h,0,0)}}catch(v){oe.Util.error("Unable to apply filter. "+v.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(t,e){if(this._cache&&this._cache.delete(To),arguments.length===3)return this._delegate.apply(this,arguments);var r=t.split(zo),i=r.length,n,o,h,l,u;for(n=0;n<i;n++)o=r[n],h=o.split("."),l=h[0],u=h[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:e});return this}off(t,e){var r=(t||"").split(zo),i=r.length,n,o,h,l,u,p;if(this._cache&&this._cache.delete(To),!t)for(o in this.eventListeners)this._off(o);for(n=0;n<i;n++)if(h=r[n],l=h.split("."),u=l[0],p=l[1],u)this.eventListeners[u]&&this._off(u,p,e);else for(o in this.eventListeners)this._off(o,p,e);return this}dispatchEvent(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(r){e.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,r){var i=this;this.on(t,function(n){for(var o=n.target.findAncestors(e,!0,i),h=0;h<o.length;h++)n=oe.Util.cloneObject(n),n.currentTarget=o[h],r.call(o[h],n)})}remove(){return this.isDragging()&&this.stopDrag(),zr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ui),this._clearSelfAndDescendantCache(Uo),this._clearSelfAndDescendantCache(Q0),this._clearSelfAndDescendantCache(ic),this._clearSelfAndDescendantCache(x1),this._clearSelfAndDescendantCache(S1)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var e="get"+oe.Util._capitalize(t);return oe.Util._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var e,r;if(!t)return this;for(e in t)e!==X5&&(r=ec+oe.Util._capitalize(e),oe.Util._isFunction(this[r])?this[r](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(S1,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(x1,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),i=!1;zr.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var n=!e&&!Rn.Konva.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!n}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),e=this,r=0,i,n,o,h;function l(p){for(i=[],n=p.length,o=0;o<n;o++)h=p[o],r++,h.nodeType!==rc&&(i=i.concat(h.getChildren().slice())),h._id===e._id&&(o=n);i.length>0&&i[0].getDepth()<=t&&l(i)}const u=this.getStage();return e.nodeType!==J5&&u&&l(u.getChildren()),r}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(gn),this._clearSelfAndDescendantCache(Ui)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;var e=t.getPointerPosition();if(!e)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(e)}getAbsolutePosition(t){let e=!1,r=this.parent;for(;r;){if(r.isCached()){e=!0;break}r=r.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),n=new oe.Transform,o=this.offset();return n.m=i.slice(),n.translate(o.x,o.y),n.getTranslation()}setAbsolutePosition(t){const{x:e,y:r,...i}=this._clearTransform();this.attrs.x=e,this.attrs.y=r,this._clearCache(gn);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(gn),this._clearSelfAndDescendantCache(Ui),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,r=t.y,i=this.x(),n=this.y();return e!==void 0&&(i+=e),r!==void 0&&(n+=r),this.setPosition({x:i,y:n}),this}_eachAncestorReverse(t,e){var r=[],i=this.getParent(),n,o;if(!(e&&e._id===this._id)){for(r.unshift(this);i&&(!e||i._id!==e._id);)r.unshift(i),i=i.parent;for(n=r.length,o=0;o<n;o++)t(r[o])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return oe.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return oe.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return oe.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return oe.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return oe.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&oe.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Uo,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t=this.getAttrs(),e,r,i,n,o;const h={attrs:{},className:this.getClassName()};for(e in t)r=t[e],o=oe.Util.isObject(r)&&!oe.Util._isPlainObject(r)&&!oe.Util._isArray(r),!o&&(i=typeof this[e]=="function"&&this[e],delete t[e],n=i?i.call(this):null,t[e]=r,n!==r&&(h.attrs[e]=r));return oe.Util._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,r){var i=[];e&&this._isMatch(t)&&i.push(this);for(var n=this.parent;n;){if(n===r)return i;n._isMatch(t)&&i.push(n),n=n.parent}return i}isAncestorOf(t){return!1}findAncestor(t,e,r){return this.findAncestors(t,e,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var e=t.replace(/ /g,"").split(","),r=e.length,i,n;for(i=0;i<r;i++)if(n=e[i],oe.Util.isValidSelector(n)||(oe.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),oe.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),oe.Util.warn("Konva is awesome, right?")),n.charAt(0)==="#"){if(this.id()===n.slice(1))return!0}else if(n.charAt(0)==="."){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(ic,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():null}fire(t,e={},r){return e.target=e.target||this,r?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Ui,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var e;if(t)return e=new oe.Transform,this._eachAncestorReverse(function(i){var n=i.transformsEnabled();n==="all"?e.multiply(i.getTransform()):n==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;e=this._cache.get(Ui)||new oe.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var r=this.transformsEnabled();if(r==="all")e.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,n=this.attrs.y||0,o=this.attrs.offsetX||0,h=this.attrs.offsetY||0;e.translate(i-o,n-h)}return e.dirty=!1,e}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(gn,this._getTransform)}_getTransform(){var t,e,r=this._cache.get(gn)||new oe.Transform;r.reset();var i=this.x(),n=this.y(),o=Rn.Konva.getAngle(this.rotation()),h=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,u=this.attrs.skewX||0,p=this.attrs.skewY||0,v=this.attrs.offsetX||0,m=this.attrs.offsetY||0;return(i!==0||n!==0)&&r.translate(i,n),o!==0&&r.rotate(o),(u!==0||p!==0)&&r.skew(u,p),(h!==1||l!==1)&&r.scale(h,l),(v!==0||m!==0)&&r.translate(-1*v,-1*m),r.dirty=!1,r}clone(t){var e=oe.Util.cloneObject(this.attrs),r,i,n,o,h;for(r in t)e[r]=t[r];var l=new this.constructor(e);for(r in this.eventListeners)for(i=this.eventListeners[r],n=i.length,o=0;o<n;o++)h=i[o],h.name.indexOf(K5)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(h));return l}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),r=this.getStage(),i=t.x!==void 0?t.x:Math.floor(e.x),n=t.y!==void 0?t.y:Math.floor(e.y),o=t.pixelRatio||1,h=new Ls.SceneCanvas({width:t.width||Math.ceil(e.width)||(r?r.width():0),height:t.height||Math.ceil(e.height)||(r?r.height():0),pixelRatio:o}),l=h.getContext();const u=new Ls.SceneCanvas({width:h.width/h.pixelRatio,height:h.height/h.pixelRatio,pixelRatio:h.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||n)&&l.translate(-1*i,-1*n),this.drawScene(h,void 0,u),l.restore(),h}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var e=t.mimeType||null,r=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,r);return t.callback&&t.callback(i),i}toImage(t){return new Promise((e,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,oe.Util._urlToImage(this.toDataURL(t),function(n){e(n),i==null||i(n)})}catch(i){r(i)}})}toBlob(t){return new Promise((e,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob(n=>{e(n),i==null||i(n)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(i){r(i)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Rn.Konva.dragDistance}_off(t,e,r){var i=this.eventListeners[t],n,o,h;for(n=0;n<i.length;n++)if(o=i[n].name,h=i[n].handler,(o!=="konva"||e==="konva")&&(!e||o===e)&&(!r||r===h)){if(i.splice(n,1),i.length===0){delete this.eventListeners[t];break}n--}}_fireChangeEvent(t,e,r){this._fire(t+Y5,{oldVal:e,newVal:r})}addName(t){if(!this.hasName(t)){var e=this.name(),r=e?e+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const e=this.name();if(!e)return!1;var r=(e||"").split(/\s/g);return r.indexOf(t)!==-1}removeName(t){var e=(this.name()||"").split(/\s/g),r=e.indexOf(t);return r!==-1&&(e.splice(r,1),this.name(e.join(" "))),this}setAttr(t,e){var r=this[ec+oe.Util._capitalize(t)];return oe.Util._isFunction(r)?r.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Rn.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,e){var r=this.attrs[t];r===e&&!oe.Util.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,e),this._requestDraw())}_setComponentAttr(t,e,r){var i;r!==void 0&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=r,this._fireChangeEvent(t,i,r))}_fireAndBubble(t,e,r){e&&this.nodeType===rc&&(e.target=this);var i=(t===Z0||t===tc)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(t,e);var n=(t===Z0||t===tc)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,e,r):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,r,i;const n=(e=this._cache.get(To))!==null&&e!==void 0?e:{};let o=n==null?void 0:n[t];if(o===void 0){o=[];let h=Object.getPrototypeOf(this);for(;h;){const l=(i=(r=h.eventListeners)===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:[];o.push(...l),h=Object.getPrototypeOf(h)}n[t]=o,this._cache.set(To,n)}return o}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const r=this._getProtoListeners(t);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,e);const n=this.eventListeners[t];if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(r){var n=r._getPointerById(e)||r._changedPointerPositions[0]||i;zr.DD._dragElements.set(this._id,{node:this,startPointerPos:n,offset:{x:n.x-i.x,y:n.y-i.y},dragStatus:"ready",pointerId:e})}}startDrag(t,e=!0){zr.DD._dragElements.has(this._id)||this._createDragElement(t);const r=zr.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const r=this.getStage()._getPointerById(e.pointerId);if(r){var i={x:r.x-e.offset.x,y:r.y-e.offset.y},n=this.dragBoundFunc();if(n!==void 0){const o=n.call(this,i,t);o?i=o:oe.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(t){const e=zr.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),zr.DD._endDragBefore(t),zr.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=zr.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var e=t.evt.button!==void 0,r=!e||Rn.Konva.dragButtons.indexOf(t.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;zr.DD._dragElements.forEach(n=>{this.isAncestorOf(n.node)&&(i=!0)}),i||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const e=zr.DD._dragElements.get(this._id),r=e&&e.dragStatus==="dragging",i=e&&e.dragStatus==="ready";r?this.stopDrag():i&&zr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const r={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return oe.Util.haveIntersection(r,this.getClientRect())}static create(t,e){return oe.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){var r=$t.prototype.getClassName.call(t),i=t.children,n,o,h;e&&(t.attrs.container=e),Rn.Konva[r]||(oe.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Rn.Konva[r];if(n=new l(t.attrs),i)for(o=i.length,h=0;h<o;h++)n.add($t._createNode(i[h]));return n}}Ee.Node=$t;$t.prototype.nodeType="Node";$t.prototype._attrsAffectingSize=[];$t.prototype.eventListeners={};$t.prototype.on.call($t.prototype,Q5,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(gn),this._clearSelfAndDescendantCache(Ui)});$t.prototype.on.call($t.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(x1)});$t.prototype.on.call($t.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(S1)});$t.prototype.on.call($t.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Uo)});const Le=Os.Factory.addGetterSetter;Le($t,"zIndex");Le($t,"absolutePosition");Le($t,"position");Le($t,"x",0,(0,We.getNumberValidator)());Le($t,"y",0,(0,We.getNumberValidator)());Le($t,"globalCompositeOperation","source-over",(0,We.getStringValidator)());Le($t,"opacity",1,(0,We.getNumberValidator)());Le($t,"name","",(0,We.getStringValidator)());Le($t,"id","",(0,We.getStringValidator)());Le($t,"rotation",0,(0,We.getNumberValidator)());Os.Factory.addComponentsGetterSetter($t,"scale",["x","y"]);Le($t,"scaleX",1,(0,We.getNumberValidator)());Le($t,"scaleY",1,(0,We.getNumberValidator)());Os.Factory.addComponentsGetterSetter($t,"skew",["x","y"]);Le($t,"skewX",0,(0,We.getNumberValidator)());Le($t,"skewY",0,(0,We.getNumberValidator)());Os.Factory.addComponentsGetterSetter($t,"offset",["x","y"]);Le($t,"offsetX",0,(0,We.getNumberValidator)());Le($t,"offsetY",0,(0,We.getNumberValidator)());Le($t,"dragDistance",null,(0,We.getNumberValidator)());Le($t,"width",0,(0,We.getNumberValidator)());Le($t,"height",0,(0,We.getNumberValidator)());Le($t,"listening",!0,(0,We.getBooleanValidator)());Le($t,"preventDefault",!0,(0,We.getBooleanValidator)());Le($t,"filters",null,function(a){return this._filterUpToDate=!1,a});Le($t,"visible",!0,(0,We.getBooleanValidator)());Le($t,"transformsEnabled","all",(0,We.getStringValidator)());Le($t,"size");Le($t,"dragBoundFunc");Le($t,"draggable",!1,(0,We.getBooleanValidator)());Os.Factory.backCompat($t,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Container=void 0;const za=re,Zl=Ee,sh=Dt;let $n=class extends Zl.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const e=this.children||[];var r=[];return e.forEach(function(i){t(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(var e=0;e<t.length;e++)this.add(t[e]);return this}const r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){var r=[];return this._descendants(i=>{const n=i._isMatch(t);return n&&r.push(i),!!(n&&e)}),r}_descendants(t){let e=!1;const r=this.getChildren();for(const i of r){if(e=t(i),e)return!0;if(i.hasChildren()&&(e=i._descendants(t),e))return!0}return!1}toObject(){var t=Zl.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){var e=Zl.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){e.add(r.clone())}),e}getAllIntersections(t){var e=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(t)&&e.push(r)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,r){e.index=r}),this._requestDraw()}drawScene(t,e,r){var i=this.getLayer(),n=t||i&&i.getCanvas(),o=n&&n.getContext(),h=this._getCanvasCache(),l=h&&h.scene,u=n&&n.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var p=this.getAbsoluteTransform(e).getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",n,e,r);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;var r=this.getLayer(),i=t||r&&r.hitCanvas,n=i&&i.getContext(),o=this._getCanvasCache(),h=o&&o.hit;if(h){n.save();var l=this.getAbsoluteTransform(e).getMatrix();n.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(n),n.restore()}else this._drawChildren("drawHit",i,e);return this}_drawChildren(t,e,r,i){var n,o=e&&e.getContext(),h=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),p=h&&l||u;const v=r===this;if(p){o.save();var m=this.getAbsoluteTransform(r),f=m.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let S;if(u)S=u.call(this,o,this);else{var b=this.clipX(),w=this.clipY();o.rect(b,w,h,l)}o.clip.apply(o,S),f=m.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var x=!v&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";x&&(o.save(),o._applyGlobalCompositeOperation(this)),(n=this.children)===null||n===void 0||n.forEach(function(S){S[t](e,r,i)}),x&&o.restore(),p&&o.restore()}getClientRect(t={}){var e,r=t.skipTransform,i=t.relativeTo,n,o,h,l,u={x:1/0,y:1/0,width:0,height:0},p=this;(e=this.children)===null||e===void 0||e.forEach(function(w){if(w.visible()){var x=w.getClientRect({relativeTo:p,skipShadow:t.skipShadow,skipStroke:t.skipStroke});x.width===0&&x.height===0||(n===void 0?(n=x.x,o=x.y,h=x.x+x.width,l=x.y+x.height):(n=Math.min(n,x.x),o=Math.min(o,x.y),h=Math.max(h,x.x+x.width),l=Math.max(l,x.y+x.height)))}});for(var v=this.find("Shape"),m=!1,f=0;f<v.length;f++){var b=v[f];if(b._isVisible(this)){m=!0;break}}return m&&n!==void 0?u={x:n,y:o,width:h-n,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,i)}};Wn.Container=$n;za.Factory.addComponentsGetterSetter($n,"clip",["x","y","width","height"]);za.Factory.addGetterSetter($n,"clipX",void 0,(0,sh.getNumberValidator)());za.Factory.addGetterSetter($n,"clipY",void 0,(0,sh.getNumberValidator)());za.Factory.addGetterSetter($n,"clipWidth",void 0,(0,sh.getNumberValidator)());za.Factory.addGetterSetter($n,"clipHeight",void 0,(0,sh.getNumberValidator)());za.Factory.addGetterSetter($n,"clipFunc");var n2={},Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.releaseCapture=Rr.setPointerCapture=Rr.hasPointerCapture=Rr.createEvent=Rr.getCapturedShape=void 0;const tf=ne,Ts=new Map,a2=tf.Konva._global.PointerEvent!==void 0;function ef(a){return Ts.get(a)}Rr.getCapturedShape=ef;function I1(a){return{evt:a,pointerId:a.pointerId}}Rr.createEvent=I1;function rf(a,t){return Ts.get(a)===t}Rr.hasPointerCapture=rf;function nf(a,t){s2(a),t.getStage()&&(Ts.set(a,t),a2&&t._fire("gotpointercapture",I1(new PointerEvent("gotpointercapture"))))}Rr.setPointerCapture=nf;function s2(a,t){const e=Ts.get(a);if(!e)return;const r=e.getStage();r&&r.content,Ts.delete(a),a2&&e._fire("lostpointercapture",I1(new PointerEvent("lostpointercapture")))}Rr.releaseCapture=s2;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const t=Te,e=re,r=Wn,i=ne,n=hi,o=ah,h=ne,l=Rr;var u="Stage",p="string",v="px",m="mouseout",f="mouseleave",b="mouseover",w="mouseenter",x="mousemove",S="mousedown",P="mouseup",y="pointermove",k="pointerdown",R="pointerup",z="pointercancel",W="lostpointercapture",C="pointerout",X="pointerleave",q="pointerover",A="pointerenter",T="contextmenu",G="touchstart",U="touchend",et="touchmove",st="touchcancel",lt="wheel",nt=5,dt=[[w,"_pointerenter"],[S,"_pointerdown"],[x,"_pointermove"],[P,"_pointerup"],[f,"_pointerleave"],[G,"_pointerdown"],[et,"_pointermove"],[U,"_pointerup"],[st,"_pointercancel"],[b,"_pointerover"],[lt,"_wheel"],[T,"_contextmenu"],[k,"_pointerdown"],[y,"_pointermove"],[R,"_pointerup"],[z,"_pointercancel"],[W,"_lostpointercapture"]];const ot={mouse:{[C]:m,[X]:f,[q]:b,[A]:w,[y]:x,[k]:S,[R]:P,[z]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[C]:"touchout",[X]:"touchleave",[q]:"touchover",[A]:"touchenter",[y]:et,[k]:G,[R]:U,[z]:st,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[C]:C,[X]:X,[q]:q,[A]:A,[y]:y,[k]:k,[R]:R,[z]:z,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},vt=rt=>rt.indexOf("pointer")>=0?"pointer":rt.indexOf("touch")>=0?"touch":"mouse",F=rt=>{const D=vt(rt);if(D==="pointer")return i.Konva.pointerEventsEnabled&&ot.pointer;if(D==="touch")return ot.touch;if(D==="mouse")return ot.mouse};function B(rt={}){return(rt.clipFunc||rt.clipWidth||rt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),rt}const V="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class J extends r.Container{constructor(D){super(B(D)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B(this.attrs)}),this._checkVisibility()}_validateAdd(D){const Y=D.getType()==="Layer",tt=D.getType()==="FastLayer";Y||tt||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const D=this.visible()?"":"none";this.content.style.display=D}setContainer(D){if(typeof D===p){if(D.charAt(0)==="."){var Y=D.slice(1);D=document.getElementsByClassName(Y)[0]}else{var tt;D.charAt(0)!=="#"?tt=D:tt=D.slice(1),D=document.getElementById(tt)}if(!D)throw"Can not find container in document with id "+tt}return this._setAttr("container",D),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),D.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var D=this.children,Y=D.length,tt;for(tt=0;tt<Y;tt++)D[tt].clear();return this}clone(D){return D||(D={}),D.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,D)}destroy(){super.destroy();var D=this.content;D&&t.Util._isInDocument(D)&&this.container().removeChild(D);var Y=a.stages.indexOf(this);return Y>-1&&a.stages.splice(Y,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const D=this._pointerPositions[0]||this._changedPointerPositions[0];return D?{x:D.x,y:D.y}:(t.Util.warn(V),null)}_getPointerById(D){return this._pointerPositions.find(Y=>Y.id===D)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(D){D=D||{},D.x=D.x||0,D.y=D.y||0,D.width=D.width||this.width(),D.height=D.height||this.height();var Y=new n.SceneCanvas({width:D.width,height:D.height,pixelRatio:D.pixelRatio||1}),tt=Y.getContext()._context,wt=this.children;return(D.x||D.y)&&tt.translate(-1*D.x,-1*D.y),wt.forEach(function(mt){if(mt.isVisible()){var At=mt._toKonvaCanvas(D);tt.drawImage(At._canvas,D.x,D.y,At.getWidth()/At.getPixelRatio(),At.getHeight()/At.getPixelRatio())}}),Y}getIntersection(D){if(!D)return null;var Y=this.children,tt=Y.length,wt=tt-1,mt;for(mt=wt;mt>=0;mt--){const At=Y[mt].getIntersection(D);if(At)return At}return null}_resizeDOM(){var D=this.width(),Y=this.height();this.content&&(this.content.style.width=D+v,this.content.style.height=Y+v),this.bufferCanvas.setSize(D,Y),this.bufferHitCanvas.setSize(D,Y),this.children.forEach(tt=>{tt.setSize({width:D,height:Y}),tt.draw()})}add(D,...Y){if(arguments.length>1){for(var tt=0;tt<arguments.length;tt++)this.add(arguments[tt]);return this}super.add(D);var wt=this.children.length;return wt>nt&&t.Util.warn("The stage has "+wt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),D.setSize({width:this.width(),height:this.height()}),D.draw(),i.Konva.isBrowser&&this.content.appendChild(D.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(D){return l.hasPointerCapture(D,this)}setPointerCapture(D){l.setPointerCapture(D,this)}releaseCapture(D){l.releaseCapture(D,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&dt.forEach(([D,Y])=>{this.content.addEventListener(D,tt=>{this[Y](tt)},{passive:!1})})}_pointerenter(D){this.setPointersPositions(D);const Y=F(D.type);Y&&this._fire(Y.pointerenter,{evt:D,target:this,currentTarget:this})}_pointerover(D){this.setPointersPositions(D);const Y=F(D.type);Y&&this._fire(Y.pointerover,{evt:D,target:this,currentTarget:this})}_getTargetShape(D){let Y=this[D+"targetShape"];return Y&&!Y.getStage()&&(Y=null),Y}_pointerleave(D){const Y=F(D.type),tt=vt(D.type);if(Y){this.setPointersPositions(D);var wt=this._getTargetShape(tt),mt=!o.DD.isDragging||i.Konva.hitOnDragEnabled;wt&&mt?(wt._fireAndBubble(Y.pointerout,{evt:D}),wt._fireAndBubble(Y.pointerleave,{evt:D}),this._fire(Y.pointerleave,{evt:D,target:this,currentTarget:this}),this[tt+"targetShape"]=null):mt&&(this._fire(Y.pointerleave,{evt:D,target:this,currentTarget:this}),this._fire(Y.pointerout,{evt:D,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(D){const Y=F(D.type),tt=vt(D.type);if(Y){this.setPointersPositions(D);var wt=!1;this._changedPointerPositions.forEach(mt=>{var At=this.getIntersection(mt);if(o.DD.justDragged=!1,i.Konva["_"+tt+"ListenClick"]=!0,!At||!At.isListening())return;i.Konva.capturePointerEventsEnabled&&At.setPointerCapture(mt.id),this[tt+"ClickStartShape"]=At,At._fireAndBubble(Y.pointerdown,{evt:D,pointerId:mt.id}),wt=!0;const Lt=D.type.indexOf("touch")>=0;At.preventDefault()&&D.cancelable&&Lt&&D.preventDefault()}),wt||this._fire(Y.pointerdown,{evt:D,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(D){const Y=F(D.type),tt=vt(D.type);if(!Y)return;o.DD.isDragging&&o.DD.node.preventDefault()&&D.cancelable&&D.preventDefault(),this.setPointersPositions(D);var wt=!o.DD.isDragging||i.Konva.hitOnDragEnabled;if(!wt)return;var mt={};let At=!1;var Lt=this._getTargetShape(tt);this._changedPointerPositions.forEach(Bt=>{const ft=l.getCapturedShape(Bt.id)||this.getIntersection(Bt),$=Bt.id,qt={evt:D,pointerId:$};var Ot=Lt!==ft;if(Ot&&Lt&&(Lt._fireAndBubble(Y.pointerout,{...qt},ft),Lt._fireAndBubble(Y.pointerleave,{...qt},ft)),ft){if(mt[ft._id])return;mt[ft._id]=!0}ft&&ft.isListening()?(At=!0,Ot&&(ft._fireAndBubble(Y.pointerover,{...qt},Lt),ft._fireAndBubble(Y.pointerenter,{...qt},Lt),this[tt+"targetShape"]=ft),ft._fireAndBubble(Y.pointermove,{...qt})):Lt&&(this._fire(Y.pointerover,{evt:D,target:this,currentTarget:this,pointerId:$}),this[tt+"targetShape"]=null)}),At||this._fire(Y.pointermove,{evt:D,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(D){const Y=F(D.type),tt=vt(D.type);if(!Y)return;this.setPointersPositions(D);const wt=this[tt+"ClickStartShape"],mt=this[tt+"ClickEndShape"];var At={};let Lt=!1;this._changedPointerPositions.forEach(Bt=>{const ft=l.getCapturedShape(Bt.id)||this.getIntersection(Bt);if(ft){if(ft.releaseCapture(Bt.id),At[ft._id])return;At[ft._id]=!0}const $=Bt.id,qt={evt:D,pointerId:$};let Ot=!1;i.Konva["_"+tt+"InDblClickWindow"]?(Ot=!0,clearTimeout(this[tt+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+tt+"InDblClickWindow"]=!0,clearTimeout(this[tt+"DblTimeout"])),this[tt+"DblTimeout"]=setTimeout(function(){i.Konva["_"+tt+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),ft&&ft.isListening()?(Lt=!0,this[tt+"ClickEndShape"]=ft,ft._fireAndBubble(Y.pointerup,{...qt}),i.Konva["_"+tt+"ListenClick"]&&wt&&wt===ft&&(ft._fireAndBubble(Y.pointerclick,{...qt}),Ot&&mt&&mt===ft&&ft._fireAndBubble(Y.pointerdblclick,{...qt}))):(this[tt+"ClickEndShape"]=null,i.Konva["_"+tt+"ListenClick"]&&this._fire(Y.pointerclick,{evt:D,target:this,currentTarget:this,pointerId:$}),Ot&&this._fire(Y.pointerdblclick,{evt:D,target:this,currentTarget:this,pointerId:$}))}),Lt||this._fire(Y.pointerup,{evt:D,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+tt+"ListenClick"]=!1,D.cancelable&&tt!=="touch"&&D.preventDefault()}_contextmenu(D){this.setPointersPositions(D);var Y=this.getIntersection(this.getPointerPosition());Y&&Y.isListening()?Y._fireAndBubble(T,{evt:D}):this._fire(T,{evt:D,target:this,currentTarget:this})}_wheel(D){this.setPointersPositions(D);var Y=this.getIntersection(this.getPointerPosition());Y&&Y.isListening()?Y._fireAndBubble(lt,{evt:D}):this._fire(lt,{evt:D,target:this,currentTarget:this})}_pointercancel(D){this.setPointersPositions(D);const Y=l.getCapturedShape(D.pointerId)||this.getIntersection(this.getPointerPosition());Y&&Y._fireAndBubble(R,l.createEvent(D)),l.releaseCapture(D.pointerId)}_lostpointercapture(D){l.releaseCapture(D.pointerId)}setPointersPositions(D){var Y=this._getContentPosition(),tt=null,wt=null;D=D||window.event,D.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(D.touches,mt=>{this._pointerPositions.push({id:mt.identifier,x:(mt.clientX-Y.left)/Y.scaleX,y:(mt.clientY-Y.top)/Y.scaleY})}),Array.prototype.forEach.call(D.changedTouches||D.touches,mt=>{this._changedPointerPositions.push({id:mt.identifier,x:(mt.clientX-Y.left)/Y.scaleX,y:(mt.clientY-Y.top)/Y.scaleY})})):(tt=(D.clientX-Y.left)/Y.scaleX,wt=(D.clientY-Y.top)/Y.scaleY,this.pointerPos={x:tt,y:wt},this._pointerPositions=[{x:tt,y:wt,id:t.Util._getFirstPointerId(D)}],this._changedPointerPositions=[{x:tt,y:wt,id:t.Util._getFirstPointerId(D)}])}_setPointerPosition(D){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(D)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var D=this.content.getBoundingClientRect();return{top:D.top,left:D.left,scaleX:D.width/this.content.clientWidth||1,scaleY:D.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new n.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new n.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!i.Konva.isBrowser){var D=this.container();if(!D)throw"Stage has no container. A container is required.";D.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),D.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(D){D.batchDraw()}),this}}a.Stage=J,J.prototype.nodeType=u,(0,h._registerNode)(J),e.Factory.addGetterSetter(J,"container")})(n2);var Rs={},tr={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const t=ne,e=Te,r=re,i=Ee,n=Dt,o=ne,h=Rr;var l="hasShadow",u="shadowRGBA",p="patternImage",v="linearGradient",m="radialGradient";let f;function b(){return f||(f=e.Util.createCanvasElement().getContext("2d"),f)}a.shapes={};function w(X){const q=this.attrs.fillRule;q?X.fill(q):X.fill()}function x(X){X.stroke()}function S(X){X.fill()}function P(X){X.stroke()}function y(){this._clearCache(l)}function k(){this._clearCache(u)}function R(){this._clearCache(p)}function z(){this._clearCache(v)}function W(){this._clearCache(m)}class C extends i.Node{constructor(q){super(q);let A;for(;A=e.Util.getRandomColor(),!(A&&!(A in a.shapes)););this.colorKey=A,a.shapes[A]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var q=b();const A=q.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(A&&A.setTransform){const T=new e.Transform;T.translate(this.fillPatternX(),this.fillPatternY()),T.rotate(t.Konva.getAngle(this.fillPatternRotation())),T.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),T.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const G=T.getMatrix(),U=typeof DOMMatrix>"u"?{a:G[0],b:G[1],c:G[2],d:G[3],e:G[4],f:G[5]}:new DOMMatrix(G);A.setTransform(U)}return A}}_getLinearGradient(){return this._getCache(v,this.__getLinearGradient)}__getLinearGradient(){var q=this.fillLinearGradientColorStops();if(q){for(var A=b(),T=this.fillLinearGradientStartPoint(),G=this.fillLinearGradientEndPoint(),U=A.createLinearGradient(T.x,T.y,G.x,G.y),et=0;et<q.length;et+=2)U.addColorStop(q[et],q[et+1]);return U}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){var q=this.fillRadialGradientColorStops();if(q){for(var A=b(),T=this.fillRadialGradientStartPoint(),G=this.fillRadialGradientEndPoint(),U=A.createRadialGradient(T.x,T.y,this.fillRadialGradientStartRadius(),G.x,G.y,this.fillRadialGradientEndRadius()),et=0;et<q.length;et+=2)U.addColorStop(q[et],q[et+1]);return U}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var q=e.Util.colorToRGBA(this.shadowColor());if(q)return"rgba("+q.r+","+q.g+","+q.b+","+q.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const q=this.hitStrokeWidth();return q==="auto"?this.hasStroke():this.strokeEnabled()&&!!q}intersects(q){var A=this.getStage();if(!A)return!1;const T=A.bufferHitCanvas;return T.getContext().clear(),this.drawHit(T,void 0,!0),T.context.getImageData(Math.round(q.x),Math.round(q.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(q){var A;if(!((A=this.attrs.perfectDrawEnabled)!==null&&A!==void 0?A:!0))return!1;const G=q||this.hasFill(),U=this.hasStroke(),et=this.getAbsoluteOpacity()!==1;if(G&&U&&et)return!0;const st=this.hasShadow(),lt=this.shadowForStrokeEnabled();return!!(G&&U&&st&&lt)}setStrokeHitEnabled(q){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),q?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var q=this.size();return{x:this._centroid?-q.width/2:0,y:this._centroid?-q.height/2:0,width:q.width,height:q.height}}getClientRect(q={}){const A=q.skipTransform,T=q.relativeTo,G=this.getSelfRect(),et=!q.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,st=G.width+et,lt=G.height+et,nt=!q.skipShadow&&this.hasShadow(),dt=nt?this.shadowOffsetX():0,ot=nt?this.shadowOffsetY():0,vt=st+Math.abs(dt),F=lt+Math.abs(ot),B=nt&&this.shadowBlur()||0,V=vt+B*2,J=F+B*2,rt={width:V,height:J,x:-(et/2+B)+Math.min(dt,0)+G.x,y:-(et/2+B)+Math.min(ot,0)+G.y};return A?rt:this._transformedRect(rt,T)}drawScene(q,A,T){var G=this.getLayer(),U=q||G.getCanvas(),et=U.getContext(),st=this._getCanvasCache(),lt=this.getSceneFunc(),nt=this.hasShadow(),dt,ot,vt=U.isCache,F=A===this;if(!this.isVisible()&&!F)return this;if(st){et.save();var B=this.getAbsoluteTransform(A).getMatrix();return et.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedSceneCanvas(et),et.restore(),this}if(!lt)return this;if(et.save(),this._useBufferCanvas()&&!vt){dt=this.getStage();const rt=T||dt.bufferCanvas;ot=rt.getContext(),ot.clear(),ot.save(),ot._applyLineJoin(this);var V=this.getAbsoluteTransform(A).getMatrix();ot.transform(V[0],V[1],V[2],V[3],V[4],V[5]),lt.call(this,ot,this),ot.restore();var J=rt.pixelRatio;nt&&et._applyShadow(this),et._applyOpacity(this),et._applyGlobalCompositeOperation(this),et.drawImage(rt._canvas,0,0,rt.width/J,rt.height/J)}else{if(et._applyLineJoin(this),!F){var V=this.getAbsoluteTransform(A).getMatrix();et.transform(V[0],V[1],V[2],V[3],V[4],V[5]),et._applyOpacity(this),et._applyGlobalCompositeOperation(this)}nt&&et._applyShadow(this),lt.call(this,et,this)}return et.restore(),this}drawHit(q,A,T=!1){if(!this.shouldDrawHit(A,T))return this;var G=this.getLayer(),U=q||G.hitCanvas,et=U&&U.getContext(),st=this.hitFunc()||this.sceneFunc(),lt=this._getCanvasCache(),nt=lt&&lt.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),nt){et.save();var dt=this.getAbsoluteTransform(A).getMatrix();return et.transform(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]),this._drawCachedHitCanvas(et),et.restore(),this}if(!st)return this;if(et.save(),et._applyLineJoin(this),!(this===A)){var vt=this.getAbsoluteTransform(A).getMatrix();et.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5])}return st.call(this,et,this),et.restore(),this}drawHitFromCache(q=0){var A=this._getCanvasCache(),T=this._getCachedSceneCanvas(),G=A.hit,U=G.getContext(),et=G.getWidth(),st=G.getHeight(),lt,nt,dt,ot,vt,F;U.clear(),U.drawImage(T._canvas,0,0,et,st);try{for(lt=U.getImageData(0,0,et,st),nt=lt.data,dt=nt.length,ot=e.Util._hexToRgb(this.colorKey),vt=0;vt<dt;vt+=4)F=nt[vt+3],F>q?(nt[vt]=ot.r,nt[vt+1]=ot.g,nt[vt+2]=ot.b,nt[vt+3]=255):nt[vt+3]=0;U.putImageData(lt,0,0)}catch(B){e.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(q){return h.hasPointerCapture(q,this)}setPointerCapture(q){h.setPointerCapture(q,this)}releaseCapture(q){h.releaseCapture(q,this)}}a.Shape=C,C.prototype._fillFunc=w,C.prototype._strokeFunc=x,C.prototype._fillFuncHit=S,C.prototype._strokeFuncHit=P,C.prototype._centroid=!1,C.prototype.nodeType="Shape",(0,o._registerNode)(C),C.prototype.eventListeners={},C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",y),C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",k),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",R),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",z),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",W),r.Factory.addGetterSetter(C,"stroke",void 0,(0,n.getStringOrGradientValidator)()),r.Factory.addGetterSetter(C,"strokeWidth",2,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(C,"hitStrokeWidth","auto",(0,n.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(C,"strokeHitEnabled",!0,(0,n.getBooleanValidator)()),r.Factory.addGetterSetter(C,"perfectDrawEnabled",!0,(0,n.getBooleanValidator)()),r.Factory.addGetterSetter(C,"shadowForStrokeEnabled",!0,(0,n.getBooleanValidator)()),r.Factory.addGetterSetter(C,"lineJoin"),r.Factory.addGetterSetter(C,"lineCap"),r.Factory.addGetterSetter(C,"sceneFunc"),r.Factory.addGetterSetter(C,"hitFunc"),r.Factory.addGetterSetter(C,"dash"),r.Factory.addGetterSetter(C,"dashOffset",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"shadowColor",void 0,(0,n.getStringValidator)()),r.Factory.addGetterSetter(C,"shadowBlur",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"shadowOpacity",1,(0,n.getNumberValidator)()),r.Factory.addComponentsGetterSetter(C,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(C,"shadowOffsetX",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"shadowOffsetY",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"fillPatternImage"),r.Factory.addGetterSetter(C,"fill",void 0,(0,n.getStringOrGradientValidator)()),r.Factory.addGetterSetter(C,"fillPatternX",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"fillPatternY",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(C,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(C,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(C,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(C,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(C,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(C,"fillEnabled",!0),r.Factory.addGetterSetter(C,"strokeEnabled",!0),r.Factory.addGetterSetter(C,"shadowEnabled",!0),r.Factory.addGetterSetter(C,"dashEnabled",!0),r.Factory.addGetterSetter(C,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(C,"fillPriority","color"),r.Factory.addComponentsGetterSetter(C,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(C,"fillPatternOffsetX",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"fillPatternOffsetY",0,(0,n.getNumberValidator)()),r.Factory.addComponentsGetterSetter(C,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(C,"fillPatternScaleX",1,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(C,"fillPatternScaleY",1,(0,n.getNumberValidator)()),r.Factory.addComponentsGetterSetter(C,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(C,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(C,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(C,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(C,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(C,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(C,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(C,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(C,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(C,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(C,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(C,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(C,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(C,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(C,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(C,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(C,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(C,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(C,"fillPatternRotation",0),r.Factory.addGetterSetter(C,"fillRule",void 0,(0,n.getStringValidator)()),r.Factory.backCompat(C,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(tr);Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Layer=void 0;const qi=Te,t1=Wn,Fa=Ee,T1=re,nc=hi,af=Dt,sf=tr,of=ne;var hf="#",lf="beforeDraw",cf="draw",o2=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],uf=o2.length;class Va extends t1.Container{constructor(t){super(t),this.canvas=new nc.SceneCanvas,this.hitCanvas=new nc.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Fa.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Fa.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Fa.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Fa.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Fa.Node.prototype.remove.call(this),t&&t.parentNode&&qi.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&qi.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Fa.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){qi.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){qi.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,qi.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,r=!1;;){for(let i=0;i<uf;i++){const n=o2[i],o=this._getIntersection({x:t.x+n.x*e,y:t.y+n.y*e}),h=o.shape;if(h)return h;if(r=!!o.antialiased,!o.antialiased)break}if(r)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,i=r[3];if(i===255){const n=qi.Util._rgbToHex(r[0],r[1],r[2]),o=sf.shapes[hf+n];return o?{shape:o}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(t,e){var r=this.getLayer(),i=t||r&&r.getCanvas();return this._fire(lf,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),t1.Container.prototype.drawScene.call(this,i,e),this._fire(cf,{node:this}),this}drawHit(t,e){var r=this.getLayer(),i=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),t1.Container.prototype.drawHit.call(this,i,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){qi.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return qi.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return qi.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Rs.Layer=Va;Va.prototype.nodeType="Layer";(0,of._registerNode)(Va);T1.Factory.addGetterSetter(Va,"imageSmoothingEnabled",!0);T1.Factory.addGetterSetter(Va,"clearBeforeDraw",!0);T1.Factory.addGetterSetter(Va,"hitGraphEnabled",!0,(0,af.getBooleanValidator)());var oh={};Object.defineProperty(oh,"__esModule",{value:!0});oh.FastLayer=void 0;const ff=Te,df=Rs,pf=ne;class M1 extends df.Layer{constructor(t){super(t),this.listening(!1),ff.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}oh.FastLayer=M1;M1.prototype.nodeType="FastLayer";(0,pf._registerNode)(M1);var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Group=void 0;const gf=Te,vf=Wn,mf=ne;class O1 extends vf.Container{_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&gf.Util.throw("You may only add groups and shapes to groups.")}}Ha.Group=O1;O1.prototype.nodeType="Group";(0,mf._registerNode)(O1);var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.Animation=void 0;const e1=ne,ac=Te,r1=function(){return e1.glob.performance&&e1.glob.performance.now?function(){return e1.glob.performance.now()}:function(){return new Date().getTime()}}();class Si{constructor(t,e){this.id=Si.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r1(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,r=e.length;for(let i=0;i<r;i++)if(e[i]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=Si.animations,r=e.length;for(let i=0;i<r;i++)if(e[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r1(),Si._addAnimation(this),this}stop(){return Si._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,r=this.animations,i=r.length;for(let n=0;n<i;n++)if(r[n].id===e){this.animations.splice(n,1);break}}static _runFrames(){const t={},e=this.animations;for(let r=0;r<e.length;r++){const i=e[r],n=i.layers,o=i.func;i._updateFrameObject(r1());const h=n.length;let l;if(o?l=o.call(i,i.frame)!==!1:l=!0,!!l)for(let u=0;u<h;u++){const p=n[u];p._id!==void 0&&(t[p._id]=p)}}for(let r in t)t.hasOwnProperty(r)&&t[r].batchDraw()}static _animationLoop(){const t=Si;t.animations.length?(t._runFrames(),ac.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ac.Util.requestAnimFrame(this._animationLoop))}}Wa.Animation=Si;Si.animations=[];Si.animIdCounter=0;Si.animRunning=!1;var h2={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const t=Te,e=Wa,r=Ee,i=ne;var n={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,h=2,l=3,u=0,p=["fill","stroke","shadowColor"];class v{constructor(b,w,x,S,P,y,k){this.prop=b,this.propFunc=w,this.begin=S,this._pos=S,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=k,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=P-this.begin,this.pause()}fire(b){var w=this[b];w&&w()}setTime(b){b>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():b<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=b,this.update())}getTime(){return this._time}setPosition(b){this.prevPos=this._pos,this.propFunc(b),this._pos=b}getPosition(b){return b===void 0&&(b=this._time),this.func(b,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(b){this.pause(),this._time=b,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var b=this.getTimer()-this._startTime;this.state===h?this.setTime(b):this.state===l&&this.setTime(this.duration-b)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(b){var w=this,x=b.node,S=x._id,P,y=b.easing||a.Easings.Linear,k=!!b.yoyo,R;typeof b.duration>"u"?P=.3:b.duration===0?P=.001:P=b.duration,this.node=x,this._id=u++;var z=x.getLayer()||(x instanceof i.Konva.Stage?x.getLayers():null);z||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){w.tween.onEnterFrame()},z),this.tween=new v(R,function(W){w._tweenFunc(W)},y,0,1,P*1e3,k),this._addListeners(),m.attrs[S]||(m.attrs[S]={}),m.attrs[S][this._id]||(m.attrs[S][this._id]={}),m.tweens[S]||(m.tweens[S]={});for(R in b)n[R]===void 0&&this._addAttr(R,b[R]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset,this.onUpdate=b.onUpdate}_addAttr(b,w){var x=this.node,S=x._id,P,y,k,R,z,W,C,X;if(k=m.tweens[S][b],k&&delete m.attrs[S][k][b],P=x.getAttr(b),t.Util._isArray(w))if(y=[],z=Math.max(w.length,P.length),b==="points"&&w.length!==P.length&&(w.length>P.length?(C=P,P=t.Util._prepareArrayForTween(P,w,x.closed())):(W=w,w=t.Util._prepareArrayForTween(w,P,x.closed()))),b.indexOf("fill")===0)for(R=0;R<z;R++)if(R%2===0)y.push(w[R]-P[R]);else{var q=t.Util.colorToRGBA(P[R]);X=t.Util.colorToRGBA(w[R]),P[R]=q,y.push({r:X.r-q.r,g:X.g-q.g,b:X.b-q.b,a:X.a-q.a})}else for(R=0;R<z;R++)y.push(w[R]-P[R]);else p.indexOf(b)!==-1?(P=t.Util.colorToRGBA(P),X=t.Util.colorToRGBA(w),y={r:X.r-P.r,g:X.g-P.g,b:X.b-P.b,a:X.a-P.a}):y=w-P;m.attrs[S][this._id][b]={start:P,diff:y,end:w,trueEnd:W,trueStart:C},m.tweens[S][b]=this._id}_tweenFunc(b){var w=this.node,x=m.attrs[w._id][this._id],S,P,y,k,R,z,W,C;for(S in x){if(P=x[S],y=P.start,k=P.diff,C=P.end,t.Util._isArray(y))if(R=[],W=Math.max(y.length,C.length),S.indexOf("fill")===0)for(z=0;z<W;z++)z%2===0?R.push((y[z]||0)+k[z]*b):R.push("rgba("+Math.round(y[z].r+k[z].r*b)+","+Math.round(y[z].g+k[z].g*b)+","+Math.round(y[z].b+k[z].b*b)+","+(y[z].a+k[z].a*b)+")");else for(z=0;z<W;z++)R.push((y[z]||0)+k[z]*b);else p.indexOf(S)!==-1?R="rgba("+Math.round(y.r+k.r*b)+","+Math.round(y.g+k.g*b)+","+Math.round(y.b+k.b*b)+","+(y.a+k.a*b)+")":R=y+k*b;w.setAttr(S,R)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var b=this.node,w=m.attrs[b._id][this._id];w.points&&w.points.trueEnd&&b.setAttr("points",w.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var b=this.node,w=m.attrs[b._id][this._id];w.points&&w.points.trueStart&&b.points(w.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(b){return this.tween.seek(b*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var b=this.node._id,w=this._id,x=m.tweens[b],S;this.pause();for(S in x)delete m.tweens[b][S];delete m.attrs[b][w]}}a.Tween=m,m.attrs={},m.tweens={},r.Node.prototype.to=function(f){var b=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),b&&b()};var w=new m(f);w.play()},a.Easings={BackEaseIn(f,b,w,x){var S=1.70158;return w*(f/=x)*f*((S+1)*f-S)+b},BackEaseOut(f,b,w,x){var S=1.70158;return w*((f=f/x-1)*f*((S+1)*f+S)+1)+b},BackEaseInOut(f,b,w,x){var S=1.70158;return(f/=x/2)<1?w/2*(f*f*(((S*=1.525)+1)*f-S))+b:w/2*((f-=2)*f*(((S*=1.525)+1)*f+S)+2)+b},ElasticEaseIn(f,b,w,x,S,P){var y=0;return f===0?b:(f/=x)===1?b+w:(P||(P=x*.3),!S||S<Math.abs(w)?(S=w,y=P/4):y=P/(2*Math.PI)*Math.asin(w/S),-(S*Math.pow(2,10*(f-=1))*Math.sin((f*x-y)*(2*Math.PI)/P))+b)},ElasticEaseOut(f,b,w,x,S,P){var y=0;return f===0?b:(f/=x)===1?b+w:(P||(P=x*.3),!S||S<Math.abs(w)?(S=w,y=P/4):y=P/(2*Math.PI)*Math.asin(w/S),S*Math.pow(2,-10*f)*Math.sin((f*x-y)*(2*Math.PI)/P)+w+b)},ElasticEaseInOut(f,b,w,x,S,P){var y=0;return f===0?b:(f/=x/2)===2?b+w:(P||(P=x*(.3*1.5)),!S||S<Math.abs(w)?(S=w,y=P/4):y=P/(2*Math.PI)*Math.asin(w/S),f<1?-.5*(S*Math.pow(2,10*(f-=1))*Math.sin((f*x-y)*(2*Math.PI)/P))+b:S*Math.pow(2,-10*(f-=1))*Math.sin((f*x-y)*(2*Math.PI)/P)*.5+w+b)},BounceEaseOut(f,b,w,x){return(f/=x)<1/2.75?w*(7.5625*f*f)+b:f<2/2.75?w*(7.5625*(f-=1.5/2.75)*f+.75)+b:f<2.5/2.75?w*(7.5625*(f-=2.25/2.75)*f+.9375)+b:w*(7.5625*(f-=2.625/2.75)*f+.984375)+b},BounceEaseIn(f,b,w,x){return w-a.Easings.BounceEaseOut(x-f,0,w,x)+b},BounceEaseInOut(f,b,w,x){return f<x/2?a.Easings.BounceEaseIn(f*2,0,w,x)*.5+b:a.Easings.BounceEaseOut(f*2-x,0,w,x)*.5+w*.5+b},EaseIn(f,b,w,x){return w*(f/=x)*f+b},EaseOut(f,b,w,x){return-w*(f/=x)*(f-2)+b},EaseInOut(f,b,w,x){return(f/=x/2)<1?w/2*f*f+b:-w/2*(--f*(f-2)-1)+b},StrongEaseIn(f,b,w,x){return w*(f/=x)*f*f*f*f+b},StrongEaseOut(f,b,w,x){return w*((f=f/x-1)*f*f*f*f+1)+b},StrongEaseInOut(f,b,w,x){return(f/=x/2)<1?w/2*f*f*f*f*f+b:w/2*((f-=2)*f*f*f*f+2)+b},Linear(f,b,w,x){return w*f/x+b}}})(h2);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const t=ne,e=Te,r=Ee,i=Wn,n=n2,o=Rs,h=oh,l=Ha,u=ah,p=tr,v=Wa,m=h2,f=Hi,b=hi;a.Konva=e.Util._assign(t.Konva,{Util:e.Util,Transform:e.Transform,Node:r.Node,Container:i.Container,Stage:n.Stage,stages:n.stages,Layer:o.Layer,FastLayer:h.FastLayer,Group:l.Group,DD:u.DD,Shape:p.Shape,shapes:p.shapes,Animation:v.Animation,Tween:m.Tween,Easings:m.Easings,Context:f.Context,Canvas:b.Canvas}),a.default=a.Konva})(t2);var hh={};Object.defineProperty(hh,"__esModule",{value:!0});hh.Arc=void 0;const lh=re,bf=tr,sc=ne,ch=Dt,yf=ne;class Yi extends bf.Shape{_sceneFunc(t){var e=sc.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,r),t.arc(0,0,this.innerRadius(),e,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),r=this.clockwise(),i=sc.Konva.getAngle(r?360-this.angle():this.angle()),n=Math.cos(Math.min(i,Math.PI)),o=1,h=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),u=n*(n>0?t:e),p=o*e,v=h*(h>0?t:e),m=l*(l>0?e:t);return{x:u,y:r?-1*m:v,width:p-u,height:m-v}}}hh.Arc=Yi;Yi.prototype._centroid=!0;Yi.prototype.className="Arc";Yi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,yf._registerNode)(Yi);lh.Factory.addGetterSetter(Yi,"innerRadius",0,(0,ch.getNumberValidator)());lh.Factory.addGetterSetter(Yi,"outerRadius",0,(0,ch.getNumberValidator)());lh.Factory.addGetterSetter(Yi,"angle",0,(0,ch.getNumberValidator)());lh.Factory.addGetterSetter(Yi,"clockwise",!1,(0,ch.getBooleanValidator)());var uh={},Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Line=void 0;const fh=re,_f=tr,l2=Dt,wf=ne;function A1(a,t,e,r,i,n,o){var h=Math.sqrt(Math.pow(e-a,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-r,2)),u=o*h/(h+l),p=o*l/(h+l),v=e-u*(i-a),m=r-u*(n-t),f=e+p*(i-a),b=r+p*(n-t);return[v,m,f,b]}function oc(a,t){var e=a.length,r=[],i,n;for(i=2;i<e-2;i+=2)n=A1(a[i-2],a[i-1],a[i],a[i+1],a[i+2],a[i+3],t),!isNaN(n[0])&&(r.push(n[0]),r.push(n[1]),r.push(a[i]),r.push(a[i+1]),r.push(n[2]),r.push(n[3]));return r}class wn extends _f.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var e=this.points(),r=e.length,i=this.tension(),n=this.closed(),o=this.bezier(),h,l,u;if(r){if(t.beginPath(),t.moveTo(e[0],e[1]),i!==0&&r>4){for(h=this.getTensionPoints(),l=h.length,u=n?0:4,n||t.quadraticCurveTo(h[0],h[1],h[2],h[3]);u<l-2;)t.bezierCurveTo(h[u++],h[u++],h[u++],h[u++],h[u++],h[u++]);n||t.quadraticCurveTo(h[l-2],h[l-1],e[r-2],e[r-1])}else if(o)for(u=2;u<r;)t.bezierCurveTo(e[u++],e[u++],e[u++],e[u++],e[u++],e[u++]);else for(u=2;u<r;u+=2)t.lineTo(e[u],e[u+1]);n?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():oc(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,r=this.tension(),i=A1(t[e-2],t[e-1],t[0],t[1],t[2],t[3],r),n=A1(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],r),o=oc(t,r),h=[i[2],i[3]].concat(o).concat([n[0],n[1],t[e-2],t[e-1],n[2],n[3],i[0],i[1],t[0],t[1]]);return h}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var e=t[0],r=t[0],i=t[1],n=t[1],o,h,l=0;l<t.length/2;l++)o=t[l*2],h=t[l*2+1],e=Math.min(e,o),r=Math.max(r,o),i=Math.min(i,h),n=Math.max(n,h);return{x:e,y:i,width:r-e,height:n-i}}}Ds.Line=wn;wn.prototype.className="Line";wn.prototype._attrsAffectingSize=["points","bezier","tension"];(0,wf._registerNode)(wn);fh.Factory.addGetterSetter(wn,"closed",!1);fh.Factory.addGetterSetter(wn,"bezier",!1);fh.Factory.addGetterSetter(wn,"tension",0,(0,l2.getNumberValidator)());fh.Factory.addGetterSetter(wn,"points",[],(0,l2.getNumberArrayValidator)());var $a={},c2={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,h,l)=>{let u,p,v;u=l/2,p=0;for(let f=0;f<20;f++)v=u*a.tValues[20][f]+u,p+=a.cValues[20][f]*r(o,h,v);return u*p};a.getCubicArcLength=t;const e=(o,h,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],p=h[0]-2*h[1]+h[2],v=2*o[1]-2*o[0],m=2*h[1]-2*h[0],f=4*(u*u+p*p),b=4*(u*v+p*m),w=v*v+m*m;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(h[2]-h[0],2));const x=b/(2*f),S=w/f,P=l+x,y=S-x*x,k=P*P+y>0?Math.sqrt(P*P+y):0,R=x*x+y>0?Math.sqrt(x*x+y):0,z=x+Math.sqrt(x*x+y)!==0?y*Math.log(Math.abs((P+k)/(x+R))):0;return Math.sqrt(f)/2*(P*k-x*R+z)};a.getQuadraticArcLength=e;function r(o,h,l){const u=i(1,l,o),p=i(1,l,h),v=u*u+p*p;return Math.sqrt(v)}const i=(o,h,l)=>{const u=l.length-1;let p,v;if(u===0)return 0;if(o===0){v=0;for(let m=0;m<=u;m++)v+=a.binomialCoefficients[u][m]*Math.pow(1-h,u-m)*Math.pow(h,m)*l[m];return v}else{p=new Array(u);for(let m=0;m<u;m++)p[m]=u*(l[m+1]-l[m]);return i(o-1,h,p)}},n=(o,h,l)=>{let u=1,p=o/h,v=(o-l(p))/h,m=0;for(;u>.001;){const f=l(p+v),b=Math.abs(o-f)/h;if(b<u)u=b,p+=v;else{const w=l(p-v),x=Math.abs(o-w)/h;x<u?(u=x,p-=v):v/=2}if(m++,m>500)break}return p};a.t2length=n})(c2);Object.defineProperty($a,"__esModule",{value:!0});$a.Path=void 0;const Sf=re,xf=tr,Af=ne,Ea=c2;class Ze extends xf.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ze.parsePathData(this.data()),this.pathLength=Ze.getPathLength(this.dataArray)}_sceneFunc(t){var e=this.dataArray;t.beginPath();for(var r=!1,i=0;i<e.length;i++){var n=e[i].command,o=e[i].points;switch(n){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var h=o[0],l=o[1],u=o[2],p=o[3],v=o[4],m=o[5],f=o[6],b=o[7],w=u>p?u:p,x=u>p?1:u/p,S=u>p?p/u:1;t.translate(h,l),t.rotate(f),t.scale(x,S),t.arc(0,0,w,v,v+m,1-b),t.scale(1/x,1/S),t.rotate(-f),t.translate(-h,-l);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(u){if(u.command==="A"){var p=u.points[4],v=u.points[5],m=u.points[4]+v,f=Math.PI/180;if(Math.abs(p-m)<f&&(f=Math.abs(p-m)),v<0)for(let b=p-f;b>m;b-=f){const w=Ze.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],b,0);t.push(w.x,w.y)}else for(let b=p+f;b<m;b+=f){const w=Ze.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],b,0);t.push(w.x,w.y)}}else if(u.command==="C")for(let b=0;b<=1;b+=.01){const w=Ze.getPointOnCubicBezier(b,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);t.push(w.x,w.y)}else t=t.concat(u.points)});for(var e=t[0],r=t[0],i=t[1],n=t[1],o,h,l=0;l<t.length/2;l++)o=t[l*2],h=t[l*2+1],isNaN(o)||(e=Math.min(e,o),r=Math.max(r,o)),isNaN(h)||(i=Math.min(i,h),n=Math.max(n,h));return{x:e,y:i,width:r-e,height:n-i}}getLength(){return this.pathLength}getPointAtLength(t){return Ze.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,r,i){return Math.sqrt((r-t)*(r-t)+(i-e)*(i-e))}static getPathLength(t){let e=0;for(var r=0;r<t.length;++r)e+=t[r].pathLength;return e}static getPointAtLengthOfDataArray(t,e){var r,i=0,n=e.length;if(!n)return null;for(;i<n&&t>e[i].pathLength;)t-=e[i].pathLength,++i;if(i===n)return r=e[i-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=e[i].points.slice(0,2),{x:r[0],y:r[1]};var o=e[i],h=o.points;switch(o.command){case"L":return Ze.getPointOnLine(t,o.start.x,o.start.y,h[0],h[1]);case"C":return Ze.getPointOnCubicBezier((0,Ea.t2length)(t,Ze.getPathLength(e),w=>(0,Ea.getCubicArcLength)([o.start.x,h[0],h[2],h[4]],[o.start.y,h[1],h[3],h[5]],w)),o.start.x,o.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return Ze.getPointOnQuadraticBezier((0,Ea.t2length)(t,Ze.getPathLength(e),w=>(0,Ea.getQuadraticArcLength)([o.start.x,h[0],h[2]],[o.start.y,h[1],h[3]],w)),o.start.x,o.start.y,h[0],h[1],h[2],h[3]);case"A":var l=h[0],u=h[1],p=h[2],v=h[3],m=h[4],f=h[5],b=h[6];return m+=f*t/o.pathLength,Ze.getPointOnEllipticalArc(l,u,p,v,m,b)}return null}static getPointOnLine(t,e,r,i,n,o,h){o===void 0&&(o=e),h===void 0&&(h=r);var l=(n-r)/(i-e+1e-8),u=Math.sqrt(t*t/(1+l*l));i<e&&(u*=-1);var p=l*u,v;if(i===e)v={x:o,y:h+p};else if((h-r)/(o-e+1e-8)===l)v={x:o+u,y:h+p};else{var m,f,b=this.getLineLength(e,r,i,n),w=(o-e)*(i-e)+(h-r)*(n-r);w=w/(b*b),m=e+w*(i-e),f=r+w*(n-r);var x=this.getLineLength(o,h,m,f),S=Math.sqrt(t*t-x*x);u=Math.sqrt(S*S/(1+l*l)),i<e&&(u*=-1),p=l*u,v={x:m+u,y:f+p}}return v}static getPointOnCubicBezier(t,e,r,i,n,o,h,l,u){function p(x){return x*x*x}function v(x){return 3*x*x*(1-x)}function m(x){return 3*x*(1-x)*(1-x)}function f(x){return(1-x)*(1-x)*(1-x)}var b=l*p(t)+o*v(t)+i*m(t)+e*f(t),w=u*p(t)+h*v(t)+n*m(t)+r*f(t);return{x:b,y:w}}static getPointOnQuadraticBezier(t,e,r,i,n,o,h){function l(f){return f*f}function u(f){return 2*f*(1-f)}function p(f){return(1-f)*(1-f)}var v=o*l(t)+i*u(t)+e*p(t),m=h*l(t)+n*u(t)+r*p(t);return{x:v,y:m}}static getPointOnEllipticalArc(t,e,r,i,n,o){var h=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(n),y:i*Math.sin(n)};return{x:t+(u.x*h-u.y*l),y:e+(u.x*l+u.y*h)}}static parsePathData(t){if(!t)return[];var e=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)e=e.replace(new RegExp(r[i],"g"),"|"+r[i]);var n=e.split("|"),o=[],h=[],l=0,u=0,p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,v;for(i=1;i<n.length;i++){var m=n[i],f=m.charAt(0);for(m=m.slice(1),h.length=0;v=p.exec(m);)h.push(v[0]);for(var b=[],w=0,x=h.length;w<x;w++){if(h[w]==="00"){b.push(0,0);continue}var S=parseFloat(h[w]);isNaN(S)?b.push(0):b.push(S)}for(;b.length>0&&!isNaN(b[0]);){var P="",y=[],k=l,R=u,z,W,C,X,q,A,T,G,U,et;switch(f){case"l":l+=b.shift(),u+=b.shift(),P="L",y.push(l,u);break;case"L":l=b.shift(),u=b.shift(),y.push(l,u);break;case"m":var st=b.shift(),lt=b.shift();if(l+=st,u+=lt,P="M",o.length>2&&o[o.length-1].command==="z"){for(var nt=o.length-2;nt>=0;nt--)if(o[nt].command==="M"){l=o[nt].points[0]+st,u=o[nt].points[1]+lt;break}}y.push(l,u),f="l";break;case"M":l=b.shift(),u=b.shift(),P="M",y.push(l,u),f="L";break;case"h":l+=b.shift(),P="L",y.push(l,u);break;case"H":l=b.shift(),P="L",y.push(l,u);break;case"v":u+=b.shift(),P="L",y.push(l,u);break;case"V":u=b.shift(),P="L",y.push(l,u);break;case"C":y.push(b.shift(),b.shift(),b.shift(),b.shift()),l=b.shift(),u=b.shift(),y.push(l,u);break;case"c":y.push(l+b.shift(),u+b.shift(),l+b.shift(),u+b.shift()),l+=b.shift(),u+=b.shift(),P="C",y.push(l,u);break;case"S":W=l,C=u,z=o[o.length-1],z.command==="C"&&(W=l+(l-z.points[2]),C=u+(u-z.points[3])),y.push(W,C,b.shift(),b.shift()),l=b.shift(),u=b.shift(),P="C",y.push(l,u);break;case"s":W=l,C=u,z=o[o.length-1],z.command==="C"&&(W=l+(l-z.points[2]),C=u+(u-z.points[3])),y.push(W,C,l+b.shift(),u+b.shift()),l+=b.shift(),u+=b.shift(),P="C",y.push(l,u);break;case"Q":y.push(b.shift(),b.shift()),l=b.shift(),u=b.shift(),y.push(l,u);break;case"q":y.push(l+b.shift(),u+b.shift()),l+=b.shift(),u+=b.shift(),P="Q",y.push(l,u);break;case"T":W=l,C=u,z=o[o.length-1],z.command==="Q"&&(W=l+(l-z.points[0]),C=u+(u-z.points[1])),l=b.shift(),u=b.shift(),P="Q",y.push(W,C,l,u);break;case"t":W=l,C=u,z=o[o.length-1],z.command==="Q"&&(W=l+(l-z.points[0]),C=u+(u-z.points[1])),l+=b.shift(),u+=b.shift(),P="Q",y.push(W,C,l,u);break;case"A":X=b.shift(),q=b.shift(),A=b.shift(),T=b.shift(),G=b.shift(),U=l,et=u,l=b.shift(),u=b.shift(),P="A",y=this.convertEndpointToCenterParameterization(U,et,l,u,T,G,X,q,A);break;case"a":X=b.shift(),q=b.shift(),A=b.shift(),T=b.shift(),G=b.shift(),U=l,et=u,l+=b.shift(),u+=b.shift(),P="A",y=this.convertEndpointToCenterParameterization(U,et,l,u,T,G,X,q,A);break}o.push({command:P||f,points:y,start:{x:k,y:R},pathLength:this.calcLength(k,R,P||f,y)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,r,i){var n,o,h,l,u=Ze;switch(r){case"L":return u.getLineLength(t,e,i[0],i[1]);case"C":return(0,Ea.getCubicArcLength)([t,i[0],i[2],i[4]],[e,i[1],i[3],i[5]],1);case"Q":return(0,Ea.getQuadraticArcLength)([t,i[0],i[2]],[e,i[1],i[3]],1);case"A":n=0;var p=i[4],v=i[5],m=i[4]+v,f=Math.PI/180;if(Math.abs(p-m)<f&&(f=Math.abs(p-m)),o=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),v<0)for(l=p-f;l>m;l-=f)h=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),n+=u.getLineLength(o.x,o.y,h.x,h.y),o=h;else for(l=p+f;l<m;l+=f)h=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),n+=u.getLineLength(o.x,o.y,h.x,h.y),o=h;return h=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],m,0),n+=u.getLineLength(o.x,o.y,h.x,h.y),n}return 0}static convertEndpointToCenterParameterization(t,e,r,i,n,o,h,l,u){var p=u*(Math.PI/180),v=Math.cos(p)*(t-r)/2+Math.sin(p)*(e-i)/2,m=-1*Math.sin(p)*(t-r)/2+Math.cos(p)*(e-i)/2,f=v*v/(h*h)+m*m/(l*l);f>1&&(h*=Math.sqrt(f),l*=Math.sqrt(f));var b=Math.sqrt((h*h*(l*l)-h*h*(m*m)-l*l*(v*v))/(h*h*(m*m)+l*l*(v*v)));n===o&&(b*=-1),isNaN(b)&&(b=0);var w=b*h*m/l,x=b*-l*v/h,S=(t+r)/2+Math.cos(p)*w-Math.sin(p)*x,P=(e+i)/2+Math.sin(p)*w+Math.cos(p)*x,y=function(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])},k=function(q,A){return(q[0]*A[0]+q[1]*A[1])/(y(q)*y(A))},R=function(q,A){return(q[0]*A[1]<q[1]*A[0]?-1:1)*Math.acos(k(q,A))},z=R([1,0],[(v-w)/h,(m-x)/l]),W=[(v-w)/h,(m-x)/l],C=[(-1*v-w)/h,(-1*m-x)/l],X=R(W,C);return k(W,C)<=-1&&(X=Math.PI),k(W,C)>=1&&(X=0),o===0&&X>0&&(X=X-2*Math.PI),o===1&&X<0&&(X=X+2*Math.PI),[S,P,h,l,z,X,p,o]}}$a.Path=Ze;Ze.prototype.className="Path";Ze.prototype._attrsAffectingSize=["data"];(0,Af._registerNode)(Ze);Sf.Factory.addGetterSetter(Ze,"data");Object.defineProperty(uh,"__esModule",{value:!0});uh.Arrow=void 0;const dh=re,Nf=Ds,u2=Dt,Lf=ne,hc=$a;class Yn extends Nf.Line{_sceneFunc(t){super._sceneFunc(t);var e=Math.PI*2,r=this.points(),i=r,n=this.tension()!==0&&r.length>4;n&&(i=this.getTensionPoints());var o=this.pointerLength(),h=r.length,l,u;if(n){const m=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[h-2],r[h-1]],f=hc.Path.calcLength(i[i.length-4],i[i.length-3],"C",m),b=hc.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),m[0],m[1],m[2],m[3],m[4],m[5]);l=r[h-2]-b.x,u=r[h-1]-b.y}else l=r[h-2]-r[h-4],u=r[h-1]-r[h-3];var p=(Math.atan2(u,l)+e)%e,v=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[h-2],r[h-1]),t.rotate(p),t.moveTo(0,0),t.lineTo(-o,v/2),t.lineTo(-o,-v/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),n?(l=(i[0]+i[2])/2-r[0],u=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),t.rotate((Math.atan2(-u,-l)+e)%e),t.moveTo(0,0),t.lineTo(-o,v/2),t.lineTo(-o,-v/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+e*2,height:t.height+e*2}}}uh.Arrow=Yn;Yn.prototype.className="Arrow";(0,Lf._registerNode)(Yn);dh.Factory.addGetterSetter(Yn,"pointerLength",10,(0,u2.getNumberValidator)());dh.Factory.addGetterSetter(Yn,"pointerWidth",10,(0,u2.getNumberValidator)());dh.Factory.addGetterSetter(Yn,"pointerAtBeginning",!1);dh.Factory.addGetterSetter(Yn,"pointerAtEnding",!0);var ph={};Object.defineProperty(ph,"__esModule",{value:!0});ph.Circle=void 0;const Cf=re,Pf=tr,kf=Dt,Ff=ne;class Ya extends Pf.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}ph.Circle=Ya;Ya.prototype._centroid=!0;Ya.prototype.className="Circle";Ya.prototype._attrsAffectingSize=["radius"];(0,Ff._registerNode)(Ya);Cf.Factory.addGetterSetter(Ya,"radius",0,(0,kf.getNumberValidator)());var gh={};Object.defineProperty(gh,"__esModule",{value:!0});gh.Ellipse=void 0;const R1=re,Ef=tr,f2=Dt,If=ne;class Sn extends Ef.Shape{_sceneFunc(t){var e=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),e!==r&&t.scale(1,r/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}gh.Ellipse=Sn;Sn.prototype.className="Ellipse";Sn.prototype._centroid=!0;Sn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,If._registerNode)(Sn);R1.Factory.addComponentsGetterSetter(Sn,"radius",["x","y"]);R1.Factory.addGetterSetter(Sn,"radiusX",0,(0,f2.getNumberValidator)());R1.Factory.addGetterSetter(Sn,"radiusY",0,(0,f2.getNumberValidator)());var vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.Image=void 0;const i1=Te,Xn=re,Tf=tr,Mf=ne,Bs=Dt;let Li=class d2 extends Tf.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),n=this.attrs.image;let o;if(n){const h=this.attrs.cropWidth,l=this.attrs.cropHeight;h&&l?o=[n,this.cropX(),this.cropY(),h,l,0,0,e,r]:o=[n,0,0,e,r]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?i1.Util.drawRoundedRectPath(t,e,r,i):t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)),n&&(i&&t.clip(),t.drawImage.apply(t,o))}_hitFunc(t){var e=this.width(),r=this.height(),i=this.cornerRadius();t.beginPath(),i?i1.Util.drawRoundedRectPath(t,e,r,i):t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width}getHeight(){var t,e;return(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height}static fromURL(t,e,r=null){var i=i1.Util.createImageElement();i.onload=function(){var n=new d2({image:i});e(n)},i.onerror=r,i.crossOrigin="Anonymous",i.src=t}};vh.Image=Li;Li.prototype.className="Image";(0,Mf._registerNode)(Li);Xn.Factory.addGetterSetter(Li,"cornerRadius",0,(0,Bs.getNumberOrArrayOfNumbersValidator)(4));Xn.Factory.addGetterSetter(Li,"image");Xn.Factory.addComponentsGetterSetter(Li,"crop",["x","y","width","height"]);Xn.Factory.addGetterSetter(Li,"cropX",0,(0,Bs.getNumberValidator)());Xn.Factory.addGetterSetter(Li,"cropY",0,(0,Bs.getNumberValidator)());Xn.Factory.addGetterSetter(Li,"cropWidth",0,(0,Bs.getNumberValidator)());Xn.Factory.addGetterSetter(Li,"cropHeight",0,(0,Bs.getNumberValidator)());var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.Tag=Ga.Label=void 0;const mh=re,Of=tr,Rf=Ha,D1=Dt,p2=ne;var g2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Df="Change.konva",Bf="none",N1="up",L1="right",C1="down",P1="left",jf=g2.length;class B1 extends Rf.Group{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e=this,r,i=function(){e._sync()};for(r=0;r<jf;r++)t.on(g2[r]+Df,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),e=this.getTag(),r,i,n,o,h,l,u;if(t&&e){switch(r=t.width(),i=t.height(),n=e.pointerDirection(),o=e.pointerWidth(),u=e.pointerHeight(),h=0,l=0,n){case N1:h=r/2,l=-1*u;break;case L1:h=r+o,l=i/2;break;case C1:h=r/2,l=i+u;break;case P1:h=-1*o,l=i/2;break}e.setAttrs({x:-1*h,y:-1*l,width:r,height:i}),t.setAttrs({x:-1*h,y:-1*l})}}}Ga.Label=B1;B1.prototype.className="Label";(0,p2._registerNode)(B1);class Kn extends Of.Shape{_sceneFunc(t){var e=this.width(),r=this.height(),i=this.pointerDirection(),n=this.pointerWidth(),o=this.pointerHeight(),h=this.cornerRadius();let l=0,u=0,p=0,v=0;typeof h=="number"?l=u=p=v=Math.min(h,e/2,r/2):(l=Math.min(h[0]||0,e/2,r/2),u=Math.min(h[1]||0,e/2,r/2),v=Math.min(h[2]||0,e/2,r/2),p=Math.min(h[3]||0,e/2,r/2)),t.beginPath(),t.moveTo(l,0),i===N1&&(t.lineTo((e-n)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+n)/2,0)),t.lineTo(e-u,0),t.arc(e-u,u,u,Math.PI*3/2,0,!1),i===L1&&(t.lineTo(e,(r-o)/2),t.lineTo(e+n,r/2),t.lineTo(e,(r+o)/2)),t.lineTo(e,r-v),t.arc(e-v,r-v,v,0,Math.PI/2,!1),i===C1&&(t.lineTo((e+n)/2,r),t.lineTo(e/2,r+o),t.lineTo((e-n)/2,r)),t.lineTo(p,r),t.arc(p,r-p,p,Math.PI/2,Math.PI,!1),i===P1&&(t.lineTo(0,(r+o)/2),t.lineTo(-1*n,r/2),t.lineTo(0,(r-o)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,r=this.pointerWidth(),i=this.pointerHeight(),n=this.pointerDirection(),o=this.width(),h=this.height();return n===N1?(e-=i,h+=i):n===C1?h+=i:n===P1?(t-=r*1.5,o+=r):n===L1&&(o+=r*1.5),{x:t,y:e,width:o,height:h}}}Ga.Tag=Kn;Kn.prototype.className="Tag";(0,p2._registerNode)(Kn);mh.Factory.addGetterSetter(Kn,"pointerDirection",Bf);mh.Factory.addGetterSetter(Kn,"pointerWidth",0,(0,D1.getNumberValidator)());mh.Factory.addGetterSetter(Kn,"pointerHeight",0,(0,D1.getNumberValidator)());mh.Factory.addGetterSetter(Kn,"cornerRadius",0,(0,D1.getNumberOrArrayOfNumbersValidator)(4));var js={};Object.defineProperty(js,"__esModule",{value:!0});js.Rect=void 0;const Gf=re,qf=tr,Uf=ne,zf=Te,Vf=Dt;class bh extends qf.Shape{_sceneFunc(t){var e=this.cornerRadius(),r=this.width(),i=this.height();t.beginPath(),e?zf.Util.drawRoundedRectPath(t,r,i,e):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}}js.Rect=bh;bh.prototype.className="Rect";(0,Uf._registerNode)(bh);Gf.Factory.addGetterSetter(bh,"cornerRadius",0,(0,Vf.getNumberOrArrayOfNumbersValidator)(4));var yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.RegularPolygon=void 0;const v2=re,Hf=tr,m2=Dt,Wf=ne;class Jn extends Hf.Shape{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,r=[];for(var i=0;i<t;i++)r.push({x:e*Math.sin(i*2*Math.PI/t),y:-1*e*Math.cos(i*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var e=t[0].x,r=t[0].y,i=t[0].x,n=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),n=Math.max(n,o.y)}),{x:e,y:i,width:r-e,height:n-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}yh.RegularPolygon=Jn;Jn.prototype.className="RegularPolygon";Jn.prototype._centroid=!0;Jn.prototype._attrsAffectingSize=["radius"];(0,Wf._registerNode)(Jn);v2.Factory.addGetterSetter(Jn,"radius",0,(0,m2.getNumberValidator)());v2.Factory.addGetterSetter(Jn,"sides",0,(0,m2.getNumberValidator)());var _h={};Object.defineProperty(_h,"__esModule",{value:!0});_h.Ring=void 0;const b2=re,$f=tr,y2=Dt,Yf=ne;var lc=Math.PI*2;class Qn extends $f.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,lc,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),lc,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}_h.Ring=Qn;Qn.prototype.className="Ring";Qn.prototype._centroid=!0;Qn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Yf._registerNode)(Qn);b2.Factory.addGetterSetter(Qn,"innerRadius",0,(0,y2.getNumberValidator)());b2.Factory.addGetterSetter(Qn,"outerRadius",0,(0,y2.getNumberValidator)());var wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.Sprite=void 0;const Zn=re,Xf=tr,Kf=Wa,_2=Dt,Jf=ne;class Ci extends Xf.Shape{constructor(t){super(t),this._updated=!0,this.anim=new Kf.Animation(()=>{var e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var e=this.animation(),r=this.frameIndex(),i=r*4,n=this.animations()[e],o=this.frameOffsets(),h=n[i+0],l=n[i+1],u=n[i+2],p=n[i+3],v=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,u,p),t.closePath(),t.fillStrokeShape(this)),v)if(o){var m=o[e],f=r*2;t.drawImage(v,h,l,u,p,m[f+0],m[f+1],u,p)}else t.drawImage(v,h,l,u,p,0,0,u,p)}_hitFunc(t){var e=this.animation(),r=this.frameIndex(),i=r*4,n=this.animations()[e],o=this.frameOffsets(),h=n[i+2],l=n[i+3];if(t.beginPath(),o){var u=o[e],p=r*2;t.rect(u[p+0],u[p+1],h,l)}else t.rect(0,0,h,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),e=this.animation(),r=this.animations(),i=r[e],n=i.length/4;t<n-1?this.frameIndex(t+1):this.frameIndex(0)}}wh.Sprite=Ci;Ci.prototype.className="Sprite";(0,Jf._registerNode)(Ci);Zn.Factory.addGetterSetter(Ci,"animation");Zn.Factory.addGetterSetter(Ci,"animations");Zn.Factory.addGetterSetter(Ci,"frameOffsets");Zn.Factory.addGetterSetter(Ci,"image");Zn.Factory.addGetterSetter(Ci,"frameIndex",0,(0,_2.getNumberValidator)());Zn.Factory.addGetterSetter(Ci,"frameRate",17,(0,_2.getNumberValidator)());Zn.Factory.backCompat(Ci,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.Star=void 0;const j1=re,Qf=tr,G1=Dt,Zf=ne;class xn extends Qf.Shape{_sceneFunc(t){var e=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var n=1;n<i*2;n++){var o=n%2===0?r:e,h=o*Math.sin(n*Math.PI/i),l=-1*o*Math.cos(n*Math.PI/i);t.lineTo(h,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Sh.Star=xn;xn.prototype.className="Star";xn.prototype._centroid=!0;xn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Zf._registerNode)(xn);j1.Factory.addGetterSetter(xn,"numPoints",5,(0,G1.getNumberValidator)());j1.Factory.addGetterSetter(xn,"innerRadius",0,(0,G1.getNumberValidator)());j1.Factory.addGetterSetter(xn,"outerRadius",0,(0,G1.getNumberValidator)());var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.Text=Vn.stringToArray=void 0;const k1=Te,mr=re,td=tr,An=Dt,ed=ne;function w2(a){return Array.from(a)}Vn.stringToArray=w2;var Ia="auto",rd="center",S2="inherit",Cs="justify",id="Change.konva",nd="2d",cc="-",x2="left",ad="text",sd="Text",od="top",hd="bottom",uc="middle",A2="normal",ld="px ",Mo=" ",cd="right",fc="rtl",ud="word",fd="char",dc="none",n1="…",N2=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],dd=N2.length;function pd(a){return a.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!r&&(t=`"${t}"`),t}).join(", ")}var Oo;function a1(){return Oo||(Oo=k1.Util.createCanvasElement().getContext(nd),Oo)}function gd(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function vd(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function md(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}class Ge extends td.Shape{constructor(t){super(md(t)),this._partialTextX=0,this._partialTextY=0;for(var e=0;e<dd;e++)this.on(N2[e]+id,this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,r=e.length;if(this.text()){var i=this.padding(),n=this.fontSize(),o=this.lineHeight()*n,h=this.verticalAlign(),l=this.direction(),u=0,p=this.align(),v=this.getWidth(),m=this.letterSpacing(),f=this.fill(),b=this.textDecoration(),w=b.indexOf("underline")!==-1,x=b.indexOf("line-through")!==-1,S;l=l===S2?t.direction:l;var P=0,P=o/2,y=0,k=0;for(l===fc&&t.setAttr("direction",l),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",uc),t.setAttr("textAlign",x2),h===uc?u=(this.getHeight()-r*o-i*2)/2:h===hd&&(u=this.getHeight()-r*o-i*2),t.translate(i,u+i),S=0;S<r;S++){var y=0,k=0,R=e[S],z=R.text,W=R.width,C=R.lastInParagraph,X,q,A;if(t.save(),p===cd?y+=v-W-i*2:p===rd&&(y+=(v-W-i*2)/2),w){t.save(),t.beginPath(),t.moveTo(y,P+k+Math.round(n/2)),X=z.split(" ").length-1,q=X===0,A=p===Cs&&!C?v-i*2:W,t.lineTo(y+Math.round(A),P+k+Math.round(n/2)),t.lineWidth=n/15;const lt=this._getLinearGradient();t.strokeStyle=lt||f,t.stroke(),t.restore()}if(x){t.save(),t.beginPath(),t.moveTo(y,P+k),X=z.split(" ").length-1,q=X===0,A=p===Cs&&C&&!q?v-i*2:W,t.lineTo(y+Math.round(A),P+k),t.lineWidth=n/15;const lt=this._getLinearGradient();t.strokeStyle=lt||f,t.stroke(),t.restore()}if(l!==fc&&(m!==0||p===Cs)){X=z.split(" ").length-1;for(var T=w2(z),G=0;G<T.length;G++){var U=T[G];U===" "&&!C&&p===Cs&&(y+=(v-i*2-W)/X),this._partialTextX=y,this._partialTextY=P+k,this._partialText=U,t.fillStrokeShape(this),y+=this.measureSize(U).width+m}}else m!==0&&t.setAttr("letterSpacing",`${m}px`),this._partialTextX=y,this._partialTextY=P+k,this._partialText=z,t.fillStrokeShape(this);t.restore(),r>1&&(P+=o)}}}_hitFunc(t){var e=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var e=k1.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(ad,e),this}getWidth(){var t=this.attrs.width===Ia||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===Ia||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return k1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e=a1(),r=this.fontSize(),i;return e.save(),e.font=this._getContextFont(),i=e.measureText(t),e.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+Mo+this.fontVariant()+Mo+(this.fontSize()+ld)+pd(this.fontFamily())}_addTextLine(t){this.align()===Cs&&(t=t.trim());var r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){var e=this.letterSpacing(),r=t.length;return a1().measureText(t).width+(r?e*(r-1):0)}_setTextData(){var t=this.text().split(`
`),e=+this.fontSize(),r=0,i=this.lineHeight()*e,n=this.attrs.width,o=this.attrs.height,h=n!==Ia&&n!==void 0,l=o!==Ia&&o!==void 0,u=this.padding(),p=n-u*2,v=o-u*2,m=0,f=this.wrap(),b=f!==dc,w=f!==fd&&b,x=this.ellipsis();this.textArr=[],a1().font=this._getContextFont();for(var S=x?this._getTextWidth(n1):0,P=0,y=t.length;P<y;++P){var k=t[P],R=this._getTextWidth(k);if(h&&R>p)for(;k.length>0;){for(var z=0,W=k.length,C="",X=0;z<W;){var q=z+W>>>1,A=k.slice(0,q+1),T=this._getTextWidth(A)+S;T<=p?(z=q+1,C=A,X=T):W=q}if(C){if(w){var G,U=k[C.length],et=U===Mo||U===cc;et&&X<=p?G=C.length:G=Math.max(C.lastIndexOf(Mo),C.lastIndexOf(cc))+1,G>0&&(z=G,C=C.slice(0,z),X=this._getTextWidth(C))}C=C.trimRight(),this._addTextLine(C),r=Math.max(r,X),m+=i;var st=this._shouldHandleEllipsis(m);if(st){this._tryToAddEllipsisToLastLine();break}if(k=k.slice(z),k=k.trimLeft(),k.length>0&&(R=this._getTextWidth(k),R<=p)){this._addTextLine(k),m+=i,r=Math.max(r,R);break}}else break}else this._addTextLine(k),m+=i,r=Math.max(r,R),this._shouldHandleEllipsis(m)&&P<y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&m+i>v)break}this.textHeight=e,this.textWidth=r}_shouldHandleEllipsis(t){var e=+this.fontSize(),r=this.lineHeight()*e,i=this.attrs.height,n=i!==Ia&&i!==void 0,o=this.padding(),h=i-o*2,l=this.wrap(),u=l!==dc;return!u||n&&t+r>h}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,e=t!==Ia&&t!==void 0,r=this.padding(),i=t-r*2,n=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!n)){if(e){var h=this._getTextWidth(o.text+n1)<i;h||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+n1)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}}Vn.Text=Ge;Ge.prototype._fillFunc=gd;Ge.prototype._strokeFunc=vd;Ge.prototype.className=sd;Ge.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,ed._registerNode)(Ge);mr.Factory.overWriteSetter(Ge,"width",(0,An.getNumberOrAutoValidator)());mr.Factory.overWriteSetter(Ge,"height",(0,An.getNumberOrAutoValidator)());mr.Factory.addGetterSetter(Ge,"direction",S2);mr.Factory.addGetterSetter(Ge,"fontFamily","Arial");mr.Factory.addGetterSetter(Ge,"fontSize",12,(0,An.getNumberValidator)());mr.Factory.addGetterSetter(Ge,"fontStyle",A2);mr.Factory.addGetterSetter(Ge,"fontVariant",A2);mr.Factory.addGetterSetter(Ge,"padding",0,(0,An.getNumberValidator)());mr.Factory.addGetterSetter(Ge,"align",x2);mr.Factory.addGetterSetter(Ge,"verticalAlign",od);mr.Factory.addGetterSetter(Ge,"lineHeight",1,(0,An.getNumberValidator)());mr.Factory.addGetterSetter(Ge,"wrap",ud);mr.Factory.addGetterSetter(Ge,"ellipsis",!1,(0,An.getBooleanValidator)());mr.Factory.addGetterSetter(Ge,"letterSpacing",0,(0,An.getNumberValidator)());mr.Factory.addGetterSetter(Ge,"text","",(0,An.getStringValidator)());mr.Factory.addGetterSetter(Ge,"textDecoration","");var xh={};Object.defineProperty(xh,"__esModule",{value:!0});xh.TextPath=void 0;const s1=Te,ui=re,bd=tr,Ps=$a,o1=Vn,L2=Dt,yd=ne;var _d="",C2="normal";function P2(a){a.fillText(this.partialText,0,0)}function k2(a){a.strokeText(this.partialText,0,0)}class er extends bd.Shape{constructor(t){super(t),this.dummyCanvas=s1.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Ps.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t-1>e?null:Ps.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Ps.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),r=this.fill(),i=this.fontSize(),n=this.glyphInfo;e==="underline"&&t.beginPath();for(var o=0;o<n.length;o++){t.save();var h=n[o].p0;t.translate(h.x,h.y),t.rotate(n[o].rotation),this.partialText=n[o].text,t.fillStrokeShape(this),e==="underline"&&(o===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}e==="underline"&&(t.strokeStyle=r,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var r=e[0].p0;t.moveTo(r.x,r.y)}for(var i=0;i<e.length;i++){var n=e[i].p1;t.lineTo(n.x,n.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return s1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return o1.Text.prototype.setText.call(this,t)}_getContextFont(){return o1.Text.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas,r=e.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(t);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:e}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=e,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),n=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let h=0;i==="center"&&(h=Math.max(0,this.pathLength/2-o/2)),i==="right"&&(h=Math.max(0,this.pathLength-o));const l=(0,o1.stringToArray)(this.text());let u=h;for(var p=0;p<l.length;p++){const v=this._getPointAtLength(u);if(!v)return;let m=this._getTextSize(l[p]).width+r;if(l[p]===" "&&i==="justify"){const P=this.text().split(" ").length-1;m+=(this.pathLength-o)/P}const f=this._getPointAtLength(u+m);if(!f)return;const b=Ps.Path.getLineLength(v.x,v.y,f.x,f.y);let w=0;if(n)try{w=n(l[p-1],l[p])*this.fontSize()}catch{w=0}v.x+=w,f.x+=w,this.textWidth+=w;const x=Ps.Path.getPointOnLine(w+b/2,v.x,v.y,f.x,f.y),S=Math.atan2(f.y-v.y,f.x-v.x);this.glyphInfo.push({transposeX:x.x,transposeY:x.y,text:l[p],rotation:S,p0:v,p1:f}),u+=m}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(p){t.push(p.p0.x),t.push(p.p0.y),t.push(p.p1.x),t.push(p.p1.y)});for(var e=t[0]||0,r=t[0]||0,i=t[1]||0,n=t[1]||0,o,h,l=0;l<t.length/2;l++)o=t[l*2],h=t[l*2+1],e=Math.min(e,o),r=Math.max(r,o),i=Math.min(i,h),n=Math.max(n,h);var u=this.fontSize();return{x:e-u/2,y:i-u/2,width:r-e+u,height:n-i+u}}destroy(){return s1.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}xh.TextPath=er;er.prototype._fillFunc=P2;er.prototype._strokeFunc=k2;er.prototype._fillFuncHit=P2;er.prototype._strokeFuncHit=k2;er.prototype.className="TextPath";er.prototype._attrsAffectingSize=["text","fontSize","data"];(0,yd._registerNode)(er);ui.Factory.addGetterSetter(er,"data");ui.Factory.addGetterSetter(er,"fontFamily","Arial");ui.Factory.addGetterSetter(er,"fontSize",12,(0,L2.getNumberValidator)());ui.Factory.addGetterSetter(er,"fontStyle",C2);ui.Factory.addGetterSetter(er,"align","left");ui.Factory.addGetterSetter(er,"letterSpacing",0,(0,L2.getNumberValidator)());ui.Factory.addGetterSetter(er,"textBaseline","middle");ui.Factory.addGetterSetter(er,"fontVariant",C2);ui.Factory.addGetterSetter(er,"text",_d);ui.Factory.addGetterSetter(er,"textDecoration",null);ui.Factory.addGetterSetter(er,"kerningFunc",null);var Ah={};Object.defineProperty(Ah,"__esModule",{value:!0});Ah.Transformer=void 0;const Se=Te,pe=re,pc=Ee,wd=tr,Sd=js,gc=Ha,oi=ne,Nn=Dt,xd=ne;var F2="tr-konva",Ad=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${F2}`).join(" "),vc="nodesRect",Nd=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Ld={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Cd="ontouchstart"in oi.Konva._global;function Pd(a,t,e){if(a==="rotater")return e;t+=Se.Util.degToRad(Ld[a]||0);var r=(Se.Util.radToDeg(t)%360+360)%360;return Se.Util._inRange(r,315+22.5,360)||Se.Util._inRange(r,0,22.5)?"ns-resize":Se.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":Se.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":Se.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":Se.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":Se.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":Se.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":Se.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(Se.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var $o=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],mc=1e8;function kd(a){return{x:a.x+a.width/2*Math.cos(a.rotation)+a.height/2*Math.sin(-a.rotation),y:a.y+a.height/2*Math.cos(a.rotation)+a.width/2*Math.sin(a.rotation)}}function E2(a,t,e){const r=e.x+(a.x-e.x)*Math.cos(t)-(a.y-e.y)*Math.sin(t),i=e.y+(a.x-e.x)*Math.sin(t)+(a.y-e.y)*Math.cos(t);return{...a,rotation:a.rotation+t,x:r,y:i}}function Fd(a,t){const e=kd(a);return E2(a,t,e)}function Ed(a,t,e){let r=t;for(let i=0;i<a.length;i++){const n=oi.Konva.getAngle(a[i]),o=Math.abs(n-t)%(Math.PI*2);Math.min(o,Math.PI*2-o)<e&&(r=n)}return r}class le extends gc.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Ad,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Se.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return F2+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(i=>i.isAncestorOf(this)?(Se.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const n=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},o=i._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");i.on(o,n),i.on(Nd.map(h=>h+`.${this._getEventNamespace()}`).join(" "),n),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,n),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,r=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!e)return;const i=t.getAbsolutePosition(),n=i.x-e.x,o=i.y-e.y;this.nodes().forEach(h=>{if(h===t||h.isDragging())return;const l=h.getAbsolutePosition();h.setAbsolutePosition({x:l.x+n,y:l.y+o}),h.startDrag(r)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(vc),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(vc,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),r){var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=t.getAbsoluteScale(r),o=t.getAbsolutePosition(r),h=i.x*n.x-t.offsetX()*n.x,l=i.y*n.y-t.offsetY()*n.y;const u=(oi.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:o.x+h*Math.cos(u)+l*Math.sin(-u),y:o.y+l*Math.cos(u)+h*Math.sin(u),width:i.width*n.x,height:i.height*n.y,rotation:u};return E2(p,-oi.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-mc,y:-mc,width:0,height:0,rotation:0};const e=[];this.nodes().map(u=>{const p=u.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var v=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],m=u.getAbsoluteTransform();v.forEach(function(f){var b=m.point(f);e.push(b)})});const r=new Se.Transform;r.rotate(-oi.Konva.getAngle(this.rotation()));var i=1/0,n=1/0,o=-1/0,h=-1/0;e.forEach(function(u){var p=r.point(u);i===void 0&&(i=o=p.x,n=h=p.y),i=Math.min(i,p.x),n=Math.min(n,p.y),o=Math.max(o,p.x),h=Math.max(h,p.y)}),r.invert();const l=r.point({x:i,y:n});return{x:l.x,y:l.y,width:o-i,height:h-n,rotation:oi.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),$o.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new Sd.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Cd?10:"auto"}),r=this;e.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),e.on("dragstart",i=>{e.stopDrag(),i.cancelBubble=!0}),e.on("dragend",i=>{i.cancelBubble=!0}),e.on("mouseenter",()=>{var i=oi.Konva.getAngle(this.rotation()),n=this.rotateAnchorCursor(),o=Pd(t,i,n);e.getStage().content&&(e.getStage().content.style.cursor=o),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new wd.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,r){var i=r.getParent(),n=i.padding();e.beginPath(),e.rect(-n,-n,r.width()+n*2,r.height()+n*2),e.moveTo(r.width()/2,-n),i.rotateEnabled()&&i.rotateLineVisible()&&e.lineTo(r.width()/2,-i.rotateAnchorOffset()*Se.Util._sign(r.height())-n),e.fillStrokeShape(r)},hitFunc:(e,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();e.beginPath(),e.rect(-i,-i,r.width()+i*2,r.height()+i*2),e.fillStrokeShape(r)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),r=e.width,i=e.height,n=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/n),this.cos=Math.abs(r/n),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=t.target.getAbsolutePosition(),h=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-o.x,y:h.y-o.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){var e,r,i,n=this.findOne("."+this._movingAnchorName),o=n.getStage();o.setPointersPositions(t);const h=o.getPointerPosition();let l={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const u=n.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(u,l,t)),n.setAbsolutePosition(l);const p=n.getAbsolutePosition();if(!(u.x===p.x&&u.y===p.y)){if(this._movingAnchorName==="rotater"){var v=this._getNodeRect();e=n.x()-v.width/2,r=-n.y()+v.height/2;let G=Math.atan2(-r,e)+Math.PI/2;v.height<0&&(G-=Math.PI);var m=oi.Konva.getAngle(this.rotation());const U=m+G,et=oi.Konva.getAngle(this.rotationSnapTolerance()),lt=Ed(this.rotationSnaps(),U,et)-v.rotation,nt=Fd(v,lt);this._fitNodesInto(nt,t);return}var f=this.shiftBehavior(),b;f==="inverted"?b=this.keepRatio()&&!t.shiftKey:f==="none"?b=this.keepRatio():b=this.keepRatio()||t.shiftKey;var y=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(b){var w=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(w.x-n.x(),2)+Math.pow(w.y-n.y(),2));var x=this.findOne(".top-left").x()>w.x?-1:1,S=this.findOne(".top-left").y()>w.y?-1:1;e=i*this.cos*x,r=i*this.sin*S,this.findOne(".top-left").x(w.x-e),this.findOne(".top-left").y(w.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(n.y());else if(this._movingAnchorName==="top-right"){if(b){var w=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(n.x()-w.x,2)+Math.pow(w.y-n.y(),2));var x=this.findOne(".top-right").x()<w.x?-1:1,S=this.findOne(".top-right").y()>w.y?-1:1;e=i*this.cos*x,r=i*this.sin*S,this.findOne(".top-right").x(w.x+e),this.findOne(".top-right").y(w.y-r)}var P=n.position();this.findOne(".top-left").y(P.y),this.findOne(".bottom-right").x(P.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(n.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(n.x());else if(this._movingAnchorName==="bottom-left"){if(b){var w=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(w.x-n.x(),2)+Math.pow(n.y()-w.y,2));var x=w.x<n.x()?-1:1,S=n.y()<w.y?-1:1;e=i*this.cos*x,r=i*this.sin*S,n.x(w.x-e),n.y(w.y+r)}P=n.position(),this.findOne(".top-left").x(P.x),this.findOne(".bottom-right").y(P.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(n.y());else if(this._movingAnchorName==="bottom-right"){if(b){var w=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(n.x()-w.x,2)+Math.pow(n.y()-w.y,2));var x=this.findOne(".bottom-right").x()<w.x?-1:1,S=this.findOne(".bottom-right").y()<w.y?-1:1;e=i*this.cos*x,r=i*this.sin*S,this.findOne(".bottom-right").x(w.x+e),this.findOne(".bottom-right").y(w.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var y=this.centeredScaling()||t.altKey;if(y){var k=this.findOne(".top-left"),R=this.findOne(".bottom-right"),z=k.x(),W=k.y(),C=this.getWidth()-R.x(),X=this.getHeight()-R.y();R.move({x:-z,y:-W}),k.move({x:C,y:X})}var q=this.findOne(".top-left").getAbsolutePosition();e=q.x,r=q.y;var A=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),T=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:r,width:A,height:T,rotation:oi.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(r=>{r._fire("transformend",{evt:t,target:r})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var r=this._getNodeRect();const i=1;if(Se.Util._inRange(t.width,-this.padding()*2-i,i)){this.update();return}if(Se.Util._inRange(t.height,-this.padding()*2-i,i)){this.update();return}var n=new Se.Transform;if(n.rotate(oi.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const m=n.point({x:-this.padding()*2,y:0});t.x+=m.x,t.y+=m.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const m=n.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const m=n.point({x:0,y:-this.padding()*2});t.x+=m.x,t.y+=m.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const m=n.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const m=this.boundBoxFunc()(r,t);m?t=m:Se.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,h=new Se.Transform;h.translate(r.x,r.y),h.rotate(r.rotation),h.scale(r.width/o,r.height/o);const l=new Se.Transform,u=t.width/o,p=t.height/o;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(u),Math.abs(p))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(u,p));const v=l.multiply(h.invert());this._nodes.forEach(m=>{var f;const b=m.getParent().getAbsoluteTransform(),w=m.getTransform().copy();w.translate(m.offsetX(),m.offsetY());const x=new Se.Transform;x.multiply(b.copy().invert()).multiply(v).multiply(b).multiply(w);const S=x.decompose();m.setAttrs(S),this._fire("transform",{evt:e,target:m}),m._fire("transform",{evt:e,target:m}),(f=m.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(Se.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(Se.Util._getRotation(e.rotation));var r=e.width,i=e.height,n=this.enabledAnchors(),o=this.resizeEnabled(),h=this.padding(),l=this.anchorSize();const u=this.find("._anchor");u.forEach(v=>{v.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+h,offsetY:l/2+h,visible:o&&n.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+h,visible:o&&n.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-h,offsetY:l/2+h,visible:o&&n.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+h,visible:o&&n.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-h,visible:o&&n.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+h,offsetY:l/2-h,visible:o&&n.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-h,visible:o&&n.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-h,offsetY:l/2-h,visible:o&&n.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Se.Util._sign(i)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const p=this.anchorStyleFunc();p&&u.forEach(v=>{p(v)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),gc.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return pc.Node.prototype.toObject.call(this)}clone(t){var e=pc.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Ah.Transformer=le;function Id(a){return a instanceof Array||Se.Util.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(t){$o.indexOf(t)===-1&&Se.Util.warn("Unknown anchor name: "+t+". Available names are: "+$o.join(", "))}),a||[]}le.prototype.className="Transformer";(0,xd._registerNode)(le);pe.Factory.addGetterSetter(le,"enabledAnchors",$o,Id);pe.Factory.addGetterSetter(le,"flipEnabled",!0,(0,Nn.getBooleanValidator)());pe.Factory.addGetterSetter(le,"resizeEnabled",!0);pe.Factory.addGetterSetter(le,"anchorSize",10,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"rotateEnabled",!0);pe.Factory.addGetterSetter(le,"rotateLineVisible",!0);pe.Factory.addGetterSetter(le,"rotationSnaps",[]);pe.Factory.addGetterSetter(le,"rotateAnchorOffset",50,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"rotateAnchorCursor","crosshair");pe.Factory.addGetterSetter(le,"rotationSnapTolerance",5,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"borderEnabled",!0);pe.Factory.addGetterSetter(le,"anchorStroke","rgb(0, 161, 255)");pe.Factory.addGetterSetter(le,"anchorStrokeWidth",1,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"anchorFill","white");pe.Factory.addGetterSetter(le,"anchorCornerRadius",0,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"borderStroke","rgb(0, 161, 255)");pe.Factory.addGetterSetter(le,"borderStrokeWidth",1,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"borderDash");pe.Factory.addGetterSetter(le,"keepRatio",!0);pe.Factory.addGetterSetter(le,"shiftBehavior","default");pe.Factory.addGetterSetter(le,"centeredScaling",!1);pe.Factory.addGetterSetter(le,"ignoreStroke",!1);pe.Factory.addGetterSetter(le,"padding",0,(0,Nn.getNumberValidator)());pe.Factory.addGetterSetter(le,"node");pe.Factory.addGetterSetter(le,"nodes");pe.Factory.addGetterSetter(le,"boundBoxFunc");pe.Factory.addGetterSetter(le,"anchorDragBoundFunc");pe.Factory.addGetterSetter(le,"anchorStyleFunc");pe.Factory.addGetterSetter(le,"shouldOverdrawWholeArea",!1);pe.Factory.addGetterSetter(le,"useSingleNodeRotation",!0);pe.Factory.backCompat(le,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.Wedge=void 0;const Lh=re,Td=tr,Md=ne,I2=Dt,Od=ne;class Xi extends Td.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Md.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Nh.Wedge=Xi;Xi.prototype.className="Wedge";Xi.prototype._centroid=!0;Xi.prototype._attrsAffectingSize=["radius"];(0,Od._registerNode)(Xi);Lh.Factory.addGetterSetter(Xi,"radius",0,(0,I2.getNumberValidator)());Lh.Factory.addGetterSetter(Xi,"angle",0,(0,I2.getNumberValidator)());Lh.Factory.addGetterSetter(Xi,"clockwise",!1);Lh.Factory.backCompat(Xi,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.Blur=void 0;const bc=re,Rd=Ee,Dd=Dt;function yc(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Bd=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],jd=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Gd(a,t){var e=a.data,r=a.width,i=a.height,n,o,h,l,u,p,v,m,f,b,w,x,S,P,y,k,R,z,W,C,X,q,A,T,G=t+t+1,U=r-1,et=i-1,st=t+1,lt=st*(st+1)/2,nt=new yc,dt=null,ot=nt,vt=null,F=null,B=Bd[t],V=jd[t];for(h=1;h<G;h++)ot=ot.next=new yc,h===st&&(dt=ot);for(ot.next=nt,v=p=0,o=0;o<i;o++){for(k=R=z=W=m=f=b=w=0,x=st*(C=e[p]),S=st*(X=e[p+1]),P=st*(q=e[p+2]),y=st*(A=e[p+3]),m+=lt*C,f+=lt*X,b+=lt*q,w+=lt*A,ot=nt,h=0;h<st;h++)ot.r=C,ot.g=X,ot.b=q,ot.a=A,ot=ot.next;for(h=1;h<st;h++)l=p+((U<h?U:h)<<2),m+=(ot.r=C=e[l])*(T=st-h),f+=(ot.g=X=e[l+1])*T,b+=(ot.b=q=e[l+2])*T,w+=(ot.a=A=e[l+3])*T,k+=C,R+=X,z+=q,W+=A,ot=ot.next;for(vt=nt,F=dt,n=0;n<r;n++)e[p+3]=A=w*B>>V,A!==0?(A=255/A,e[p]=(m*B>>V)*A,e[p+1]=(f*B>>V)*A,e[p+2]=(b*B>>V)*A):e[p]=e[p+1]=e[p+2]=0,m-=x,f-=S,b-=P,w-=y,x-=vt.r,S-=vt.g,P-=vt.b,y-=vt.a,l=v+((l=n+t+1)<U?l:U)<<2,k+=vt.r=e[l],R+=vt.g=e[l+1],z+=vt.b=e[l+2],W+=vt.a=e[l+3],m+=k,f+=R,b+=z,w+=W,vt=vt.next,x+=C=F.r,S+=X=F.g,P+=q=F.b,y+=A=F.a,k-=C,R-=X,z-=q,W-=A,F=F.next,p+=4;v+=r}for(n=0;n<r;n++){for(R=z=W=k=f=b=w=m=0,p=n<<2,x=st*(C=e[p]),S=st*(X=e[p+1]),P=st*(q=e[p+2]),y=st*(A=e[p+3]),m+=lt*C,f+=lt*X,b+=lt*q,w+=lt*A,ot=nt,h=0;h<st;h++)ot.r=C,ot.g=X,ot.b=q,ot.a=A,ot=ot.next;for(u=r,h=1;h<=t;h++)p=u+n<<2,m+=(ot.r=C=e[p])*(T=st-h),f+=(ot.g=X=e[p+1])*T,b+=(ot.b=q=e[p+2])*T,w+=(ot.a=A=e[p+3])*T,k+=C,R+=X,z+=q,W+=A,ot=ot.next,h<et&&(u+=r);for(p=n,vt=nt,F=dt,o=0;o<i;o++)l=p<<2,e[l+3]=A=w*B>>V,A>0?(A=255/A,e[l]=(m*B>>V)*A,e[l+1]=(f*B>>V)*A,e[l+2]=(b*B>>V)*A):e[l]=e[l+1]=e[l+2]=0,m-=x,f-=S,b-=P,w-=y,x-=vt.r,S-=vt.g,P-=vt.b,y-=vt.a,l=n+((l=o+st)<et?l:et)*r<<2,m+=k+=vt.r=e[l],f+=R+=vt.g=e[l+1],b+=z+=vt.b=e[l+2],w+=W+=vt.a=e[l+3],vt=vt.next,x+=C=F.r,S+=X=F.g,P+=q=F.b,y+=A=F.a,k-=C,R-=X,z-=q,W-=A,F=F.next,p+=r}}const qd=function(t){var e=Math.round(this.blurRadius());e>0&&Gd(t,e)};Ch.Blur=qd;bc.Factory.addGetterSetter(Rd.Node,"blurRadius",0,(0,Dd.getNumberValidator)(),bc.Factory.afterSetFilter);var Ph={};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.Brighten=void 0;const _c=re,Ud=Ee,zd=Dt,Vd=function(a){var t=this.brightness()*255,e=a.data,r=e.length,i;for(i=0;i<r;i+=4)e[i]+=t,e[i+1]+=t,e[i+2]+=t};Ph.Brighten=Vd;_c.Factory.addGetterSetter(Ud.Node,"brightness",0,(0,zd.getNumberValidator)(),_c.Factory.afterSetFilter);var kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.Contrast=void 0;const wc=re,Hd=Ee,Wd=Dt,$d=function(a){var t=Math.pow((this.contrast()+100)/100,2),e=a.data,r=e.length,i=150,n=150,o=150,h;for(h=0;h<r;h+=4)i=e[h],n=e[h+1],o=e[h+2],i/=255,i-=.5,i*=t,i+=.5,i*=255,n/=255,n-=.5,n*=t,n+=.5,n*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,i=i<0?0:i>255?255:i,n=n<0?0:n>255?255:n,o=o<0?0:o>255?255:o,e[h]=i,e[h+1]=n,e[h+2]=o};kh.Contrast=$d;wc.Factory.addGetterSetter(Hd.Node,"contrast",0,(0,Wd.getNumberValidator)(),wc.Factory.afterSetFilter);var Fh={};Object.defineProperty(Fh,"__esModule",{value:!0});Fh.Emboss=void 0;const _n=re,Eh=Ee,Yd=Te,T2=Dt,Xd=function(a){var t=this.embossStrength()*10,e=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),n=0,o=0,h=a.data,l=a.width,u=a.height,p=l*4,v=u;switch(r){case"top-left":n=-1,o=-1;break;case"top":n=-1,o=0;break;case"top-right":n=-1,o=1;break;case"right":n=0,o=1;break;case"bottom-right":n=1,o=1;break;case"bottom":n=1,o=0;break;case"bottom-left":n=1,o=-1;break;case"left":n=0,o=-1;break;default:Yd.Util.error("Unknown emboss direction: "+r)}do{var m=(v-1)*p,f=n;v+f<1&&(f=0),v+f>u&&(f=0);var b=(v-1+f)*l*4,w=l;do{var x=m+(w-1)*4,S=o;w+S<1&&(S=0),w+S>l&&(S=0);var P=b+(w-1+S)*4,y=h[x]-h[P],k=h[x+1]-h[P+1],R=h[x+2]-h[P+2],z=y,W=z>0?z:-z,C=k>0?k:-k,X=R>0?R:-R;if(C>W&&(z=k),X>W&&(z=R),z*=t,i){var q=h[x]+z,A=h[x+1]+z,T=h[x+2]+z;h[x]=q>255?255:q<0?0:q,h[x+1]=A>255?255:A<0?0:A,h[x+2]=T>255?255:T<0?0:T}else{var G=e-z;G<0?G=0:G>255&&(G=255),h[x]=h[x+1]=h[x+2]=G}}while(--w)}while(--v)};Fh.Emboss=Xd;_n.Factory.addGetterSetter(Eh.Node,"embossStrength",.5,(0,T2.getNumberValidator)(),_n.Factory.afterSetFilter);_n.Factory.addGetterSetter(Eh.Node,"embossWhiteLevel",.5,(0,T2.getNumberValidator)(),_n.Factory.afterSetFilter);_n.Factory.addGetterSetter(Eh.Node,"embossDirection","top-left",null,_n.Factory.afterSetFilter);_n.Factory.addGetterSetter(Eh.Node,"embossBlend",!1,null,_n.Factory.afterSetFilter);var Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.Enhance=void 0;const Sc=re,Kd=Ee,Jd=Dt;function h1(a,t,e,r,i){var n=e-t,o=i-r,h;return n===0?r+o/2:o===0?r:(h=(a-t)/n,h=o*h+r,h)}const Qd=function(a){var t=a.data,e=t.length,r=t[0],i=r,n,o=t[1],h=o,l,u=t[2],p=u,v,m,f=this.enhance();if(f!==0){for(m=0;m<e;m+=4)n=t[m+0],n<r?r=n:n>i&&(i=n),l=t[m+1],l<o?o=l:l>h&&(h=l),v=t[m+2],v<u?u=v:v>p&&(p=v);i===r&&(i=255,r=0),h===o&&(h=255,o=0),p===u&&(p=255,u=0);var b,w,x,S,P,y,k,R,z;for(f>0?(w=i+f*(255-i),x=r-f*(r-0),P=h+f*(255-h),y=o-f*(o-0),R=p+f*(255-p),z=u-f*(u-0)):(b=(i+r)*.5,w=i+f*(i-b),x=r+f*(r-b),S=(h+o)*.5,P=h+f*(h-S),y=o+f*(o-S),k=(p+u)*.5,R=p+f*(p-k),z=u+f*(u-k)),m=0;m<e;m+=4)t[m+0]=h1(t[m+0],r,i,x,w),t[m+1]=h1(t[m+1],o,h,y,P),t[m+2]=h1(t[m+2],u,p,z,R)}};Ih.Enhance=Qd;Sc.Factory.addGetterSetter(Kd.Node,"enhance",0,(0,Jd.getNumberValidator)(),Sc.Factory.afterSetFilter);var Th={};Object.defineProperty(Th,"__esModule",{value:!0});Th.Grayscale=void 0;const Zd=function(a){var t=a.data,e=t.length,r,i;for(r=0;r<e;r+=4)i=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=i,t[r+1]=i,t[r+2]=i};Th.Grayscale=Zd;var Mh={};Object.defineProperty(Mh,"__esModule",{value:!0});Mh.HSL=void 0;const qa=re,q1=Ee,U1=Dt;qa.Factory.addGetterSetter(q1.Node,"hue",0,(0,U1.getNumberValidator)(),qa.Factory.afterSetFilter);qa.Factory.addGetterSetter(q1.Node,"saturation",0,(0,U1.getNumberValidator)(),qa.Factory.afterSetFilter);qa.Factory.addGetterSetter(q1.Node,"luminance",0,(0,U1.getNumberValidator)(),qa.Factory.afterSetFilter);const tp=function(a){var t=a.data,e=t.length,r=1,i=Math.pow(2,this.saturation()),n=Math.abs(this.hue()+360)%360,o=this.luminance()*127,h,l=r*i*Math.cos(n*Math.PI/180),u=r*i*Math.sin(n*Math.PI/180),p=.299*r+.701*l+.167*u,v=.587*r-.587*l+.33*u,m=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,b=.587*r+.413*l+.035*u,w=.114*r-.114*l+.293*u,x=.299*r-.3*l+1.25*u,S=.587*r-.586*l-1.05*u,P=.114*r+.886*l-.2*u,y,k,R,z;for(h=0;h<e;h+=4)y=t[h+0],k=t[h+1],R=t[h+2],z=t[h+3],t[h+0]=p*y+v*k+m*R+o,t[h+1]=f*y+b*k+w*R+o,t[h+2]=x*y+S*k+P*R+o,t[h+3]=z};Mh.HSL=tp;var Oh={};Object.defineProperty(Oh,"__esModule",{value:!0});Oh.HSV=void 0;const Ua=re,z1=Ee,V1=Dt,ep=function(a){var t=a.data,e=t.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),n=Math.abs(this.hue()+360)%360,o,h=r*i*Math.cos(n*Math.PI/180),l=r*i*Math.sin(n*Math.PI/180),u=.299*r+.701*h+.167*l,p=.587*r-.587*h+.33*l,v=.114*r-.114*h-.497*l,m=.299*r-.299*h-.328*l,f=.587*r+.413*h+.035*l,b=.114*r-.114*h+.293*l,w=.299*r-.3*h+1.25*l,x=.587*r-.586*h-1.05*l,S=.114*r+.886*h-.2*l,P,y,k,R;for(o=0;o<e;o+=4)P=t[o+0],y=t[o+1],k=t[o+2],R=t[o+3],t[o+0]=u*P+p*y+v*k,t[o+1]=m*P+f*y+b*k,t[o+2]=w*P+x*y+S*k,t[o+3]=R};Oh.HSV=ep;Ua.Factory.addGetterSetter(z1.Node,"hue",0,(0,V1.getNumberValidator)(),Ua.Factory.afterSetFilter);Ua.Factory.addGetterSetter(z1.Node,"saturation",0,(0,V1.getNumberValidator)(),Ua.Factory.afterSetFilter);Ua.Factory.addGetterSetter(z1.Node,"value",0,(0,V1.getNumberValidator)(),Ua.Factory.afterSetFilter);var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0});Rh.Invert=void 0;const rp=function(a){var t=a.data,e=t.length,r;for(r=0;r<e;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};Rh.Invert=rp;var Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});Dh.Kaleidoscope=void 0;const Yo=re,M2=Ee,xc=Te,O2=Dt;var ip=function(a,t,e){var r=a.data,i=t.data,n=a.width,o=a.height,h=e.polarCenterX||n/2,l=e.polarCenterY||o/2,u,p,v,m=0,f=0,b=0,w=0,x,S=Math.sqrt(h*h+l*l);p=n-h,v=o-l,x=Math.sqrt(p*p+v*v),S=x>S?x:S;var P=o,y=n,k,R,z=360/y*Math.PI/180,W,C;for(R=0;R<y;R+=1)for(W=Math.sin(R*z),C=Math.cos(R*z),k=0;k<P;k+=1)p=Math.floor(h+S*k/P*C),v=Math.floor(l+S*k/P*W),u=(v*n+p)*4,m=r[u+0],f=r[u+1],b=r[u+2],w=r[u+3],u=(R+k*n)*4,i[u+0]=m,i[u+1]=f,i[u+2]=b,i[u+3]=w},np=function(a,t,e){var r=a.data,i=t.data,n=a.width,o=a.height,h=e.polarCenterX||n/2,l=e.polarCenterY||o/2,u,p,v,m,f,b=0,w=0,x=0,S=0,P,y=Math.sqrt(h*h+l*l);p=n-h,v=o-l,P=Math.sqrt(p*p+v*v),y=P>y?P:y;var k=o,R=n,z,W,C=e.polarRotation||0,X,q;for(p=0;p<n;p+=1)for(v=0;v<o;v+=1)m=p-h,f=v-l,z=Math.sqrt(m*m+f*f)*k/y,W=(Math.atan2(f,m)*180/Math.PI+360+C)%360,W=W*R/360,X=Math.floor(W),q=Math.floor(z),u=(q*n+X)*4,b=r[u+0],w=r[u+1],x=r[u+2],S=r[u+3],u=(v*n+p)*4,i[u+0]=b,i[u+1]=w,i[u+2]=x,i[u+3]=S};const ap=function(a){var t=a.width,e=a.height,r,i,n,o,h,l,u,p,v,m,f=Math.round(this.kaleidoscopePower()),b=Math.round(this.kaleidoscopeAngle()),w=Math.floor(t*(b%360)/360);if(!(f<1)){var x=xc.Util.createCanvasElement();x.width=t,x.height=e;var S=x.getContext("2d").getImageData(0,0,t,e);xc.Util.releaseCanvas(x),ip(a,S,{polarCenterX:t/2,polarCenterY:e/2});for(var P=t/Math.pow(2,f);P<=8;)P=P*2,f-=1;P=Math.ceil(P);var y=P,k=0,R=y,z=1;for(w+P>t&&(k=y,R=0,z=-1),i=0;i<e;i+=1)for(r=k;r!==R;r+=z)n=Math.round(r+w)%t,v=(t*i+n)*4,h=S.data[v+0],l=S.data[v+1],u=S.data[v+2],p=S.data[v+3],m=(t*i+r)*4,S.data[m+0]=h,S.data[m+1]=l,S.data[m+2]=u,S.data[m+3]=p;for(i=0;i<e;i+=1)for(y=Math.floor(P),o=0;o<f;o+=1){for(r=0;r<y+1;r+=1)v=(t*i+r)*4,h=S.data[v+0],l=S.data[v+1],u=S.data[v+2],p=S.data[v+3],m=(t*i+y*2-r-1)*4,S.data[m+0]=h,S.data[m+1]=l,S.data[m+2]=u,S.data[m+3]=p;y*=2}np(S,a,{polarRotation:0})}};Dh.Kaleidoscope=ap;Yo.Factory.addGetterSetter(M2.Node,"kaleidoscopePower",2,(0,O2.getNumberValidator)(),Yo.Factory.afterSetFilter);Yo.Factory.addGetterSetter(M2.Node,"kaleidoscopeAngle",0,(0,O2.getNumberValidator)(),Yo.Factory.afterSetFilter);var Bh={};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.Mask=void 0;const Ac=re,sp=Ee,op=Dt;function Ro(a,t,e){var r=(e*a.width+t)*4,i=[];return i.push(a.data[r++],a.data[r++],a.data[r++],a.data[r++]),i}function ks(a,t){return Math.sqrt(Math.pow(a[0]-t[0],2)+Math.pow(a[1]-t[1],2)+Math.pow(a[2]-t[2],2))}function hp(a){for(var t=[0,0,0],e=0;e<a.length;e++)t[0]+=a[e][0],t[1]+=a[e][1],t[2]+=a[e][2];return t[0]/=a.length,t[1]/=a.length,t[2]/=a.length,t}function lp(a,t){var e=Ro(a,0,0),r=Ro(a,a.width-1,0),i=Ro(a,0,a.height-1),n=Ro(a,a.width-1,a.height-1),o=t||10;if(ks(e,r)<o&&ks(r,n)<o&&ks(n,i)<o&&ks(i,e)<o){for(var h=hp([r,e,n,i]),l=[],u=0;u<a.width*a.height;u++){var p=ks(h,[a.data[u*4],a.data[u*4+1],a.data[u*4+2]]);l[u]=p<o?0:255}return l}}function cp(a,t){for(var e=0;e<a.width*a.height;e++)a.data[4*e+3]=t[e]}function up(a,t,e){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),n=Math.floor(i/2),o=[],h=0;h<e;h++)for(var l=0;l<t;l++){for(var u=h*t+l,p=0,v=0;v<i;v++)for(var m=0;m<i;m++){var f=h+v-n,b=l+m-n;if(f>=0&&f<e&&b>=0&&b<t){var w=f*t+b,x=r[v*i+m];p+=a[w]*x}}o[u]=p===255*8?255:0}return o}function fp(a,t,e){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),n=Math.floor(i/2),o=[],h=0;h<e;h++)for(var l=0;l<t;l++){for(var u=h*t+l,p=0,v=0;v<i;v++)for(var m=0;m<i;m++){var f=h+v-n,b=l+m-n;if(f>=0&&f<e&&b>=0&&b<t){var w=f*t+b,x=r[v*i+m];p+=a[w]*x}}o[u]=p>=255*4?255:0}return o}function dp(a,t,e){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),n=Math.floor(i/2),o=[],h=0;h<e;h++)for(var l=0;l<t;l++){for(var u=h*t+l,p=0,v=0;v<i;v++)for(var m=0;m<i;m++){var f=h+v-n,b=l+m-n;if(f>=0&&f<e&&b>=0&&b<t){var w=f*t+b,x=r[v*i+m];p+=a[w]*x}}o[u]=p}return o}const pp=function(a){var t=this.threshold(),e=lp(a,t);return e&&(e=up(e,a.width,a.height),e=fp(e,a.width,a.height),e=dp(e,a.width,a.height),cp(a,e)),a};Bh.Mask=pp;Ac.Factory.addGetterSetter(sp.Node,"threshold",0,(0,op.getNumberValidator)(),Ac.Factory.afterSetFilter);var jh={};Object.defineProperty(jh,"__esModule",{value:!0});jh.Noise=void 0;const Nc=re,gp=Ee,vp=Dt,mp=function(a){var t=this.noise()*255,e=a.data,r=e.length,i=t/2,n;for(n=0;n<r;n+=4)e[n+0]+=i-2*i*Math.random(),e[n+1]+=i-2*i*Math.random(),e[n+2]+=i-2*i*Math.random()};jh.Noise=mp;Nc.Factory.addGetterSetter(gp.Node,"noise",.2,(0,vp.getNumberValidator)(),Nc.Factory.afterSetFilter);var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});Gh.Pixelate=void 0;const Lc=re,bp=Te,yp=Ee,_p=Dt,wp=function(a){var t=Math.ceil(this.pixelSize()),e=a.width,r=a.height,i,n,o,h,l,u,p,v=Math.ceil(e/t),m=Math.ceil(r/t),f,b,w,x,S,P,y,k=a.data;if(t<=0){bp.Util.error("pixelSize value can not be <= 0");return}for(S=0;S<v;S+=1)for(P=0;P<m;P+=1){for(h=0,l=0,u=0,p=0,f=S*t,b=f+t,w=P*t,x=w+t,y=0,i=f;i<b;i+=1)if(!(i>=e))for(n=w;n<x;n+=1)n>=r||(o=(e*n+i)*4,h+=k[o+0],l+=k[o+1],u+=k[o+2],p+=k[o+3],y+=1);for(h=h/y,l=l/y,u=u/y,p=p/y,i=f;i<b;i+=1)if(!(i>=e))for(n=w;n<x;n+=1)n>=r||(o=(e*n+i)*4,k[o+0]=h,k[o+1]=l,k[o+2]=u,k[o+3]=p)}};Gh.Pixelate=wp;Lc.Factory.addGetterSetter(yp.Node,"pixelSize",8,(0,_p.getNumberValidator)(),Lc.Factory.afterSetFilter);var qh={};Object.defineProperty(qh,"__esModule",{value:!0});qh.Posterize=void 0;const Cc=re,Sp=Ee,xp=Dt,Ap=function(a){var t=Math.round(this.levels()*254)+1,e=a.data,r=e.length,i=255/t,n;for(n=0;n<r;n+=1)e[n]=Math.floor(e[n]/i)*i};qh.Posterize=Ap;Cc.Factory.addGetterSetter(Sp.Node,"levels",.5,(0,xp.getNumberValidator)(),Cc.Factory.afterSetFilter);var Uh={};Object.defineProperty(Uh,"__esModule",{value:!0});Uh.RGB=void 0;const Xo=re,H1=Ee,Np=Dt,Lp=function(a){var t=a.data,e=t.length,r=this.red(),i=this.green(),n=this.blue(),o,h;for(o=0;o<e;o+=4)h=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255,t[o]=h*r,t[o+1]=h*i,t[o+2]=h*n,t[o+3]=t[o+3]};Uh.RGB=Lp;Xo.Factory.addGetterSetter(H1.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Xo.Factory.addGetterSetter(H1.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Xo.Factory.addGetterSetter(H1.Node,"blue",0,Np.RGBComponent,Xo.Factory.afterSetFilter);var zh={};Object.defineProperty(zh,"__esModule",{value:!0});zh.RGBA=void 0;const Ms=re,Vh=Ee,Cp=Dt,Pp=function(a){var t=a.data,e=t.length,r=this.red(),i=this.green(),n=this.blue(),o=this.alpha(),h,l;for(h=0;h<e;h+=4)l=1-o,t[h]=r*o+t[h]*l,t[h+1]=i*o+t[h+1]*l,t[h+2]=n*o+t[h+2]*l};zh.RGBA=Pp;Ms.Factory.addGetterSetter(Vh.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Ms.Factory.addGetterSetter(Vh.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Ms.Factory.addGetterSetter(Vh.Node,"blue",0,Cp.RGBComponent,Ms.Factory.afterSetFilter);Ms.Factory.addGetterSetter(Vh.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a});var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});Hh.Sepia=void 0;const kp=function(a){var t=a.data,e=t.length,r,i,n,o;for(r=0;r<e;r+=4)i=t[r+0],n=t[r+1],o=t[r+2],t[r+0]=Math.min(255,i*.393+n*.769+o*.189),t[r+1]=Math.min(255,i*.349+n*.686+o*.168),t[r+2]=Math.min(255,i*.272+n*.534+o*.131)};Hh.Sepia=kp;var Wh={};Object.defineProperty(Wh,"__esModule",{value:!0});Wh.Solarize=void 0;const Fp=function(a){var t=a.data,e=a.width,r=a.height,i=e*4,n=r;do{var o=(n-1)*i,h=e;do{var l=o+(h-1)*4,u=t[l],p=t[l+1],v=t[l+2];u>127&&(u=255-u),p>127&&(p=255-p),v>127&&(v=255-v),t[l]=u,t[l+1]=p,t[l+2]=v}while(--h)}while(--n)};Wh.Solarize=Fp;var $h={};Object.defineProperty($h,"__esModule",{value:!0});$h.Threshold=void 0;const Pc=re,Ep=Ee,Ip=Dt,Tp=function(a){var t=this.threshold()*255,e=a.data,r=e.length,i;for(i=0;i<r;i+=1)e[i]=e[i]<t?0:255};$h.Threshold=Tp;Pc.Factory.addGetterSetter(Ep.Node,"threshold",.5,(0,Ip.getNumberValidator)(),Pc.Factory.afterSetFilter);Object.defineProperty(rh,"__esModule",{value:!0});rh.Konva=void 0;const kc=t2,Mp=hh,Op=uh,Rp=ph,Dp=gh,Bp=vh,Fc=Ga,jp=Ds,Gp=$a,qp=js,Up=yh,zp=_h,Vp=wh,Hp=Sh,Wp=Vn,$p=xh,Yp=Ah,Xp=Nh,Kp=Ch,Jp=Ph,Qp=kh,Zp=Fh,tg=Ih,eg=Th,rg=Mh,ig=Oh,ng=Rh,ag=Dh,sg=Bh,og=jh,hg=Gh,lg=qh,cg=Uh,ug=zh,fg=Hh,dg=Wh,pg=$h;rh.Konva=kc.Konva.Util._assign(kc.Konva,{Arc:Mp.Arc,Arrow:Op.Arrow,Circle:Rp.Circle,Ellipse:Dp.Ellipse,Image:Bp.Image,Label:Fc.Label,Tag:Fc.Tag,Line:jp.Line,Path:Gp.Path,Rect:qp.Rect,RegularPolygon:Up.RegularPolygon,Ring:zp.Ring,Sprite:Vp.Sprite,Star:Hp.Star,Text:Wp.Text,TextPath:$p.TextPath,Transformer:Yp.Transformer,Wedge:Xp.Wedge,Filters:{Blur:Kp.Blur,Brighten:Jp.Brighten,Contrast:Qp.Contrast,Emboss:Zp.Emboss,Enhance:tg.Enhance,Grayscale:eg.Grayscale,HSL:rg.HSL,HSV:ig.HSV,Invert:ng.Invert,Kaleidoscope:ag.Kaleidoscope,Mask:sg.Mask,Noise:og.Noise,Pixelate:hg.Pixelate,Posterize:lg.Posterize,RGB:cg.RGB,RGBA:ug.RGBA,Sepia:fg.Sepia,Solarize:dg.Solarize,Threshold:pg.Threshold}});var gg=Zc.exports;Object.defineProperty(gg,"__esModule",{value:!0});const vg=rh;Zc.exports=vg.Konva;var Ec;(function(a){a[a.Stage=0]="Stage",a[a.Layer=1]="Layer",a[a.Group=2]="Group",a[a.Label=3]="Label"})(Ec||(Ec={}));function mg(a){let t,e=`<div id="MainCanvas" class="svelte-cqj93o"></div> <script>var width = window.innerWidth - 200; // Subtracting 200px for the sidebar width
    var height = window.innerHeight;

    function update(activeAnchor) {
      var group = activeAnchor.getParent();
      var topLeft = group.findOne(".topLeft");
      var topRight = group.findOne(".topRight");
      var bottomRight = group.findOne(".bottomRight");
      var bottomLeft = group.findOne(".bottomLeft");
      var image = group.findOne("Image");

      var anchorX = activeAnchor.x();
      var anchorY = activeAnchor.y();
      
      // calculate new width and height while maintaining aspect ratio
      var width = image.width() * image.scaleX();
      var height = image.height() * image.scaleY();
      var oldTopLeftX = topLeft.x();
      var oldTopLeftY = topLeft.y();
      
      var aspectRatio = width / height;

      var newWidth, newHeight;
      switch (activeAnchor.getName()) {
        case "topLeft":
          newWidth = bottomRight.x() - anchorX;
          newHeight = newWidth / aspectRatio;
          topRight.y(anchorY);
          topLeft.x(anchorX);
          break;
        case "topRight":
          newWidth = anchorX - topLeft.x();
          newHeight = newWidth / aspectRatio;
          topLeft.y(anchorY);
          topRight.x(anchorX);
          break;
        case "bottomRight":
          newWidth = anchorX - topLeft.x();
          newHeight = newWidth / aspectRatio;
          bottomLeft.y(anchorY);
          bottomRight.x(anchorX);
          break;
        case "bottomLeft":
          newWidth = topRight.x() - anchorX;
          newHeight = newWidth / aspectRatio;
          bottomRight.y(anchorY);
          bottomLeft.x(anchorX);
          break;
      }

      image.width(newWidth);
      image.height(newHeight);

      // update the position of the anchors
      topLeft.position({ x: 0, y: 0 });
      topRight.position({ x: newWidth, y: 0 });
      bottomRight.position({ x: newWidth, y: newHeight });
      bottomLeft.position({ x: 0, y: newHeight });
    }

    function addAnchor(group, x, y, name) {
      var stage = group.getStage();
      var layer = group.getLayer();

      var anchor = new Konva.Circle({
        x: x,
        y: y,
        stroke: "#666",
        fill: "#ddd",
        strokeWidth: 2,
        radius: 8,
        name: name,
        draggable: true,
        dragOnTop: false,
      });

      anchor.on("dragmove", function () {
        update(this);
      });
      anchor.on("mousedown touchstart", function () {
        group.draggable(false);
        this.moveToTop();
      });
      anchor.on("dragend", function () {
        group.draggable(true);
      });
      // add hover styling
      anchor.on("mouseover", function () {
        var layer = this.getLayer();
        document.body.style.cursor = "pointer";
        this.strokeWidth(4);
      });
      anchor.on("mouseout", function () {
        var layer = this.getLayer();
        document.body.style.cursor = "default";
        this.strokeWidth(2);
      });
      group.add(anchor);
    }

    function deleteImage(group) {
      group.destroy();
      layer.draw();
    }

    var stage = new Konva.Stage({
      container: "MainCanvas",
      width: width,
      height: height,
    });

    var layer = new Konva.Layer();
    stage.add(layer);<\/script>`;return{c(){t=Pr("body"),t.innerHTML=e,this.h()},l(r){t=kr(r,"BODY",{class:!0,"data-svelte-h":!0}),l1(t)!=="svelte-m3d3xg"&&(t.innerHTML=e),this.h()},h(){yr(t,"class","svelte-cqj93o")},m(r,i){zn(r,t,i)},p:zi,i:zi,o:zi,d(r){r&&vr(t)}}}function bg(){var a=document.querySelector("canvas"),t=new Vt("landscape","px",[a.width,a.height]);t.addImage(a.toDataURL(),"PNG",0,0,a.width,a.height),t.save("stage.pdf")}function yg(a){console.log("Creating draggable image...");var t=new Konva.Group({draggable:!0}),e=document.createElement("img");e.src=a,e.onload=function(){var r=new Konva.Image({image:e,width:this.width,height:this.height});t.add(r),addAnchor(t,0,0,"topLeft"),addAnchor(t,this.width,0,"topRight"),addAnchor(t,this.width,this.height,"bottomRight"),addAnchor(t,0,this.height,"bottomLeft")},t.on("contextmenu",function(r){r.evt.preventDefault(),t.remove(),layer.batchDraw()}),layer.add(t)}class _g extends Jo{constructor(t){super(),Qo(this,t,null,mg,Ko,{})}}function wg(a){let t,e,r,i,n='<svg viewBox="0 0 2 3" aria-hidden="true" class="svelte-7fpi3d"><path d="M0,0 L1,2 C1.5,3 1.5,3 2,3 L2,0 Z" class="svelte-7fpi3d"></path></svg> <p class="svelte-7fpi3d">Welcome to Beyond Words!</p> <svg viewBox="0 0 2 3" aria-hidden="true" class="svelte-7fpi3d"><path d="M0,0 L0,3 C0.5,3 0.5,3 1,2 L2,0 Z" class="svelte-7fpi3d"></path></svg>',o,h,l,u="Print",p,v,m,f,b;return{c(){t=Pr("header"),e=Pr("div"),r=Gn(),i=Pr("nav"),i.innerHTML=n,o=Gn(),h=Pr("div"),l=Pr("button"),l.textContent=u,p=Gn(),v=Pr("img"),this.h()},l(w){t=kr(w,"HEADER",{class:!0});var x=Vi(t);e=kr(x,"DIV",{class:!0}),Vi(e).forEach(vr),r=qn(x),i=kr(x,"NAV",{class:!0,"data-svelte-h":!0}),l1(i)!=="svelte-95omf8"&&(i.innerHTML=n),o=qn(x),h=kr(x,"DIV",{class:!0});var S=Vi(h);l=kr(S,"BUTTON",{"data-svelte-h":!0}),l1(l)!=="svelte-1re8ziw"&&(l.textContent=u),p=qn(S),v=kr(S,"IMG",{src:!0,alt:!0,class:!0}),S.forEach(vr),x.forEach(vr),this.h()},h(){yr(e,"class","corner svelte-7fpi3d"),yr(i,"class","svelte-7fpi3d"),Mc(v.src,m=Sg)||yr(v,"src",m),yr(v,"alt","UNMC Logo"),yr(v,"class","svelte-7fpi3d"),yr(h,"class","corner svelte-7fpi3d"),yr(t,"class","svelte-7fpi3d")},m(w,x){zn(w,t,x),gr(t,e),gr(t,r),gr(t,i),gr(t,o),gr(t,h),gr(h,l),gr(h,p),gr(h,v),f||(b=Oc(l,"click",bg),f=!0)},p:zi,i:zi,o:zi,d(w){w&&vr(t),f=!1,b()}}}let Sg="images/UNMCLogo.svg";class xg extends Jo{constructor(t){super(),Qo(this,t,null,wg,Ko,{})}}function Ic(a,t,e){const r=a.slice();return r[3]=t[e],r}function Ag(a){let t,e,r,i,n,o=mn[a[3]].title+"",h,l,u,p;function v(){return a[1](a[3])}return{c(){t=Pr("div"),e=Pr("img"),i=Gn(),n=Pr("p"),h=_u(o),l=Gn(),this.h()},l(m){t=kr(m,"DIV",{class:!0});var f=Vi(t);e=kr(f,"IMG",{src:!0,alt:!0,class:!0}),i=qn(f),n=kr(f,"P",{class:!0});var b=Vi(n);h=wu(b,o),b.forEach(vr),l=qn(f),f.forEach(vr),this.h()},h(){Mc(e.src,r=mn[a[3]].path)||yr(e,"src",r),yr(e,"alt",mn[a[3]].title),yr(e,"class","svelte-wu0bdh"),yr(n,"class","imgTitle svelte-wu0bdh"),yr(t,"class","ImgContainer svelte-wu0bdh")},m(m,f){zn(m,t,f),gr(t,e),gr(t,i),gr(t,n),gr(n,h),gr(t,l),u||(p=Oc(e,"click",v),u=!0)},p(m,f){a=m},d(m){m&&vr(t),u=!1,p()}}}function Tc(a){let t,e=mn[a[3]].path&&Ag(a);return{c(){e&&e.c(),t=L0()},l(r){e&&e.l(r),t=L0()},m(r,i){e&&e.m(r,i),zn(r,t,i)},p(r,i){mn[r[3]].path&&e.p(r,i)},d(r){r&&vr(t),e&&e.d(r)}}}function Ng(a){let t,e,r=C0(Object.keys(mn)),i=[];for(let n=0;n<r.length;n+=1)i[n]=Tc(Ic(a,r,n));return{c(){t=Pr("section"),e=Pr("div");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){t=kr(n,"SECTION",{});var o=Vi(t);e=kr(o,"DIV",{class:!0});var h=Vi(e);for(let l=0;l<i.length;l+=1)i[l].l(h);h.forEach(vr),o.forEach(vr),this.h()},h(){yr(e,"class","sidebar-container svelte-wu0bdh")},m(n,o){zn(n,t,o),gr(t,e);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(n,[o]){if(o&1){r=C0(Object.keys(mn));let h;for(h=0;h<r.length;h+=1){const l=Ic(n,r,h);i[h]?i[h].p(l,o):(i[h]=Tc(l),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=r.length}},i:zi,o:zi,d(n){n&&vr(t),yu(i,n)}}}function Lg(a){function t(r){Y0.clickedImg=mn[r];let i=Y0.clickedImg.path;yg(i)}return[t,r=>t(r)]}class Cg extends Jo{constructor(t){super(),Qo(this,t,Lg,Ng,Ko,{})}}function Pg(a){let t,e,r,i,n,o,h,l;return t=new xg({}),i=new Cg({}),h=new _g({}),{c(){Bl(t.$$.fragment),e=Gn(),r=Pr("div"),Bl(i.$$.fragment),n=Gn(),o=Pr("div"),Bl(h.$$.fragment),this.h()},l(u){jl(t.$$.fragment,u),e=qn(u),r=kr(u,"DIV",{class:!0});var p=Vi(r);jl(i.$$.fragment,p),n=qn(p),o=kr(p,"DIV",{});var v=Vi(o);jl(h.$$.fragment,v),v.forEach(vr),p.forEach(vr),this.h()},h(){yr(r,"class","MainDisplay svelte-zmi5y1")},m(u,p){Gl(t,u,p),zn(u,e,p),zn(u,r,p),Gl(i,r,null),gr(r,n),gr(r,o),Gl(h,o,null),l=!0},p:zi,i(u){l||(ql(t.$$.fragment,u),ql(i.$$.fragment,u),ql(h.$$.fragment,u),l=!0)},o(u){Ul(t.$$.fragment,u),Ul(i.$$.fragment,u),Ul(h.$$.fragment,u),l=!1},d(u){u&&(vr(e),vr(r)),zl(t,u),zl(i),zl(h)}}}class Mg extends Jo{constructor(t){super(),Qo(this,t,null,Pg,Ko,{})}}export{Mg as P,ye as _,X0 as c,Ig as g};
